# Руководство по DairyComp 305 - Функциональные возможности

## О программе
**DairyComp 305** - система управления молочной фермой от Valley Agricultural Software (Tulare, CA, USA)
- Версия: W02.1212
- Платформа: Windows
- Назначение: комплексная система управления стадом

---

## Часть 1: Страницы 1-10 (Введение и навигация)

### Основная информация
**Производитель:** Valley Agricultural Software
**Адрес:** 442 North "O" Street, Tulare, CA 93274 USA
**Контакты:** 559-686-9496, www.vas.com

### Ключевые преимущества системы
1. **Централизация данных** - вся информация в одном месте
2. **Ежедневный ввод данных** - события (отел, осеменение, стельность, сухостой, продажа, здоровье)
3. **Ветеринарные списки** - автоматический отбор животных для осмотра
4. **Обмен данными** - с ветеринарами и консультантами
5. **Система поддержки клиентов** - через DHIA и офисы VAS

### Интерфейс и навигация

#### Главный экран
- Стандартный интерфейс Windows
- Меню операций
- Горизонтальная панель инструментов
- Командная строка
- Outlook-панель слева (быстрый доступ)
- Строка статуса внизу (имя БД, текущая дата)

#### Основные закладки
| Закладка | Назначение |
|----------|-----------|
| **Главная** | Стартовая страница с фоновым изображением |
| **Команды** | Список команд для ввода, отчетов, графиков |
| **Карточки коровы** | 6 страниц карточки животного |
| **Коорд сетка** | Обозреватель для вывода отчетов |
| **Отчет** | Просмотрщик последнего созданного отчета |
| **График** | Отображение диаграмм и графиков (GRAPH, PLOT) |

---

## Часть 2: Страницы 11-20 (Работа с интерфейсом)

### Управление интерфейсом

#### Мышь и клавиатура
- **Гибридный ввод**: мышь + клавиатура (особенно числовая)
- **Escape**: выход из обозревателя/карточки коровы → командная строка
- **Enter**: подтверждение команд, переход между полями
- **Tab**: переключение между полями в диалогах

#### Командная строка
**Синтаксический анализатор:**
- Нечувствителен к регистру (SHOW = show = Show)
- Максимальная длина команды: 255 символов
- Backspace: исправление ошибок
- История команд: ↑↓ (32 последние команды)
- Клавиша [Ins]: редактирование возвращенной команды

### Режим обозревателя (Report Viewer)

#### Навигация в обозревателе
| Действие | Клавиши |
|----------|---------|
| Прокрутка | Стрелки, PgUp, PgDn, Home, End |
| Конец отчета | Ctrl+End |
| Начало отчета | Ctrl+Home |
| Прервать формирование | Esc |
| Выход в командную строку | Esc (повторно) |

#### Функции обозревателя
- **Печать**: клавиша "P" или кнопка принтера
- **Экспорт в файл**: клавиша "F" (перезапись или добавление)
- **Поиск**: F9 или "=" → ввод текста
  - Повтор поиска вперед: серый плюс (+)
  - Повтор поиска назад: серый минус (-)
- **Переход к карточке**: клик на ID (синий) или F2
- **Ввод данных**: двойной клик на пункт (только сохраненные пункты)
- **Сортировка**: клик на заголовок столбца (повторный клик = обратный порядок)
- **Перезагрузка отчета**: кнопка Reload (для активации кликов)

### Система печати

#### Управление печатью
**Включение/отключение:**
- Меню "Установка" → "Enable/Disable Printer"
- Командная строка:
  - `SETUP \4` - переключение
  - `SETUP \4E` - включить (PON)
  - `SETUP \4D` - отключить (POFF)

**Режимы печати:**
- `LIST` - автоматическая печать (если печать включена)
- `SHOW` - только в обозреватель

#### Ключи форматирования
| Ключ | Назначение |
|------|------------|
| `\P` | Печать в столбцах (Pagemode) |
| `\Pn` | Печать в n столбцов |
| `\C` | Сжатый вид (132 символа вместо 80) |
| `\U` | Поля для заполнения (подчеркивания) |
| `\PC` | Максимальное количество животных на странице |

**Пример: пустые строки для заметок**
- `LIST ID RPRO SID CALF1:105 ID \U` - создаст поле из 5 символов (105-100)

### Карточка коровы (6 страниц)

#### Навигация по карточкам
| Действие | Команда |
|----------|---------|
| Вызов другой карточки | Ввести номер животного |
| Вперед | "+" или PgUp или стрелка вправо |
| Назад | "-" или PgDn или стрелка влево |
| Страница 6 | "B" |
| Страница 2 | "F" или Enter |
| Переход на страницу n | `\n` (например, `\4`) |
| Печать карточки | "P" |
| Ввод события | Аббревиатура (MAST, MOVE) |
| Изменение пункта | `PEN=2` |
| Просмотр завершенных лактаций | F3 |

#### Структура карточки

**Страница 1: События**
- 16 пунктов вверху
- До 32 событий (упорядочены по дате)
- События можно комментировать (кроме BRED)
- События текущей лактации начинаются с FRESH (отел)

**Страница 2-3: Пункты**
- Идентификация
- Репродуктивная информация
- Продуктивность
- Настраиваемые группы данных

**Страница 4: Контрольные дойки**
- 32 записи о контрольных дойках
- Упорядочены по дате
- Можно визуализировать командой PLOT

**Страница 5: Завершенные лактации**
Данные по каждой лактации:
- Номер лактации, возраст при отеле
- Даты: отел, плодотворное осеменение, сухостой
- Удой: общий, жир, белок, прогноз 305 дней
- Относительная ценность (%)
- Сервис-период, дни в доении, дни сухостоя

**Страница 6: Лактационная кривая** (упоминается в содержании)

#### Редактирование
- **Правый клик мыши**: добавить/изменить/удалить пункт или событие
- Формат полностью настраивается

### Графики и диаграммы

**Операции с графиками (GRAPH, PLOT):**
- **Печать**: кнопка принтера или меню File→Print (цветная, горизонтальная ориентация)
- **Увеличение**: левая кнопка мыши + перетаскивание (рамка)
- **Отмена увеличения**: "Undo Zoom"
- **Перемещение**: правая кнопка мыши + перетаскивание

---

## Часть 3: Страницы 21-30 (Создание отчетов и списков)

### Страница 6 карточки: Лактационная кривая

**Источники данных:**
- Ежемесячная загрузка через RECEIVE
- Ежедневный ввод надоев

**Возможности:**
- График за последние 7 дней (если ежедневный ввод)
- Клик на график → изменение надоя за день
- Увеличение графика
- Настройка осей:
  - Левая ось: MILK (по умолчанию)
  - Правая ось: LogSCC (по умолчанию)
  - Можно выбрать любые пункты (жир, белок и т.д.)

### Команда EXAM - Печать карточек коров

**Синтаксис:**
```
EXAM [список пунктов] [FOR условие] [BY сортировка] [\ключи]
```

**Ключи EXAM:**
| Ключ | Назначение |
|------|-----------|
| `A` | Печать всех страниц |
| `B` | Живые и павшие коровы |
| `D` | Только павшие коровы |
| `E` | Отдельный лист для каждой коровы |
| `H` | Печать без заголовка |
| `I` | Пропустить пункты страницы 1 |
| `L` | Поиск в архивных файлах |
| `K` | Запрос ID коров в списке |
| `N` | Не печатать (по умолчанию) |
| `P` | Каждая страница на отдельном листе |
| `S` | Режим сканирования (штрих-код) |
| `T` | Печать в вытянутом формате |
| `Y` | Да, печатать EXAM FOR... |

**Примеры:**
- `125` - страница 1 коровы 125
- `125\4` - страница 4 коровы 125
- `EXAM FOR DUE=0 DIM>150 \1E` - стр. 1 яловых коров >150 DIM, каждая на новом листе
- `EXAM \46TK` - запрос ID, печать стр. 4 + график лактации

### Создание списков и отчетов

#### Базовая структура команды

```
[SHOW/LIST] [пункты] [FOR условия] [BY сортировка] [\ключи]
```

**Различия:**
- `SHOW` - вывод в обозреватель
- `LIST` - автоматическая печать (если печать включена)

#### Список пунктов

**Пример:**
```
SHOW ID PEN LACT DIM FCM DCC
```
Выводит указанные пункты для всех коров.

#### Условие FOR - Фильтрация животных

**Операторы:**
| Оператор | Пример |
|----------|--------|
| `=` | `PEN=4`, `LACT=1` |
| `>` | `SCC>500`, `MILK>60` |
| `<` | `MILK<40`, `305ME<18000` |
| `<>` | `PEN<>1` (не равно) |
| `-` | Диапазон: `PEN=1-4`, `MILK=50-60` |

**Обратные диапазоны (исключение):**
- `PEN=4-2` - все коровы КРОМЕ секций 2, 3, 4
- `MILK=90-70` - меньше 70 или больше 90
- `DIM=210-30` - меньше 30 или больше 210

**Примеры:**
```
SHOW ID PEN LACT SCC FOR SCC>500
SHOW ID PEN LACT SCC FOR SCC>500 PEN=1
LIST ID RPRO TBRD MILK FOR MILK<50 TBRD>3 LACT=1
```

**Работа с датами:**
- Использовать точку как разделитель: `12.15.88`
- Диапазон: `FDAT=6/1/99-6/30/99`
- Избегать дефиса в датах при указании диапазонов

**Пустые значения:**
```
SHOW ID USDA FOR USDA="-" LACT=0
```

#### Сортировка BY / DOWNBY

**Типы пунктов для сортировки:**
- **1 байт**: 0-255 (LACT, TBRD, FCM, RC)
- **2 байта**: >255 (DIM, DCC, TOTM, DSLH)
- **Текстовые**: длина 9 символов (распознает числа)
- **Даты**: FDAT, ABDAT, PODAT

**Правила:**
- Автосортировка по ID (если не указано BY)
- Можно: 2 однобайтных ИЛИ 1 однобайтный + 1 двухбайтный
- Нельзя: 2 двухбайтных ключа

**Примеры:**
```
BY PEN            # По секциям, внутри по ID
BY PEN DIM        # По секциям, внутри по DIM
BY RC DIM         # По репро-статусу, затем по DIM
DOWNBY MILK       # От большей к меньшей продуктивности
BY PEN DOWNBY DCC # По секциям, внутри от большей к меньшей стельности
```

**Производительность:**
- ID и PEN всегда в RAM → быстрая сортировка
- Другие пункты загружаются с диска → медленнее

#### Условие OR - Сложные фильтры

**Логика:**
```
FOR [общее условие] (условие1 И условие2) (условие3) (условие4 И условие5)
```

**Пример - список на выбраковку:**
```
FOR LACT>1 (DOPN>150 DUE=0) (TBRD>3) (MILK<40 DIM>100)
```
Не первотелки И (сервис >150 дней, не стельная) ИЛИ (>3 осеменений) ИЛИ (<40 молока, >100 DIM)

**Пример - специфичная выборка:**
```
LIST ID PEN LACT DIM MILK FOR DIM>100 (PEN=1 MILK>60) (PEN=4 MILK<50)
```
DIM >100 И (секция 1, молоко >60) ИЛИ (секция 4, молоко <50)

**Правила OR:**
1. Перед скобками всегда должно быть условие FOR
2. Каждое OR-условие в отдельных скобках ()
3. Максимум ~3 условия OR с ~3 подусловиями каждое
4. Вложенность OR не поддерживается
5. Можно использовать с ENTER для пакетного ввода

#### Форматирование пунктов

**Ширина полей:**
```
SHOW ID FDAT:6 FDAT:4 FDAT:2 PEN:1 MILK:105 REM:16
```
- `FDAT:6` - полная дата (033192)
- `FDAT:4` - месяц+день (0331)
- `FDAT:2` - день (31)
- `MILK:105` - пустое поле из 5 символов (105-100)

**Номера пунктов:**
```
LIST #1 #2 #24  # То же что: LIST ID PEN CNTL
```

#### Пакетные команды

**Оператор `!` для объединения:**
```
REPRPT!PRODRPT!PENSUM
SUM MILK PEN PEN!LIST ID RPRO MILK FOR MILK>80
```

**Создание аббревиатуры:**
```
MONTHLY = REPRPT!PRODRPT!PENSUM
```

#### Замены в командах (параметры)

**Символ `%` для запроса:**
```
LIST ID PEN RPRO FOR PEN=4 BY %SORTKEY
```
Программа запросит: `Enter SORTKEY:`

**Сложный пример:**
```
LIST ID PEN RPRO SCC %WHAT_ELSE FOR SCC>%MIN_SCC %MORE_CONDITIONS BY %SORT
```
Запросит: WHAT_ELSE, MIN_SCC, MORE_CONDITIONS, SORT

---

## Часть 4: Страницы 31-40 (Сводные отчеты)

### Ключи LIST и SHOW

| Ключ | Назначение |
|------|-----------|
| `2` | Двойной интервал |
| `A` | Средние значения после каждой категории |
| `B` | Живые и павшие животные |
| `C` | Сжатый вид |
| `D` | Только павшие животные |
| `E` | Каждая категория на новой странице (с BY) |
| `F` | Прогон страницы после списка |
| `H` | Делит страницу пополам |
| `I` | Описание пунктов в конце отчета |
| `K` | Запрос ID# |
| `Ln` | Ограничить n животными (`\L20` = первые 20) |
| `N` | Пронумеровать строки |
| `N100` | Нумерация с 100 |
| `P` | Печать в столбцах |
| `Pn` | Печать в n столбцов |
| `Q` | Статистика: средние, станд. откл., станд. ошибки |
| `R` | Ветеринарные уведомления в конце |
| `S` | Нули пробелами |
| `T` | Суммарные значения в конце |
| `U` | Пустые строки справа (по умолчанию 5) |
| `Un` | Пустые строки для последних n пунктов |
| `V` | События для каждой коровы (стр. 1 карточки) |
| `Vn` | Последние n событий |
| `Wn` | Перенос после n знаков |
| `Z` | Включить нули |

### Сводные отчеты - Обзор

| Команда | Назначение |
|---------|-----------|
| **MONITOR** | Таблица статистики за месяц (до 13 месяцев) |
| **SUM** | Средние показатели и проценты по группе |
| **EVENTS** | Обобщение событий |
| **COUNT** | Подсчет суммарных показателей |
| **PCT** | Разбивка группы по процентам |
| **BREDSUM** | Эффективность воспроизводства |
| **COWVAL** | Определение ценности коров |

### MONITOR - Статистика по месяцам

**Назначение:** Отслеживание показателей стада за период до 13 месяцев

**Настройка:**
- До 47 индивидуальных параметров
- Настройка в меню «Опции» → «Настроить параметры»
- Важно тщательно спланировать параметры перед началом использования

**Ключи MONITOR:**
| Ключ | Функция |
|------|---------|
| `An` | Автооткрытие из HERDCODE.MOn |
| `C` | Сжатый вид, 13 месяцев |
| `2` | Двойной пробел |
| `3` | Подсчитать текущий месяц |
| `4` | Отобразить/напечатать отчет |
| `5nn` | Описание графика nn |
| `T` | "Вытянутые" графики |
| `Sn` | Сохранить в HERDCODE.MOn |
| `R` | Открыть из HERDCODE.MOn |
| `L` | Автоматический подсчет/печать |
| `Hn` | Сохранить в текстовый файл ASCII |

**Константы для параметров:**
```
@DAY    - Сегодня
@IN30   - 30 дней назад
@YEAR   - 1 год назад
@PREV   - Предыдущий месяц
@SEND   - Дата отправки SEND
@RECV   - Дата получения RECEIVE
@MTR    - Дата предыдущего сбора статистики
@BACK   - Дата очистки CLEANUP
```

**Типы расчета:**
- `NONE` - Не считать (заголовок)
- `AVG` - Среднее (исключая нули)
- `AVGZ` - Среднее (с нулями)
- `CNT` - Количество животных
- `PCT` - Процент (числитель/знаменатель)
- `DEC` - Десятичные дроби
- `MAN` - Ввод вручную
- `TOT` - Всего (например, надой в день теста)

**Рекомендации:**
- Запускать после каждого RECEIVE (~раз в месяц)
- Автозапуск через Планировщик: `MONITOR\3`
- Графики тенденций по параметрам

**Примечания:**
- Не берет данные из архивных файлов
- Пустое условие: `ID>0`
- LogSCC: использовать `LGSCC>30` вместо `LGSCC>3`
- Для диапазона LogSCC=3: `LGSCC>29 LGSCC<41`
- Для событий типа 72: всегда задавать `DSEVT>0 DSEVT<31`

### EVENTS - Обобщение событий

**Функции:**
1. Организация событий в правильном порядке
2. Список использования событий за 12 месяцев
3. Экспорт данных по событиям в файл
4. Сохранение записей контрольных доек

**Ключи EVENTS:**
| Ключ | Функция |
|------|---------|
| `n` | Выбрать опцию n |
| `A` | Информация из архива (по живым) |
| `B` | Живые и павшие |
| `E` | Столбец предполагаемого надоя |
| `F` | Сохранить в файл |
| `H` | Включить код стада |
| `I` | Запрос, какие события вывести |
| `J` | Юлианские даты |
| `P` | Печатать, не сохраняя |
| `R` | Запомнить/восстановить (EVENTSxx.HDR) |
| `S` | Выбрать интервал дат |
| `V` | Дополнительные события: DIM, EC |
| `W` | НЕ пересчитывать при удалении |
| `X` | Отключить поиск в архиве |
| `Y` | Включить молодняк |
| `#` | Только первое событие |

**Полезные комбинации:**
```
EVENTS\2si       # Запрос событий, затем период
EVENTS\2is100    # Все случаи события за 100 дней
EVENTS\s100      # ВСЕ события за 100 дней
```

**Сохранение отчета (\R):**
```
EVENTS ID PEN DIM \2PIR   # Настройка + сохранение
EVENTS\R35                # Запуск сохраненного отчета #35
```

**Ключ \S (выбор даты):**
- С \R сохраняет "начальную дату" как относительное значение (дней назад)
- Пример: указываете 30 дней назад → при каждом запуске берет последние 30 дней

**Опции меню EVENTS:**
1. **Таблица по месяцам** - все события за 13 месяцев
2. **Таблица по DIM** - события по интервалам 30 дней
3. **Список коров и событий** - детальный список
4. **Анализ телят** - пол, смертность, двойни
5. **Сортировка по событиям** - хронологический порядок
6. **Сохранение тестов в файл** - экспорт контрольных доек

**Анализ телят:**
- Период по умолчанию: 1 год
- Данные: живой/мертвый, бычок/телочка, двойни
- Процентные соотношения + графики
- Фильтр: `FOR LACT=1` и др.
- Ключ `\S` для выбора периода

**Формулы процентов:**
```
%Dead = Dead / (Alive + Dead)
%Twins = Twins / FRESH
%Female = Female / (Male + Female)
%M:Dead = M:Dead / Male
%F:Dead = F:Dead / Female
```

### SUM - Средние показатели и группировка

**Функции:**
1. Разделение коров по группам + подсчет количества
2. Расчет средних показателей по пунктам
3. Таблицы 2x2 для сравнения

**Синтаксис:**
- Пункты: 0-8
- FOR: разрешено
- BY: 1-2 пункта

**Ключи SUM:**
- `B` - Живые и павшие
- `C` - Сжатый вид
- `D` - Только павшие
- `I` - Информация по отдельным животным
- `L` - Из архивных файлов
- `W` - Описания пунктов
- `Z` - Включать нули при расчете средних

**Ограничения:**
- BY: максимум 32 варианта значений (остальные объединяются)
- Двойная сортировка: второй ключ - максимум 5 групп

**Примеры:**
```
SUM TBRD              # Среднее количество осеменений
SUM MILK PCTF PCTS LGSCC
                      # Средние по контрольным дойкам
SUM MILK BY PEN       # Надой по секциям
SUM BY LACT           # Количество и % по лактациям
SUM MILK FOR LACT>0 BY PEN LACT
                      # Надой по секциям и лактациям
```

**Таблицы 2x2:**
```
SUM LGSCC=4.5 PLOG=4.5 FOR LACT>0
```
Сравнивает линейные логарифмы SCC текущего и предыдущего месяца

### COUNT - Подсчет количества

**Назначение:** Подсчет животных по условиям

**Особенности:**
- FOR необязательно (условия можно указать сразу после COUNT)
- Информация обычно выводится в конце отчета (команда используется редко)

**Примеры:**
```
COUNT FOR LACT=1 \D     # Павшие коровы с 1 лактацией
COUNT FDAT>0 DDAT=0 PEN=3  # Коровы в доении, секция 3
COUNT BDAT=1.1.99-12.31.99 # Рожденные в 1999
```

### PCT - Процентное соотношение

**Назначение:** Процент животных из первого списка, соответствующих второму списку

**Логика:**
- Первое условие = числитель
- Второе условие (FOR) = знаменатель
- Если второе условие не задано → расчет по всему стаду

**Примеры:**
```
PCT PCTF<3.5 FOR PCTF>0 DIM>120  # % коров с жиром <3.5% среди коров DIM>120
PCT DDAT>0 FOR LACT>0            # % коров в сухостое от всех взрослых
PCT DOPN>120 DUE=0 FOR LACT>0    # % сервис-период >120 дней от всех взрослых
```

**Важно:** Первое условие = числитель, второе (FOR) = знаменатель

---

## Часть 5: Страницы 41-50 (COWVAL и ECON)

### COWVAL - Оценка ценности коров

**Назначение:** Определение ценности каждой коровы относительно средней нетели

**Создаваемые пункты:**
- `CWVAL` - относительная ценность коровы
- `PGVAL` - стоимость стельности

**Концепция:**
1. Максимальная прибыль → полная загруженность комплекса
2. Менее прибыльные животные → замена более прибыльными

**Факторы оценки:**
- Возраст (моложе = дольше даст молоко)
- Срок лактации (DIM 30 > DIM 200)
- Репродуктивный статус (стельная > яловая > не осемененная)
- Продуктивность (высокопродуктивная > низкопродуктивная)

**Процесс использования:**

1. **Запуск:** `COWVAL`
2. **Меню:**
   - Exit
   - Edit Parameters (настройка параметров)
   - Estimate Cow Value (расчет ценности)
   - Calculate Parameter Estimates (автооценка параметров)

3. **Настройка параметров:**
   - Heat Detection Rate (0.35-0.75)
   - Conception Rate (0.20-0.60)
   - Pregnancy Rate (автоматически)
   - Voluntary Wait Period
   - Average Days Open
   - Heifer Cost
   - Cull Price
   - Milk Price
   - Marginal Feed
   - Maintenance Cost
   - Discount Rate
   - Cull Rate (.20-.55, увеличивается с возрастом)
   - 305 Milk
   - Persistency (лакт.1: 0.96, лакт.2: 0.94, лакт.3+: 0.92)

4. **Интерпретация:**

**CWVAL > 0:** Корова дороже средней нетели
**CWVAL < 0:** Кандидат на выбраковку

**Для яловых коров:**
- PGVAL > 0: осеменение выгодно
- PGVAL < 0: осеменение НЕ выгодно

**Для стельных коров:**
- CWVAL уже включает PGVAL
- При аборте: новый CWVAL = старый CWVAL - PGVAL

**Пример отчета:**
```
SHOW ID LACT DIM MILK RV RPRO DSLH DCC CWVAL PGVAL BY CWVAL FOR DIM>75
```

| ID | LACT | DIM | MILK | RV | RPRO | DSLH | DCC | CWVAL | PGVAL |
|----|------|-----|------|----|----|------|-----|-------|-------|
| 4224 | 3 | 84 | 26 | 59 | BRED | 11 | 0 | -757 | -248 |
| 6848 | 1 | 125 | 48 | 72 | BRED | 27 | 0 | -410 | 587 |
| 5324 | 1 | 343 | 82 | 135 | PREG | 123 | 91 | 1912 | 1426 |

**Анализ:**
- 4224: -$757, осеменение снизит на $248 → выбраковка
- 6848: -$410, но если станет стельной: +$587-$410=$177 → осеменять
- 5324: самая ценная, но при аборте: $1912-$1426=$486

**Коровы с DNB (не осеменять):**
- Продаются при надое ниже минимального (~22 кг / ~50 фунтов)
- CWVAL положительный пока надой > минимум
- PGVAL показывает примерную стоимость выбраковки

**Применение:**
- Добавить CWVAL/PGVAL в карточки коров
- Добавить в ветеринарные списки
- Ежедневный перерасчет через Планировщик: `COWVAL\G`
- Списки на выбраковку: `FOR CWVAL<0`

### ECON - Экономические отчеты

**Назначение:** Экономический анализ + прочие функции

**Ключи ECON:**
| Ключ | Функция |
|------|---------|
| `B` | Отправить файл NAAB |
| `C` | Сжатый вид |
| `D` | Запрос дат |
| `E` | Отчет по выбывшим коровам |
| `I` | Прогноз поголовья |
| `P` | Запрос даты контрольной дойки в отчете SCC |
| `R` | Индекс выбраковки |
| `Snn` | Отчет SCC (nn = количество коров) |

#### ECON - Анализ SCC молочного танка

**Назначение:** Определение влияния каждой коровы на SCC танка

**Логика:**
- Высокопродуктивная корова → больший % молока в танке
- Ее SCC оказывает большее влияние на общий SCC танка
- Среднее взвешенное SCC

**Запуск:**
```
ECON          # Меню → "Analyze Bulk Tank SCC"
ECON\S50      # Топ-50 коров с наибольшим влиянием на SCC
```

**Структура отчета:**

**Заголовок:**
```
Analyzing 1316 cows on Test Date 1/11/01
Total Milk 99248        Bulk Tank SCC 128
Average Milk 75         Pay Price 0.00
Bulk PctF 3.73
```

**Столбцы:**
- **MILK** - надой в последней контрольной дойке
- **Value** - стоимость молока с учетом бонусов SCC
- **SCC** - соматика коровы (тыс.)
- **%Tank** - % вклада коровы в общий SCC танка
- **#SCC** - изменение SCC танка при удалении этой коровы
- **@SCC** - SCC танка после удаления коровы и всех выше
- **Income** - дневной доход после удаления

**Пример:**
| ID | MILK | SCC | %Tank | @SCC после удаления |
|----|------|-----|-------|---------------------|
| 805 | 86 | 4237 | 2.8 | 125 (-3) |
| 1277 | 60 | 5126 | 2.4 | 122 (-6) |

**Настройка цен:**
Menu "Edit Milk Prices":
```
Milk price: 13.00
SCC Differential from item: SCC
  SCC > 400:     0 центов
  SCC 350-400:   5 центов
  SCC 300-350:  10 центов
  ...
```

**Примечание:**
- Высокий SCC снижает продуктивность (~400 фунтов за лактацию при каждом удвоении SCC >50000)
- Отчет не учитывает корректировки по жиру/белку
- Используется как ориентир для принятия решений

#### ECON - Прогноз поголовья

**Назначение:** Прогноз численности стада на основе текущих данных по стельности

**Запуск:** `ECON` → меню → "Herd Inventory Projection"

**Основа расчета:**
- Общее количество животных
- Данные по стельности
- Информация о нетелях в БД

---

## ЧАСТЬ 6: Страницы 51-60

### ECON - Прогноз поголовья (продолжение)

**Пример отчета по прогнозу поголовья:**

```
 Milking Dry Lact>0 %M Lact>1 Lact=1 Lact=0 Total
 ======= === ====== == ====== ====== ====== =====
Nov 1344 256 1600 84 1165 435 1444 3044
_Fresh 158+ 107- 51+ 107 51 51-
_Dry 76- 76+ 48 28 79+Born
Dec 1426 225 1651 86 1206 445 1472 3123
_Fresh 181+ 116- 65+ 116 65 65-
_Dry 93- 93+ 66 27 90+Born
```

**Расшифровка столбцов:**
- **Milking** - коровы в доении
- **Dry** - коровы в сухостое
- **Lact>0** - всего взрослых коров
- **%M** - процент дойных
- **Lact>1** - взрослые коровы
- **Lact=1** - первотелки
- **Lact=0** - молодняк
- **Total** - фуражное поголовье

**Строки:**
- **_Fresh** - начнут доиться (из сухостоя + из нетелей)
- **_Dry** - будут переведены в сухостой
- **Born** - прогнозируемые отелы телочек

**Важные замечания:**
- Отчет НЕ учитывает выбытие коров
- Точность зависит от корректности данных по стельности
- НЕ учитываются: выбраковка, аборты, ранний запуск, смертность телят
- В конце указан % выбраковки для стабильного размера стада

**Пример интерпретации (ноябрь):**
- 1344 коровы в доении, 256 в сухостое
- 158 коров начнут доиться: 107 из сухостоя + 51 нетель
- 76 коров будут переведены в сухостой
- Из 158 отелов родится ~79 телочек (при нулевых потерях)

### ECON - Отчет по выбытию

**Назначение:**
Суммирует события SOLD (продана) и DIED (пала) по месяцам

**Функциональность:**
- Программа запрашивает начальную и конечную даты
- По клику на причину выбытия или месяц можно просмотреть список животных
- Детальный анализ динамики выбытия

---

### Команда BREDSUM - Анализ воспроизводства

**Описание:**
BREDSUM используется для отслеживания эффективности программы воспроизводства

**Основные возможности:**
- Процент плодотворных осеменений
- Дни до оплодотворения
- Общие графики осеменений
- Эффективность простагландина
- Анализ интервалов
- Сводные показатели выявления охоты

**Варианты группировки:**
- По быку
- По поставщику материала
- По технику ИО
- По схеме осеменения
- По количеству осеменений
- По дням недели
- По календарному месяцу
- По номеру цикла

**Коды результатов осеменения:**
- **P** - pregnancy (стельность)
- **O** - open (яловая)
- **R** - repeat breeding (повторное осеменение)
- **C** - conceived (осеменение после оплодотворения)
- **E** - estimated (предполагаемое осеменение)

**Естественные осеменения:**
- BULL или no sire перечислены отдельно
- НЕ включаются в расчеты по ИО

### Таблица ключей BREDSUM

| Ключ | Описание |
|------|----------|
| A | Считать всех быков как ИО, даже "BULL" |
| B | По номеру осеменения |
| C | По календарному месяцу |
| D | Выбрать интервал дат |
| E | По PregRate и Heat Detection |
| H | Выявление охоты |
| I | По интервалам повторного осеменения |
| L | Брать информацию из архивных файлов (по умолчанию) |
| M | По поставщику генетического материала |
| N | По номеру цикла |
| O | По схеме осеменения |
| P | Анализ простагландина |
| Q | Сводный график |
| R | Pregnancy rates по дням доения/возрасту |
| S | По быку |
| T | По технику ИО |
| U | Только осеменения BULLPEN |
| V | Указывать добровольный период ожидания (VWP: DIM для коров, Days old для нетелей) |
| W | По дням недели |
| X | Не брать информацию из архивов |
| Y | Включить молодняк (нетелей) |

**Использование:**
- `BREDSUM\D` - выбор временного интервала
- `BREDSUM\Y` - включить нетелей
- `BREDSUM\X` - только текущие данные (без архивов)

**Параметры по умолчанию:**
- Весь стад за последние 365 дней
- Включая павших животных
- С использованием архивных файлов

### Пример BREDSUM по техникам

```
Technician %Preg #Preg #OPEN Other Total PctTot SPC
============== ===== ===== ===== ===== ===== ====== ====
OTHERS 72 13 5 2 20 17 1.3
John 100 2 0 0 2 1 1.0
Paul 46 27 31 26 84 74 2.1
George 100 3 0 0 3 2 1.0
Ringo 0 0 0 4 4 3
============== ===== ===== ===== ===== ===== ====== ====
TOTALS 55 45 36 32 113 100 1.8
```

**Расшифровка столбцов:**

| Столбец | Описание | Формула |
|---------|----------|---------|
| %Preg | Процент стельных | #Preg / (#Preg + #OPEN) |
| #Preg | Количество плодотворных осеменений | Подсчет событий с результатом P |
| #OPEN | Нерезультативные осеменения | Корову осеменили повторно или признали яловой |
| Other | Неопределенные результаты | Не проверяли на стельность / не осеменяли повторно |
| Total | Общее количество осеменений | Сумма всех осеменений в группе |
| PctTot | Процент от общего числа | Total группы / Total всего |
| SPC | Services Per Conception | 1 / %Preg (количество осеменений на оплодотворение) |

**Категория "Other" включает:**
- Осеменения со статусом R (повторные)
- Осеменения после оплодотворения (C)
- Предполагаемые осеменения (E)
- Осеменения с результатом A (аборт) - включены в #Preg

**Пример интерпретации:**
- Paul: 84 осеменения (74% от всех)
- Результативность: 46% (27 стельных из 58 с известным результатом)
- SPC = 2.1 (в среднем 2.1 осеменения на оплодотворение)

**Важное замечание:**
При оценке показателей обращайте внимание на размер выборки, особенно в небольших стадах

### Синтаксис BREDSUM

**Условие FOR:**
Работает так же, как в других командах:
- `FOR LACT>0` - только взрослые коровы
- `FOR LACT=0` - только нетели
- `FOR PEN=2` - определенная секция
- `FOR DIM>120 DIM<180` - репродуктивная группа

**Условие BY:**
Используется для группировки:
- `BY LACT` - по номеру лактации
- `BY STAGE` - по стадии лактации
- `BY PEN` - по секции

### BREDSUM по быку

**Содержание отчета:**
- Быки по кодам NAAB
- % плодотворных осеменений (включая прерванные стельности)
- Количество стельностей
- Количество нерезультативных осеменений
- «Другие» результаты
- Количество использований материала
- Процент использования от всех осеменений
- SPC для каждого быка

```
Sire Name %Preg #Preg #OPEN Other Total PctTot SPC
========= ==== ===== ===== ===== ===== ====== ====
14H652 25 1 3 3 7 6 4.0
14H661 50 4 4 4 12 10 2.0
14H1151 75 3 1 0 4 3 1.3
14H1160 27 3 8 6 17 15 3.6
14H1170 50 3 3 3 9 7 2.0
14H1172 25 1 3 0 4 3 4.0
============== ===== ===== ===== ===== ===== ====== ====
TOTALS 55 45 36 32 113 100 1.8
```

### BREDSUM по поставщику

**Сортировка по кодам поставщиков:**
- 11 = Alta
- 29 = ABS
- 7 = Select Sires
- И т.д.

**Добавление номера поставщика:**
Команда `BREDSUM\M14` - отчет только по поставщику 14

```
Stud Code %Preg #Preg #OPEN Other Total PctTot SPC
============== ===== ===== ===== ===== ===== ====== ====
 7 45 23 28 7 58 44 2.2
 14 44 22 28 25 75 56 2.2
============== ===== ===== ===== ===== ===== ====== ====
TOTALS 45 45 56 32 133 100 2.2
```

### BREDSUM по техникам

**Настройка:**
Меню «Опции» | «Осеменение и техники» (Breeding and Technicians) | «Изменить таблицу техников» (Modify Technician Table) | «Добавить техника» (Add a Technician)

**Параметры техника:**
- До 8 техников в таблице
- Номер техника
- Имя (до 14 символов)
- Номер указывается при внесении события BRED
- Отображается на странице 1 карточки коровы
- Хранится в пункте TECH

**Просмотр по одному технику:**
Команда `BREDSUM\T2` - отчет только по технику №2

### BREDSUM по схеме осеменения

**Назначение:**
Анализ результатов различных схем осеменения (медикаменты до/после/во время осеменения, способы выявления охоты)

**Настройка:**
Меню «Опции» | «Осеменение и техники» (Breeding and Technicians)

**Параметры схемы:**
- До 8 схем в таблице
- Буквенное обозначение
- Краткое описание (до 14 знаков)
- Буква указывается при внесении события BRED
- Отображается на странице 1 карточки коровы

### BREDSUM по количеству осеменений

**Содержание:**
Процент плодотворного (conception rates) по номеру осеменения

```
Number %Preg #Preg #OPEN Other Total PctTot SPC
============== ===== ===== ===== ===== ===== ====== ====
 1 55 31 25 22 78 71 1.8
 2 60 12 8 2 22 20 1.6
 3 50 2 2 3 7 6 2.0
 4 0 0 1 1 2 1
============== ===== ===== ===== ===== ===== ====== ====
TOTALS 55 45 36 28 109 100 1.8
```

**Интерпретация:**
- 1-е осеменение: 55% результативность
- 2-е осеменение: 60% результативность
- 3-е осеменение: 50% результативность
- Общая результативность: 55%, SPC 1.8

### BREDSUM Сводный график

**Назначение:**
Отслеживание эффективности осеменений за определенный период (для небольших стад)

**Ограничения:**
- Отчет ограничен одной страницей
- Период зависит от размера стада
- Можно выбрать интервал дат ключом \D

**Столбцы отчета:**
- Дата осеменения
- ID животного
- Код быка (NAAB)
- Количество осеменений
- Номер техника

**График:**
- Центральная линия - точка отсчета
- Успешное осеменение - сдвиг вправо
- Нерезультативное - сдвиг влево
- Динамика результативности во времени

**Коды результатов:**
- **A** - стельность наступила, но позже прервалась (abort)
- **P** - стельность наступила (pregnant)
- **O** - стельность не наступила (open)
- **E** - стельность наступила, даты охоты точно не определены (estimated)
- **R** - повторное осеменение в течение 5 дней (repeat)
- **C** - осеменение уже стельного животного (conceived)

```
Breeding Efficiency : Abort, Preg, Open, Repeat, Estimated, Conceived
Date Cow Sire Used # T------------ ---------
0++++++++++++++++++++++
4/13 72 7H13232 3 P
4/19 13 14H1151 2 2 P
4/19 10 14H6521 2 O
4/21 44 14H8801 2 P
...
Efficiency Rate = 53
```

### BREDSUM Выявление охоты

**Назначение:**
Отслеживание динамики успешности выявления охоты (для небольших стад)

**Столбцы отчета:**
- Дата охоты
- ID животного
- Номер лактации
- Дни в доении (или возраст в месяцах для нетелей)

**График выявления охоты:**
- Центр - точка отсчета
- Охота выявлена / охота пропущена при течке - сдвиг вправо
- Охота не выявлена - сдвиг влево
- Визуальная динамика успешности

**Определение пропущенных охот:**
- Анализ событий (охота, осеменение, отел)
- Расчет предполагаемой даты (21 день до/после известного события)
- Возможность внесения события пропущенной охоты (в EVENTS)
- Использование пунктов: дата пропущенной охоты, дни с пропущенной охоты

**Коды результатов охоты:**
- **A** - стельность наступила, но позже прервалась
- **C** - признаки охоты несмотря на стельность
- **O** - стельность не наступила
- **P** - стельность наступила
- **E** - стельность наступила, даты точно не определены
- **H** - охота выявлена, но осеменение не произведено (heat detected)
- **B** - охота выявлена, осеменение произведено, результат неизвестен (bred)
- **I** - охота стимулирована простагландином (induced)
- **M** - предполагаемая пропущенная охота (missed)

### BREDSUM анализ интервалов

**Назначение:**
Анализ периодов охоты между осеменениями с определением % плодотворного

**Подходит для:**
Более крупных ферм с большим количеством животных

**Содержание отчета:**

```
 Heat Interval %Preg #Preg #Open Other Total PctTot SPC
============== ===== ===== ===== ===== ===== ====== ====
 0 - 3 days 50 23 23 18 64 57 2.0
 4 - 17 days 75 3 1 2 6 5 1.3
 18 - 24 days 70 7 3 1 11 9 1.4
 25 - 35 days 42 3 4 0 7 6 2.3
 36 - 48 days 85 6 1 2 9 8 1.1
 Over 48 days 50 5 5 5 15 13 2.0
============== ===== ===== ===== ===== ===== ====== ====
 TOTALS 55 47 37 28 112 100 1.7

Average days to first heat is 52
Average days to first bred is 69
Average days to conception is 86
Average calving interval is 402
```

**Дополнительные показатели:**
- Среднее количество дней до первой охоты
- Дней до первого осеменения
- Дней до оплодотворения
- Средний период между отелами

### BREDSUM анализ эффективности простагландина

**Требование:**
Все инъекции должны быть занесены в базу как события

**Процесс:**
1. Программа открывает список событий
2. Запрашивает событие для простагландина
3. Выводит данные по интервалам между инъекциями
4. Показывает проценты плодотворных осеменений

**Настройка события:**
Событие PROST должно быть определено в меню «Опции» | Пользовательские события (User-defined Events)

**Важно:**
- Вести отдельные записи для стимуляции охоты
- Отдельно от терапевтического использования
- Вводить событие PROST, а не комментарий к другому событию

**Можно использовать любое событие для анализа**
(временные интервалы не меняются)

**Пример отчета:**

```
Analysis of LUTA1 Effect on Reproduction from 2/19/01 to 2/19/02
Cows Examined                          3635
Cows Treated                            466
Percent treated                          12
Total treatments                        663
Treatments per treated cow              1.4    Exp. #
Average DIM at treatment                 62    1
Percent bred within 10 days of treatment 45    2
Treatment to next service (all cows)     10    3
Treatment to next service (<10 days)      4    4
Treatment to next service (>10 days)     20    5
Treatment to concept intrvl              52    6
% Preg to these breedings                42    7
% Preg to other breedings                37    8
```

**Пояснение показателей:**

| № | Показатель |
|---|------------|
| 1 | Средние дни в доении (DIM) на момент события |
| 2 | Процент осемененных в течение 10 дней после события |
| 3 | Средний срок от события до осеменения для всех коров |
| 4 | Средний срок от события до осеменения (≤10 дней) |
| 5 | Средний срок от события до осеменения (>10 дней) |
| 6 | Средний срок от события до оплодотворения для стельных коров |
| 7 | Процент стельности среди коров, осемененных ≤10 дней после события |
| 8 | Процент стельности среди коров, осемененных >10 дней после события |

### BREDSUM по дням недели

**Назначение:**
Сортировка осеменений по дням недели

**Использование:**
Анализ зависимости результативности от дня недели

### BREDSUM по календарному месяцу

**Назначение:**
Сортировка осеменений по месяцам

**Использование:**
Сезонный анализ результативности

### BREDSUM по номеру цикла

**Назначение:**
Сортировка по номеру цикла (сгруппированы по дням в доении)

**Использование:**
Анализ влияния стадии лактации на результативность

### BREDSUM Отчет по PregRate и Heat Detection

**Столбцы отчета:**

| Столбец | Описание |
|---------|----------|
| Date | Начальная дата каждого 21-дневного периода |
| Ht. Eligible | Количество животных, у которых может быть выявлена охота (предположим, VWP=50 дней) |
| Heat | Количество коров с выявленной охотой |
| Pct | Процент коров с выявленной охотой / ожидаемых |
| Preg | Количество коров, ставших стельными |
| Pct | Процент коров, ставших стельными / ожидаемых |
| 25%, 50%, 75%, 100% | Горизонтальные гистограммы: H - выявление охоты, P - pregnancy rate |

**Пример отчета:**

```
 Date Ht Elig Heat Pct Pg Elig Preg Pct 25 50 75 100
======== ====== ==== === ===== ==== === % % % %
11/07/01 312 190 61 309 56 18 P H
11/28/01 221 136 62 217 41 19 P H
12/19/01 216 123 57 213 53 25 P H
...
10/09/02 258 180 70 0 0 0 Undet Preg Stat
10/30/02 210 169 80 0 0 0 Undet Preg Stat
--------------- ---- --- ------- ---- --- ----
Total 3637 2260 62 3593 716 20 P H
```

**Суммарные показатели:**
- Годовые или за указанный период (с ключом \D)
- Heat Detection: данные со вчера
- Pregnancy Rate: пропускаются два последних цикла (42 дня)

**Conception Rate:**
Не указан напрямую, но можно рассчитать приблизительно:
- Conception Rate ≈ Pregnant / Bred
- Точность зависит от полноты данных

**Проблемы точности:**
- Неизвестные результаты осеменений влияют на показатель выявления охоты
- Невозможно определить пропущенную охоту в течение 21 дня после осеменения с неизвестным результатом
- Обычно проблемы касаются двух последних 21-дневных периодов

---

### Графики и диаграммы

### Команда GRAPH - Графики рассеяния

**Назначение:**
Графическое отображение показателей стада, построение графиков зависимости одного пункта от другого

**Отличие от PLOT:**
- GRAPH - работает с любыми числовыми значениями
- PLOT - используется только для диаграмм показателей контрольных доек

### Синтаксис GRAPH

| Параметр | Значение |
|----------|----------|
| Команда | GRAPH |
| Список пунктов | Один или два пункта |
| Условие FOR | Разрешено |
| Условие BY | До двух условий |

### Таблица ключей GRAPH

| Ключ | Описание |
|------|----------|
| A | Средние значения |
| En | Выводить каждую n-ную корову |
| H | Гистограмма (по умолчанию, если нет условия "BY") |
| I | Заболеваемость (Риски) |
| M | Выровнять пределы осей X и Y |
| Pn | Страница n для EXAM (по клику на значение) |
| R | Регрессия |
| S | График оценки функции выживаемости |
| T | Вытянутый вид (только для DOS) |
| X | Запрос оси X |
| Y | Запрос оси Y |
| Z | Включать нулевые значения |

**Гистограмма (режим по умолчанию):**
При отсутствии условия BY GRAPH создает «гистограмму» (распределение частот пункта)

**Параметры:**
- Один пункт (например, DOPN или MILK)
- Количество животных с каждым значением
- Альтернативно: использовать ключ \H

**Примеры:**
- `GRAPH DOPN` - гистограмма дней открытости
- `GRAPH MILK` - распределение надоев
- `GRAPH MILK BY DIM` - зависимость надоев от дней в доении

---

## ЧАСТЬ 7: Страницы 61-70

### Примеры команды GRAPH

#### Пример 1: GRAPH DOPN FOR DCC>0

**Назначение:**
Создает гистограмму дней открытости (DOPN) для всех стельных коров

**Формат:**
- Значения DOPN перечислены внизу (ось X)
- Число коров с соответствующими значениями слева (ось Y)

**Интерпретация:**
Визуальное распределение частот дней открытости среди стельных коров

#### Пример 2: GRAPH MILK BY TDDIM FOR LACT>1

**Назначение:**
Создает рассеянный график (scatter plot) количества молока по дням в доении на дату контрольной дойки

**Параметры:**
- Ось X: TDDIM (дни в доении на дату контрольной дойки)
- Ось Y: MILK (надой)
- Фильтр: только коровы второй лактации и старше (LACT>1)

**Функция увеличения:**

**Метод 1: Кнопка "увеличительное стекло"**
- Позволяет приблизить определенный участок графика
- Пример: рассмотреть недавно отелившихся коров (<100 DIM, <55 фунтов молока)

**Метод 2: Выделение мышью**
- Нажать левую кнопку мыши
- Тянуть вниз и вправо
- Отпустить кнопку
- Появится увеличенная часть графика

#### Пример 3: GRAPH MILK BY TDDIM LACT FOR DIM<100

**Особенность:**
Каждая лактация выделена своим цветом для лучшей наглядности

**Фильтр:**
Только коровы менее 100 дней в доении

**Использование:**
Визуальное сравнение продуктивности по номерам лактации в ранней стадии лактации

---

### Команда PLOT - Лактационные кривые

**Описание:**
PLOT используется для графического отображения информации контрольных доек для отдельных животных или групп

**Основные возможности:**
- График надоя в контрольные дойки
- Можно использовать два пункта на одном графике
- Можно сравнивать две группы на одном графике

**Базовый пример:**
- `PLOT MILK` - создает график надоя в контрольные дойки
- `PLOT MILK PCTF` - включает в график значения PCTF (процент жирности)
- Программа запросит ID животных, если не заданы условия

### Таблицы PLOT

**PLOT\Z:**
Вместо графика составит таблицу с числовыми значениями

### Синтаксис PLOT

| Параметр | Значение |
|----------|----------|
| Команда | PLOT |
| Список пунктов | 1 или 2 пункта контрольной дойки |
| Условие FOR | Разрешено |
| Условие BY | Печатает графики последовательно |
| Условие WITH | Печатает две группы коров на одном графике |

### Таблица ключей PLOT

| Ключ | Описание |
|------|----------|
| B | Пустое место между группами BY |
| D | Запрос дат для \R |
| E | Конечная дата |
| G | Графический режим (только для DOS) |
| L | Брать данные из архивных файлов |
| M | Установить масштаб |
| R | Отображать даты на нижней оси |
| T | Вытянутый вид (только для DOS) |
| W | Таблица SCC |
| Z | Не рисовать график, только таблица значений |

### Использование PLOT

**График для группы:**
```
PLOT MILK FOR LACT=1
```
Построит график для всех первотелок

**Расширенный график (сравнение групп):**
```
PLOT MILK FOR LACT=1 WITH LACT>1
```
Добавит на график еще одну кривую с информацией по взрослым коровам

**График для всех животных:**
```
PLOT MILK FOR ID>0
```
или
```
PLOT MILK FOR TDAT>0
```

### Группировка данных

**По умолчанию:**
Информация группируется по номеру контрольных доек (1-й тест, 2-й тест, 3-й тест и т.д.)

**С ключом \R:**
- Группировка по датам контрольных доек
- До 13 последних тестов
- Объединяет всех коров, тестированных в конкретном месяце
- Позволяет отследить изменения в стаде между контрольными дойками

**Важное замечание:**
В настоящее время используется только информация по коровам в доении на текущий момент. Информация завершенных лактаций не используется.

### PLOT\Z - Таблицы данных

**Назначение:**
Вместо графика составит таблицу с исходными данными, по которым строится график

**Использование:**
Обычно используются консультантами для детального анализа

### PLOT "BY" - Множественные графики

**Синтаксис:**
```
PLOT FCM BY LACT
```

**Результат:**
Построит несколько графиков: по одному для каждой лактационной группы

### Настройка масштаба (\M)

**Функциональность:**
Задать масштабную линейку каждого пункта с помощью ключа \M

**Параметры:**
- Начальное значение
- Интервал для каждого пункта

**Примеры настройки:**
- Надой на вертикальной оси: от 30 до 110 с шагом 5
- Шаг для PCTF: 0.5 или 0.3 процента

**Важно для PCTF, PCTS, LGSCC:**
Значения вводятся без точки:
- Интервал от 3.0% до 4.0% вводится как от 30 до 40

**Количество делений:**
- Обычные графики: 16 делений на оси
- Вытянутый вид (ключ \T): 32 деления

### Пункты для использования в PLOT

Доступные пункты:
- **MILK** - надой
- **PCTF** - процент жирности
- **PCTS** - процент белка
- **FCM** - жиро-корректированное молоко
- **305ME** - зрелый эквивалент 305 дней
- **RELV** - относительная ценность
- **SCC** - количество соматических клеток
- **LGSCC** - логарифм SCC

### Примеры PLOT

#### PLOT MILK
График надоя контрольных доек. Программа запросит ID животных (условие не задано).

#### PLOT MILK PCTF
График надоя и процента жирности

#### PLOT FCM FOR LACT=1 DIM>100
График FCM для всех первотелок более 100 дней в доении

#### PLOT LGSCC FOR PEN=1 WITH PEN<>1
Графики SCC двух групп:
- График «х» для коров в секции 1
- График «о» для всех остальных

#### PLOT PCTF FOR 124 WITH ID<>124
График коровы 124 в сравнении с результатами всего стада

#### PLOT FCM FOR TDAT>0 \R
Объединит данные по 13 последним контрольным дойкам:
- Каждый тест - отдельное значение на графике
- Не лактационная кривая, а средние значения по контрольным дойкам

#### PLOT MILK BY LACT
График общих надоев контрольных доек по номерам лактации

#### PLOT MILK FOR LACT>0 BY MOFSH \Z
Таблица продолжительности лактации средних надоев контрольных доек, отсортированных по месяцам отела (без графика)

### Примечания PLOT

**GPLOT:**
Выполняет те же функции, что и PLOT

**Эквивалентность:**
- PLOT = GPLOT = PLOT\G

---

### PLOT - События

**Новая функция:**
Отображение на графике частотности событий

**Принцип работы:**
Команда EVENTS составляет таблицу событий по:
- Календарным месяцам
- Дням в доении

Эти данные можно вывести на график

#### Пример: PLOT BRED

**Процесс:**
1. Программа просматривает команды
2. Находит BRED
3. Видит, что она использует EC=5
4. Строит график по событию номер 5

**Важно:**
Если BRED нет в командах, график не будет построен

**Альтернативный вариант:**
`PLOT EC=5` - тот же результат

**Сортировка BY DIM:**
`PLOT BRED BY DIM` - график отсортированный не по дате, а по дням в доении

**Ключ \R:**
При добавлении `\R` программа проанализирует комментарии события:
- Для BRED: результат осеменения
- Для других событий: первая буква комментария

### Описание ключей для PLOT событий

| Ключ | Описание |
|------|----------|
| \D | Выбор интервала дат - начальная и конечная даты |
| \D30 | Выберет последние 30 дней |
| \R | Анализ комментария (результат BRED, для остальных - первая буква) |
| \W | Выбор ширины столбца (по умолчанию 1 неделя) |
| \Y | Анализ молодняка |

**Сортировка BY:**
Можно изменять сортировку по выбору:
- По дням в доении
- По возрасту
- По номеру лактации
- И т.д.

**Экраны выбора:**
- `PLOT EC` - откроет экран выбора событий и других деталей отчета
- `PLOT` - откроет выбор для графиков продуктивности

### Примеры PLOT событий

#### PLOT BRED BY DIM\R
График осеменений, отсортированный по дням в доении, с анализом результатов осеменения

Визуализация:
- Разноцветные столбцы показывают результаты (P, O, R, etc.)
- Ось X: дата или DIM
- Ось Y: количество событий
- Легенда показывает коды результатов

#### PLOT MAST\W30
График маститов с шириной столбца 30 дней

Визуализация:
- Верхний график: распределение по DIM с разбивкой по результатам
- Нижний график: распределение по датам
- Цветовое кодирование различных результатов/типов мастита

---

### EPLOT - Измерения

**Описание:**
EPLOT анализирует комментарии к событиям (вес, рост, упитанность) и выводит их на график

**Условия:**
- FOR - разрешено
- BY - не используется

### Таблица ключей EPLOT

| Ключ | Описание |
|------|----------|
| \C | Баллы физического состояния (BCS - Body Condition Score) |
| \W | Вес |
| \H | Рост |
| \A | Показать вес как ADG - средний дневной привес (\A подразумевает \W) |
| \M | Определить события, шкалы, описания пунктов и т.д. |
| \S | Сохранить OADG (общий привес) и IADG (шаговый привес) |

**При отсутствии ключей:**
Если не указаны ключи \C, \H, \A или \W, программа запросит событие для анализа

### Настройка событий

**Номера событий:**
Указываются в заголовке. Если не определены, EPLOT запросит, какое событие использовать.

**Ось X:**
Нельзя изменять. Задана в программе:
- **DIM** для баллов физического состояния (DCS)
- **AGE** для роста и веса

### Пример графика SCORE (баллы физического состояния)

**Данные в событии SCORE:**
```
1/15/00 FRESH
1/20/00 PENINJ
2/ 1/00 SCORE    2.5
2/ 2/00 OK
3/25/00 SCORE    2.75
3/29/00 BRED     7H6388    P 1
5/16/00 BULLPEN
6/ 1/00 SCORE    3.0
6/ 7/00 PREG     70 DAYS
9/ 1/00 SCORE    3.5
9/13/00 OK       168 DAYS
```

**График:**
EPLOT построит график изменения баллов упитанности по дням в доении

### Пример графика веса

**Данные:**
Таблица слева показывает:
- Date (дата)
- Age (возраст)
- Wt. (вес)

**График:**
- Ось X: возраст в месяцах
- Ось Y: вес (в фунтах)
- Точки показывают измерения веса
- Визуализация динамики роста животного

### Группа животных: EPLOT FOR {группа}

**Пример:**
График веса для всех животных в группе (например, 5 нетелей)

**Визуализация:**
- Каждое животное - своя линия/точки
- Сравнение роста в группе
- Выявление отстающих/опережающих животных

---

### Описание команд EPLOT

#### EPLOT
Запрашивает событие, затем ID

#### EPLOT \C
Считает баллы физического состояния, запрашивает ID животных

#### EPLOT \W
То же для веса

#### EPLOT \H
То же для роста

#### EPLOT\S
**Назначение:**
Сохраняет общий ADG и шаговый ADG в пункты

**Только для нетелей**

**Процесс:**
При запуске этой команды значения пунктов подсчитываются и сохраняются в выбранную запись

#### EPLOT FOR LACT=1 \C
**Результат:**
График для группы (сводный) всех первотелок

**Примечание:**
Ключ \C выводит показатели физического состояния. Обычно стоит добавлять \C, \H или \W в каждую команду, чтобы программа не выводила запрос

#### EPLOT FOR LACT=1 \CP
**Результат:**
Выводит коров, заданных в условии, по одной

**Навигация:**
- Нажмите [Esc] или пробел для перехода к следующему животному
- "Q" для выхода

### Важные замечания EPLOT

**Учет LACT:**
Программа не учитывает LACT, но предполагается:
- Балл упитанности (BCS) для взрослых коров
- Рост/вес для нетелей

**Требования для графика:**
- Если BDAT=0 - программа не сможет построить график роста/веса
- Если FDAT=0 - график BCS не может быть построен

**Формат ввода десятичных дробей:**
Точка в десятичной дроби необязательна:
- "42" и "4.2" программа воспримет одинаково

**Значения BSC:**
Распознаются в формате X.XX:
- "2" → 2.00
- "24" → 2.40
- "2.4" → 2.40
- "2.46" → 2.46

---

### Среднесуточный привес (ADG)

**Для корректной работы ключа \S необходимо задать следующие пункты:**

| Name | Type | Description |
|------|------|-------------|
| ADG | 22 | Среднесуточный привес. Опциональный, необходим для \S |
| AGDI | 22 | Среднесуточный привес от предыдущего до последнего WEIGHT. Опциональный |
| BWT | 1 | Вес при рождении. Опциональный. Можно задать значение по умолчанию (например, 100) |

**Настройка таблицы:**
Для настройки таблицы запустите `EPLOT\M`

**Расчет ADG:**
- **OADG** (Overall ADG) - общий среднесуточный привес от рождения
- **IADG** (Interval ADG) - шаговый привес между измерениями

**Применение:**
Используется для анализа темпов роста нетелей и оценки эффективности кормления молодняка

---

## ЧАСТЬ 8: Страницы 71-80

### Экспорт данных

### Команда FILEOUT - Сохранение данных в файл на диске

**Назначение:**
Экспортировать данные из Dairy Comp в файл на диске для дальнейшего использования в электронных таблицах, базах данных и т.д.

**Формат файла:**
Создает стандартный «неструктурированный» файл ASCII

**Форматы полей по умолчанию:**
- 5 знаков для двухбайтных значений
- 3 знака для однобайтных
- 8 знаков для дат
- Формат можно изменять с помощью ключей

**Применение:**
- **CSV формат** (с ключом \C): удобен для чтения напрямую электронными таблицами и базами данных
- **Формат по умолчанию**: для файлов, предназначенных для чтения базами данных Dairy Comp через FILEIN

### Синтаксис FILEOUT

| Параметр | Значение |
|----------|----------|
| Команда | FILEOUT |
| Список пунктов | Требуется |
| Условие FOR | Разрешено |
| Условие BY | Разрешено |

### Таблица ключей FILEOUT

| Ключ | Описание |
|------|----------|
| #d | Автоматически выбирает файл d:FILEOUT#.PRN, где "d" – имя диска, "#" – номер файла. ПЕРВЫМ в строке! |
| A | Добавить информацию в конец уже существующего файла (append) |
| B | Живые и павшие коровы (по умолчанию только живые) |
| C | Файл разделенных запятыми значений (CSV), с кавычками для дат и буквенно-числовых значений |
| D | Включить только павших коров |
| F | Начинать каждую строку с кода стада |
| H | Добавить заголовок с названиями пунктов |
| I | Записать данные в формате DII |
| J | Юлианские (числовые) даты |
| K | Запросить ID коров |
| L | Брать информацию из архивных файлов |
| N | Начинать каждую строку с порядкового номера |
| S | Без пробелов между пунктами |
| Y | Выводить ведущие нули в числовых пунктах |

**Автоматический режим:**
Для ежедневной выгрузки данных необходимо ставить сначала ключи номера файла и диска

**Пример:**
```
FILEOUT ID PEN MILK \1C
```
Создаст файл с именем `C:FILEOUT1.PRN`

**Для Palm Jfile:**
Ключи `\HC` часто используются вместе для создания файлов для приложения Palm Jfile

---

### Ввод информации

### Ввод информации - Обзор

**Основные возможности команды ENTER:**
- Ввод отдельных пунктов (например, `ENTER PEN` - поместить коров в секцию)
- Изменение названий коровников (`ENTER BNAME`)
- Ввод событий как BRED, FRESH, DRY и т.д. (варианты команды ENTER)

**Особые функции:**
- «Пункт равен пункту» для группы животных
- Условия для «пакетного» ввода информации
- Перевод или запуск в сухостой группы коров

### Команда ENTER

**Описание:**
Команда ENTER используется для внесения данных в записи о животных - важнейшая часть программы

**Процесс ввода данных - самое важное звено программы:**
Информация должна быть надежной (полной и достоверной)

**Точность ввода данных зависит от 3 факторов:**
1. **Легкость ввода** - минимум действий в логичном порядке
2. **Выявление ошибок** - автоматическая проверка
3. **Исправление ошибок** - простота корректировки

### Изменение секции

**Пример задачи:**
Перевести 8 коров из секции 3 в секцию 4

**Преимущества Dairy Comp:**
- Дата вводится один раз при загрузке (LOGON)
- Автоматически проставляется везде
- Снижает количество ошибок

**3 основных способа изменения номера секции (если дата не важна):**

1. `ENTER PEN FOR (ID коровы)` - для каждой коровы программа запросит номер секции

2. `ENTER PEN` - программа запросит ID и номер секции (подходит для перевода в разные секции)

3. `ENTER PEN=4` - программа запросит ID коров, переведенных в эту секцию

**Когда важно знать дату перевода:**
Используйте событие **MOVE (ПЕРЕВОД)**

1. `MOVE PEN=3` - запросит ID коров, изменит номер секции, занесет информацию с датой в события

2. `MOVE` - запросит ID и номер секции, занесет информацию в карточку коровы

3. `MOVE PEN=2 REM=FR01TO02` - запросит ID коров, внесет комментарий (переведена из секции 1)

### События в VENTER

**Некоторые события обычно вводятся с VENTER:**
- PREG (СТЕЛН)
- OPEN (ЯЛОВАЯ)
- OK (ГОТОС)
- ABORT (АБОРТ)

Добавляются для групп животных в процессе ветеринарного осмотра

### Запросы в событиях

**Функция запроса дополнительной информации (в меню «ОПЦИИ»):**

| Событие | Запрос |
|---------|--------|
| FRESH (ОТЕЛ) | Изменение номера секции |
| DNB (НЕОСЕМЕН) | REM (причина) |
| DIED (ПАЛА) | REM |
| DRY (СУХОСТ) | Изменение номера секции |

**Пример настройки:**
- Аббревиатура DRY: `EC=11 PEN`
- Изменится на: `EC=11 PEN=(номер секции)`

**Основные события (первые 18):**
Вносят много изменений в записи автоматически:
- При осеменении: добавляется число осеменений и бык последнего осеменения
- Функция заложена в первые 18 событий

### Ввод из меню

**Процесс:**
- Выберите событие из меню
- Введите ID коровы и дополнительную информацию
- Самый легкий способ ввода данных

**Настройка для пунктов:**
Можно создать элементы меню для команды ENTER со списком пунктов

**Пример:**
- Создать аббревиатуру: `CLASS = ENTER SCORE`
- Добавить CLASS как элемент меню для ввода баллов упитанности

### Ввод в командной строке

**События:**
Просто наберите название события в командной строке
- Программа запустит модуль события
- Запросит ID животных и дополнительную информацию

**Пункты:**
Наберите название пункта в командной строке
- Например: `SID` (равноценно `ENTER SID`)
- Программа последовательно запросит ID коров и значение пункта

### Ввод в карточке коровы

**Процесс:**
- Откройте карточку коровы
- Наберите название события или пункта на клавиатуре
- ID не требуется (программа знает текущее животное)

**Для ввода пункта:**
- Наберите название в открытой карточке
- Или дважды кликните на нужном пункте

**Замечание:**
Занимает больше времени (программа перезагружает карточку)
- Удобно для одного животного
- Для группы лучше использовать командную строку или меню

### Ввод пунктов

**Какие пункты можно вводить:**
Любые, кроме ID и рассчитываемых пунктов (DIM, DCC и т.д.)

**Внимание:**
- Преимущество гибкости = потенциальная опасность
- Бездумное изменение пунктов → путаница в записях
- Большинство изменений делается автоматически при вводе событий

**Часто вводимые пункты:**
- PEN
- SIR1

**Остальное использование:**
- Исправление ошибок
- Внесение изменений при необходимости

**Синтаксис:**
```
ENTER LACT              # Ввод номера лактации
ENTER LACT BNAME        # Ввод лактации и названия коровника
ENTER LACT=1            # Значение известно
ENTER LACT=2 FOR 123    # Для конкретной коровы
ENTER LACT=1 FOR EDAT=TODAY  # Для купленных сегодня
```

### Пример синтаксиса ввода пунктов (SIR1)

| Команда | Действие |
|---------|----------|
| `ENTER SIR1` | Запросит ID, затем SIR1, пока не нажмете [0] или [Escape] |
| `SIR1` | То же (ENTER предполагается) |
| `ENTER SIR1=7H123` | Запросит ID коров, значение SIR1 задано 7H123 для всех |
| `ENTER SIR1 FOR 642` | Открывает животное 642, запрашивает значение SIR1 |
| `ENTER SIR1 FOR PEN=2` | Автоматически выберет коров из секции 2, запросит SIR1 для каждой |
| `ENTER SIR1=7H123 FOR PEN=4` | Автоматически внесет "7H123" для всех коров в секции 4 |

### Приравнивание одного пункта к другому

**Назначение:**
Для специальной аналитики или сортировки

**Пример использования:**
Анализ мастита с использованием данных о соматике от DHIA

```
ENTER COD2=SCC                  # С запросом конкретных животных
ENTER COD2=SCC FOR ID>0         # Автоматически для всех коров
```

После получения новых результатов через RECEIVE:
```
LIST ID COD2 SCC FOR SCC>COD2   # Коровы с повышенным SCC
```

**Основное правило:**
Заменять «подобный» пункт «подобным»:
- Однобайтный → однобайтный
- Двухбайтный → двухбайтный
- Текстовые → текстовые с одинаковой длиной

### Ввод с сортировкой по пункту (ENTER BY ITEM)

**Возможность:**
Вводить данные, не зная ID животного

**Пример:**
```
ENTER USDA BY USDA FOR USDA="-"
```
Отберет коров с номером USDA и запросит этот пункт

### Ранжирование

**ENTER \N:**
Отсортировать животных и установить значения пункта в определенном порядке

**Пример:**
```
ENTER COD1=COD1 BY MILK \N
```
- Корова с наименьшим надоем: COD1 = 1
- Следующая: COD1 = 2
- И так далее

### Ввод событий

**Хранение в компьютере:**
События хранятся в виде кодов (EC)

**Пример:**
```
ENTER EC=1              # Код события FRESH (ОТЕЛ)
```

**Аббревиатуры команд:**
Сокращают процесс ввода:
- `EF` - вводит событие FRESH (ОТЕЛ)
- `EB` - вводит событие BRED (ОСЕМЕН)
- `EH` - вводит событие HEAT (ОХОТА)
- `ED` - вводит событие DRY (СУХОСТ)

### Структура события

**Форма аббревиатуры команды по умолчанию:**
```
EVENT = ENTER EC=x EDAY REM
```

**Пример для события MAST (номер 19):**
```
MAST = ENTER EC=19 EDAY REM
```

**Запросы:**
- **EDAY** в аббревиатуре → программа запросит дату события
- **REM** в аббревиатуре → программа запросит комментарий

**Настройка для крупных стад:**
Убрать EDAY из аббревиатуры (события вносятся в тот же день):
```
ENTER EC=19 REM
```

**Добавление дополнительных пунктов:**
```
ENTER EC=19 EDAY REM COST       # Запросит COST для каждого события
```

**Автоматическое изменение пунктов:**
```
DRY = ENTER EC=11 EDAY REM PEN=5    # Все коровы в сухостой → секция 5
```

**Ввод с условием FOR:**
```
FRESH FOR 33                     # Только для коровы 33
```

**Автоматическая нумерация телят:**
- После ввода номера первой телочки (500)
- Программа предложит следующий номер (501)

### ТАБЛИЦА ВВОДА СОБЫТИЙ

| Команда | Запрос | Описание |
|---------|--------|----------|
| FRESH | ID коров, информация о телятах | Внесет событие FRESH для всех указанных коров |
| FRESH PEN | ID коров, секция | То же + запрос номера секции |
| DRY PEN=5 | ID коров | Добавит событие DRY, изменит секцию на 5 |
| PREG FOR PEN=5 | Нет | Объявит всех коров в секции 5 стельными |

**ПРЕДЕЛЬНАЯ ВНИМАТЕЛЬНОСТЬ при использовании FOR:**
```
DIED FOR ID>0           # "УБЬЕТ" всех коров!
```

**Проблема:**
Компьютеры делают то, что вы ЗАДАЕТЕ, не обязательно то, что вы ХОТИТЕ

### Пакетный ввод пунктов и событий

**Использование FOR:**
Автоматический ввод для группы коров

**Примеры:**

```
ENTER PEN=2 FOR FCM<60 PEN=1 DIM>60
```
Переместит в секцию 2 коров из секции 1, которые в доении >60 дней и дают <60 фунтов FCM

```
MOVE PEN=2 REM=PROD FOR FCM<60 PEN=1 DIM<60
```
Одновременный ввод события и пунктов

```
DRY FOR DCC>210 RC=5
```
Переведет в сухостой всех коров с DCC>210

**Аббревиатура для условия:**
Если `FOR DCC>210 RC=5` сделать аббревиатурой MUSTDRY:
```
DRY MUSTDRY
```

**ВНИМАНИЕ:**
Пункты для SHOW и LIST нельзя использовать в аббревиатуре при вводе

**Пример неверного использования:**
```
COW2DRY = ID PEN DCC FOR DCC>210 RC=5
LIST COW2DRY            # Правильно - составит список
ENTER COW2DRY           # НЕВЕРНО - ID некорректный для пакетного ввода
```

---

### Изменение даты

### Изменение даты при вводе

**Два способа:**

1. **SETDAY** - изменяет текущую дату (риск забыть изменить обратно)

2. **EDAY** - только данные с этой командой будут отмечены указанной датой (безопаснее)

**Пример:**
```
FRESH EDAY=18.11.99
```
- Сегодня: 20/11/99
- Дата отела для указанных коров: 18 ноября
- Все остальные записи: 20 ноября

### SETDAY - Системная дата

**Назначение:**
Устанавливает текущую дату в Dairy Comp

**Первый запрос при запуске:**
Если дата не установлена ключами «*» и «#»

**Важность точности:**
Используется при расчете:
- DIM
- DCC
- DSLH (дни с последней охоты)
- И других пунктов

**Автоматическое присвоение:**
Всем вводимым событиям, если команда ввода не содержит запрос EDAY

**ВАЖНО:**
- Убедитесь в точности SETDAY!
- Не забудьте изменить обратно после ввода событий задним числом
- Измените на сегодняшнюю перед запуском отчетов

### Запрос даты события

**Все события используют EDAY:**
Если программа не запрашивает EDAY → используется текущая дата

**Настройка:**
- Всегда запрашивать EDAY
- Или никогда не запрашивать

**Крупные хозяйства:**
События вносятся в тот же день → постоянные запросы мешают

**Небольшие фермы:**
События за несколько дней/недель → удобнее запрос EDAY

**Проверка настройки:**
В аббревиатуре команды события (например, BRED - событие номер 5):
- `ENTER EC=5` - EDAY = сегодняшняя дата
- `ENTER EC=5 EDAY` - программа запросит EDAY

**Быстрые клавиши при запросе EDAY:**

Сегодня: 22/6/99

| Ввод | Результат |
|------|-----------|
| [Enter] | 22/6/99 (сегодняшняя дата) |
| 21/6 | 21/6/99 |
| 21 | 21/6/99 (если дата события ≤ сегодняшней) |

**EDAY по умолчанию:**
После первого ввода становится последняя введенная дата

**Пример:**
- Сегодня: 7/8/99
- Переводим коров в сухостой: 6/8/99
- Первый ввод: EDAY по умолчанию = 7/8/99
- После первого ввода: EDAY по умолчанию = 6/8/99

**Также работает в команде ADD (NEWC или NEWH)**

### Ввод комментариев

**REM (комментарий):**
Можно добавить к любому событию, кроме BRED

**Максимальная длина:**
8 символов

**Пример:**
```
ENTER RECK REM=C2U160PN FOR 38
```

**Расшифровка REM:**
Задаваемые пользователем аббревиатуры (любые 8 символов)

**Пример расшифровки C2U160PN:**
- C2 - шейка 2 дюйма
- U1 - рога матки 1 дюйм
- 60PN - кололи 60 мл пенициллина

**Отображение:**
```
11/6/99 RECK C2U160PN
```

**Событие BRED:**
В комментарии указывается бык осеменения, техник, племенное состояние - места для других примечаний не остается

### Пропуск пунктов EDAY и REM

**Ключ \R:**
При использовании ключа \R значения EDAY, EVT и REM не вносятся

**Примеры:**
```
MOVE \R
MAST \R
```

**Назначение:**
Удобно когда не хотите менять эти пункты при определенных событиях
- Например, чтобы EDAY и REM отображались в ветеринарном списке

---

### Описание событий

### Основные события

**В Dairy Comp 18 основных событий:**

1. **ABORT** (АБОРТ) - прерывание стельности
2. **BRED** (ОСЕМЕН) - осеменение
3. **BULLPEN** (БЫКГРУП) - группа с быком
4. **CALFVAC** (ТЕЛВАК) - вакцинация телят
5. **CHECK** (ПРОВЕРК) - проверка
6. **DIED** (ПАЛА) - падеж
7. **DNB** (НЕОСЕМЕН) - не осеменять
8. **DRY** (СУХОСТ) - запуск в сухостой
9. **FRESH** (ОТЕЛ) - отел
10. **HEAT** (ОХОТА) - охота
11. **MOVE** (ПЕРЕВОД) - перевод
12. **OK** (ГОТОС) - готова к осеменению
13. **OPEN** (ЯЛОВАЯ) - яловая
14. **PREG** (СТЕЛН) - стельная
15. **PREV** (СТЕЛНДО) - стельная до
16. **RECK** (ПЕРЕПРОВ) - перепроверка
17. **SOLD** (ПРОДАНА) - продажа
18. **XID** (СМЕНАИД) - смена ID

---

### Событие ABORT (АБОРТ)

**Описание:**
Прерывание стельности

**Логика по DCC:**

**Если DCC < 152 дней:**
- Продолжается текущая лактация
- Программа запросит репродуктивный статус:
  - RC = 2 (FRESH - нужно проверить еще раз)
  - RC = 3 (OK/OPEN - готова к осеменению)
  - RC = 4 (BRED)
- Если корова в секции с быком → RC автоматически = 4 (BRED)

**Если DCC ≥ 152 дней:**
- Начинается новая лактация
- Программа запрашивает информацию о телятах
- В большинстве случаев: телята не выживают → вводится «0»

### Изменения пунктов при событии ABORT

| Действие | Описание |
|----------|----------|
| EDAY | Запрос или текущая дата |
| Дата аборта | Запрос даты или дней после аборта |
| Результат осеменения | В последнем BRED меняется на "A" (abort) |
| Если DCC>152 | Запускается событие FRESH, запись заносится в архив |
| Если DCC ≤152 | RC меняется на 2, 3 или 4 по выбору; CDAT и SIRC = 0 |
| Секция с быком | RC меняется на 4 |

---

### Событие BRED (ОСЕМЕН)

**Описание:**
Состоявшееся осеменение

**Процесс:**
- Программа запросит ID быка (BULL)
- Если установлена стельность → запрос выйти или продолжать
- При продолжении: VC (вет код) меняется на 7 (ABT?)

**Меню выбора быка:**
```
<0> только охота
<1> 1st Sire choice
<2> 2nd Sire choice
<3> Last Sire 7H2212 on 5/21/99
<4> Bull
<5> Last Sire used today none
```

**Если таблица техников задана:**
- Выводится на экран
- Программа запрашивает номер техника
- По умолчанию: 0 или "Последний указанный техник"

**Если таблица схем осеменения задана:**
Программа запросит код схемы осеменения

**Разделение пайет семени:**
`\S` - используется для разделения пайет в реестре генетического материала

### Изменение пунктов при событии BRED

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |
| RC | Если RC = 2 или 3 (FRESH или OK/OPEN) → RC = 4 (BRED) |
| LSIR | ID быка осеменения |
| HDAT | Значение EDAY |
| HINT | Интервал между охотами: <3 дней → повторное осеменение; иначе TBRD +1 |
| Предыдущее осеменение | Результат меняется на O (ЯЛОВАЯ) |
| Если RC = 5 или 6 | (PREG или DRY) → вет код меняется на 7 (ABT?) |

### Исправление ошибок в событии BRED

**Методы:**
- Изменить значения пунктов на верные или 0
- Изменить или удалить событие кликом правой кнопкой мыши

### Примечания к событию BRED

**Одновременно вносится информация:**
- О быке
- О технике
- О схеме осеменения

**Запросы:**
Номер техника и код схемы запрашиваются только если соответствующие таблицы заданы в меню «Опции»

**Результат осеменения:**
Определяется исходя из последующих событий

---

## ЧАСТЬ 9: Страницы 81-90

### Результаты осеменения в событии BRED

**Пример динамики статусов:**

```
2/11/99 BRED 11H581 1
```

Если следует осеменение, результат первого осеменения изменится на «О» (open):
```
2/11/99 BRED 11H581 O 1
21/11/99 BRED 11H391 2
```

Статус второго осеменения остается пустым. При определении стельности → «Р»:
```
2/11/99 BRED 11H581 P 1
21/11/99 BRED 11H391 P 2
01/03/00 PREG
```

**Другие коды результатов осеменения:**

| Код | Значение |
|-----|----------|
| R | Повторное осеменение (в течение двух дней после первого) |
| A | Аборт (прерывание стельности) |
| C | Оплодотворение при предыдущем осеменении (conceived) |
| E | Приблизительная дата осеменения (estimated - при естественном) |

**Определение стельности:**
- Программа устанавливает CDAT (дата стельности)
- Устанавливает SIRC (бык плодотворного осеменения)
- На странице 6 карточки появляются две дополнительные строки (?) для основных событий

---

### Событие BULLPEN (БЫКГРУП)

**Описание:**
Корову перевели в секцию с быком

**Программа запросит:**
Номер секции

**Если RC = 2 или 3 (FRESH или OK/OPEN):**
- HDAT (дата охоты) устанавливается
- BLDAT (дата с быком) устанавливается
- TBRD увеличивается на 1
- По сути, животное осеменяют (BRED) в этот день

**Если RC = 4 (BRED):**
- BLDAT устанавливается

**Автоматический запуск:**
`ENTER PEN` с номером секции с быком или `MOVE` в секцию с быком автоматически запустят событие BULLPEN

### Изменения пунктов при BULLPEN

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |
| HDAT | Если RC = 2 или 3 → значение EDAY |
| BLDAT | Значение EDAY |
| TBRD | Увеличивается на 1 |
| RC | Изменяется на 4 |
| BLDAT (если RC=4,5,6) | Присваивается EDAY |

### Исправление ошибок в BULLPEN

- Изменить значения пунктов согласно предыдущему коду RC
- Изменить или удалить событие правой кнопкой мыши

---

### Событие CALFVAC (ТЕЛВАК)

**Назначение:**
Ведение записей вакцинации против бруцеллеза

**Особенность:**
Последовательный ввод номеров USDA для телят

**Процесс:**
1. Задать номер вакцинации перед началом ввода
2. Последний введенный номер сохраняется
3. Присваивается по умолчанию следующему теленку
4. При упорядочивании по вакцинации: следующий номер USDA присвоится нажатием [Enter]
5. При другой сортировке: каждый номер нужно вводить вручную

### Изменения пунктов при CALFVAC

| Пункт | Действие |
|-------|----------|
| EDAY | По запросу или текущая дата |
| USDA | Запрашивается и сохраняется |

### Исправление ошибок в CALFVAC

- Ввести корректный номер: `ENTER USDA`
- Если пропущен номер: может потребоваться исправить большое количество номеров

---

### Событие CHECK (ПРОВЕРК)

**Назначение:**
Запрос на ветеринарный осмотр

**Использование:**
- Запрос собственника на осмотр животного
- В вет. списке появляется пометка VC = 1
- Обычно требует комментария

### Изменения пунктов при CHECK

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |
| VC | Вет. код изменяется на 1 |

### Исправление ошибок в CHECK

- Изменить вет. код на 0: `ENTER VC=0`
- Изменить или удалить событие правой кнопкой мыши

---

### Событие DIED (ПАЛА)

**Назначение:**
Внесение информации о смерти животного

**Эффект:**
Животное больше не отображается в списках и отчетах

**Комментарий:**
При необходимости можно добавить

### Изменения пунктов при DIED

| Пункт | Изменение |
|-------|-----------|
| Флажок | Помечается «выбывшая» |
| EDAY | По запросу или текущая дата |
| RC | Изменяется на 7 (SOLD/DIED) |
| STAT | Изменяется на 5 |
| CAR | Изменяется на 5 |
| ARDAT | Присваивается значение EDAY |

### Исправление ошибок в DIED

- Команда `RESTORE` или кнопка «Восстановить» в карточке коровы
- Если проведена CLEANUP: `GETCOW` для копирования из резервной копии
- Изменить значения пунктов на верные

---

### Событие DNB (НЕОСЕМЕН)

**Назначение:**
Статус «Не осеменять»

**Эффект:**
- Определяет животное на продажу
- Отправляет статус DNB в DHIA
- Убирает животное из репродуктивной статистики

**Снятие статуса:**
Если корова будет осеменена, станет стельной или сухостойной → информация передается в DHIA, статус DNB снимается

### Изменения пунктов при DNB

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу |
| RC | Изменяется на 1 (Не осеменять) |

### Исправление ошибок в DNB

- Изменить RC на верное значение
- Изменить или удалить событие правой кнопкой мыши

---

### Событие DRY (СУХОСТ)

**Назначение:**
Перевод коровы в сухостой

**Дополнительно:**
- Можно добавить комментарий
- Можно изменить номер секции

**Проверка:**
Если не определена стельность → программа предложит «выход без изменений» или «продолжить»

### Изменения пунктов при DRY

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |
| DDAT | Дата сухостоя = EDAY |
| RC | Изменяется на 6 (DRY) |
| STAT | Изменяется на 4 |

### Исправление ошибок в DRY

Изменить или удалить событие правой кнопкой мыши

---

### Событие FRESH (ОТЕЛ)

**Назначение:**
Внесение информации об отеле

**Запросы программы:**
- Количество телят
- Присвоенные ID
- Другие пункты, установленные в меню «ОПЦИИ» > Событие ОТЕЛ

**ID по умолчанию:**
Следующий по порядку за последним присвоенным ID номером

**Предупреждения при вводе:**

1. **Предупреждение:** Корова была в сухостое менее 30 дней

2. **Предупреждение:** DCC менее 270 или больше 295 дней на момент отела
   - Пользователь может изменить дату осеменения или быка → PREV (СТЕЛНДО)

### Исправление ошибок в FRESH

**При введении FRESH изменяется большой объем данных:**
- Сбрасываются данные контрольных доек
- Обрабатываются пункты таблицы отела
- Добавляется новая лактация
- Возможно добавление нового животного

**Рекомендуемый метод:**
1. В карточке коровы: «Редактировать» (Edit)
2. Выбрать: **Recover from Mistaken FRESH**
3. Восстановит статус «сухостой»
4. Удалит запись об отеле

**Альтернатива:**
Команда `GETCOW` - восстановит записи с последней процедуры CLEANUP

---

### Событие HEAT (ОХОТА)

**Назначение:**
Выявление охоты у животного

### Изменения пунктов при HEAT

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |
| HDAT | Дата охоты = EDAY |
| HINT | Интервал между охотами - определяется и присваивается |
| Флажок VC | Корова помечается вет. код 7 (ABT?), если стельная |

**Примечание:**
Если HEAT вносится для коровы с RC=4 (BRED), HDAT не меняется на дату события. HDAT, установленный при BRED, более важен.

### Исправление ошибок в HEAT

- Изменить или удалить событие правой кнопкой мыши
- Проверить вет. код и изменить его на 0

---

### Событие MOVE (ПЕРЕВОД)

**Назначение:**
Изменение номера секции

**Отличие от изменения пункта PEN:**
Событие MOVE отображается в карточке коровы

**При переводе в секцию с быком:**
Событие BULLPEN также появится в карточке коровы

### Изменения пунктов при MOVE

| Условие | Изменение |
|---------|-----------|
| EDAY | По запросу или текущая дата |
| Перевод в секцию с быком (RC=4 или 5) | BLDAT = EDAY |
| Перевод в секцию с быком (RC=2 или 3) | HDAT = EDAY; TBRD +1; RC = 4 (BRED) |

### Исправление ошибок в MOVE

- Ввести верный номер секции
- Изменить или удалить событие правой кнопкой мыши
- Если перевод в секцию с быком: задать заново TBRD, BLDAT, RC, HDAT

---

### Событие OK (ГОТОС)

**Назначение:**
Корова готова к осеменению

**Эффект:**
Изменяет репродуктивный статус с FRESH на OK/OPEN

**Использование:**
Обычно вносится вместе с ветеринарной информацией (VENTER)

### Изменения пунктов при OK

| Условие | Изменение |
|---------|-----------|
| EDAY | По запросу или текущая дата |
| Если VC=1 (CHECK) | RC остается прежним, VC → 0 |
| Если RC=2 (FRESH) | RC → 3 (OK/OPEN) |
| Если RC=5 (PREG) | Определяется DCCP (EDAY-CDAT) для подтверждения стельности; VC → 4 (REPREG) |
| VC | Изменяется на 0 |
| Остальные случаи | Коды не изменяются |

### Исправление ошибок в OK

Зависит от способа использования. Исправить вет.код и репродуктивный код на верные.

---

### Событие OPEN (ЯЛОВАЯ)

**Назначение:**
При проверке на стельность она не выявлена

**Использование:**
Обычно присваивается при внесении ветеринарной информации

**Если была стельная → яловая:**
Активируется событие ABORT. Программа запросит:
- Дату аборта или дни после аборта
- Присвоение нового репродуктивного кода

### Изменения пунктов при OPEN

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |
| RC | Изменяется на 3 (OK/OPEN) |
| Если в секции с быком | RC → BRED; HDAT → BLDAT |

### Исправление ошибок в OPEN

- Изменить или удалить событие правой кнопкой мыши
- Установить верное значение RC (BRED, OK)
- Если был ABORT: исправить как описано в событии ABORT

---

### Событие PREG (СТЕЛН)

**Назначение:**
Корова стала стельной

**Использование:**
Обычно вносится с VENTER

**Для естественного осеменения или поправок к дате:**
Используйте событие PREV (СТЕЛНДО)

### Изменения пунктов при PREG

| Пункт | Изменение |
|-------|-----------|
| SIRC | Бык плодотворного осеменения = LSIR (бык последнего осеменения) |
| CDAT | Дата стельности = HDAT (дата последнего осеменения) |
| VC | Изменяется на 0 (сбрасывается) |
| EDAY | По запросу или текущая дата |
| DCCP | Дни стельности на момент выявления = EDAY-CDAT |
| PODAT | Дата проверки на стельность = EDAY |
| Результат BRED | Последнего осеменения → P |
| RC (если 5 или 6) | Не меняется |
| RC (если 4) | Изменяется на 5 |
| RC (если 2 или 3) | Корову не осеменяли → предложение выбрать PREV (СТЕЛНДО) |

**Использование PREV:**
Для внесения верной информации о предыдущем осеменении:
- Дата осеменения или дни после осеменения
- Для коровы в секции с быком без записей об осеменении
- Вносится дата или дни стельности
- В карточке рядом с BRED появится пометка «Е» (estimated - приблизительная дата)

### Исправление ошибок в PREG

- Если неверная только дата: правая кнопка мыши
- Если выбрано не то животное или корова не стельная:
  - Изменить RC на предыдущий код
  - Сбросить SIRC, CDAT, PODAT, DCC

---

### Событие PREV (СТЕЛНДО)

**Назначение:**
Корова стала стельной от предыдущего осеменения

**Использование:**
- Внесение SIRC при определении стельности
- Программа выведет список дат осеменения
- Предложит выбрать верную
- Или определить невыявленную охоту по дням стельности

**Если стельность уже определена:**
Выйти или перейти к ABORT, затем внести PREV заново

### Изменения пунктов при PREV

| Пункт | Изменение |
|-------|-----------|
| RC | Изменяется на 5 |
| CDAT | Присваивается значение выбранной даты осеменения |
| TBRD | Изменяется соответственно выбранной дате |
| Результат выбранного BRED | Изменяется на P |
| Результаты последующих осеменений | Изменяются на "C" (conceived - оплодотворение при предыдущем) |

### Исправление ошибок в PREV

- Изменить или удалить событие правой кнопкой мыши
- Изменить коды результатов осеменения для всех последующих BRED

---

### Событие RECK (ПЕРЕПРОВ)

**Назначение:**
Запрос на повторный осмотр животного

**Эффект:**
Просто добавляется в карточку коровы

**Использование:**
- При внесении ветеринарной информации
- Пометка и комментарий появятся в следующем ветеринарном списке
- Не изменяет коды
- Запрашивает комментарий

### Изменения пунктов при RECK

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |

### Исправление ошибок в RECK

- Изменить или удалить событие правой кнопкой мыши
- При необходимости изменить EDAY и/или EVT

---

### Событие SOLD (ПРОДАНА)

**Назначение:**
Животное продано (согласно спецификациям DHIA)

**Запросы:**
- Код CAR
- Можно добавить комментарий

### Изменения пунктов при SOLD

| Пункт | Изменение |
|-------|-----------|
| Флажок | Помечается «выбывшая» |
| EDAY | По запросу или текущая дата |
| RC | Изменяется на 7 (SOLD/DIED) |
| STAT | Изменяется на 5 |
| CAR | Присваивается по запросу |
| ARDAT | Присваивается значение EDAY |

### Исправление ошибок в SOLD

- Команда `RESTORE` из карточки коровы
- Если проведена CLEANUP: `GETCOW` для восстановления из резервной копии
- Изменить значения пунктов на верные

---

### Событие XID (СМЕНАИД)

**Назначение:**
Изменение ID животного

**Процесс:**
- Программа запросит ID
- Проверит уникальность

**Ключ \X:**
`XID \X` - изменит ID, но не добавит событие в карточку коровы

### Изменения пунктов при XID

| Пункт | Изменение |
|-------|-----------|
| EDAY | По запросу или текущая дата |
| OLDID | Присваивается значение ID до изменения |

### Исправление ошибок в XID

- Внести событие заново со старым ID
- Изменить OLDID обратно на 0 (иначе неверный номер будет отправлен в DHIA)
- Можно использовать функцию «редактировать» в карточке для удаления события

---

### Добавление животных в базу данных

### Команда ADD

**Назначение:**
Внесение информации о новых животных в стаде

**Обычное использование:**
- Коровы добавляются автоматически при `DHI LOAD`
- Телочки заносятся при рождении
- ADD используется для:
  - Добавления новых телок
  - Внесения информации о приобретенных животных

### Команда ADD и события

**Возможность:**
ADD по возможности добавит события на основе введенной информации

**Информация о продуктивности:**
Можно добавить на страницах 4 и 5 карточки через «Редактировать»

**Настройка:**
Некоторые пользователи отключают запросы репродуктивных пунктов (HDAT, CDAT) для ввода позже вместе с данными по осеменению

**Для электронных данных:**
Используйте команду `FILEIN` для загрузки файла

---

### NEWC и NEWH

**Вместо ADD используются аббревиатуры:**

**NEWH (Новая нетель):**
```
ADD HEIFER CDAT SIRC TBRD
```

**HEIFER - аббревиатура для:**
```
ID BDAT REG USDA CBRD SID DID DREG
```

Основная информация для идентификации животного по стандартам DHIA + информация об осеменении (CDAT и SIRC) для корректного добавления нетели к дойному стаду после отела

**NEWC (Новая корова):**
```
ADD HEIFER NEWCOW
```

**NEWCOW - содержание:**
```
FDAT LACT HDAT LSIR CDAT SIRC TBRD DDAT PEN (и) RC STAT CAR PODAT
```

Те же пункты идентификации + дополнительные пункты для корректного добавления коровы к дойному стаду

---

### Добавление нетелей к стаду

**Проблема:**
Записи DHIA содержат информацию о дойных и сухостойных, но не по молодняку

**Решение:**
Вносить информацию по каждому животному вручную перед событием FRESH

**Команда:**
`NEWH` - программа запросит информацию по пунктам

### Список пунктов для нетелей

| Пункт | Описание |
|-------|----------|
| ID | Идентификационный номер |
| BDAT | Дата рождения |
| REG | Регистрационный номер |
| USDA | Номер USDA |
| CBRD | Порода |
| SID | ID производителя |
| DID | ID матери |
| DREG | Регистрационный номер матери |
| CDAT | Дата стельности |
| SIRC | Бык плодотворного осеменения |
| TBRD | Количество осеменений |

### Работа с неизвестной информацией

| Пункт | Если неизвестно |
|-------|-----------------|
| ID | Точно известен, не может совпадать с другой коровой |
| BDAT | Внести приблизительную |
| REG | Если зарегистрировано → #; если нет → пустым |
| USDA | Номер вакцинации или DHIA. Нужен для официальных тестов (если не зарегистрирована) |
| CBRD | H для Голштинской или другая по стандартам DHIA |
| SID | ID быка или пустым |
| DID | Номер или пустым |
| DREG | Рег. номер матери (чистопородное), USDA матери (скрещенное), или пустым |
| CDAT | Посчитать приблизительно (9 месяцев от даты отела) |
| SIRC | ID быка или пустым |
| TBRD | Нужно ввести (не абсолютно необходимо, отправится в DHIA после отела) |

**После ввода:**
- Пункты выводятся на экран для проверки
- Можно изменить любой пункт (ввести номер в списке и задать новое значение)
- После нажатия Y на «Все ли верно?» → информация добавляется в БД
- Программа проверяет ошибки связи дат, кодов, быков
- Выводит предупреждения (CDAT раньше BDAT, CDAT отсутствует при известном SIRC и т.д.)

**Важно:**
Информацию нужно внести до отела. В таком случае FRESH будет первым событием в карточке и все коды будут заданы верно (LACT=1, STAT=2, RPRO=FRESH и т.д.)

**Новорожденные телочки:**
Автоматически заносятся с корректной информацией о родителях

**Отдельная база по молодняку:**
- Перенести данные телки (PUTCOW)
- Перенести обратно ко взрослым при отеле (GETCOW)

---

## Part 10: Страницы 91-100

### Добавление коров (NEWC) - дополнительные пункты

**Отличие от телок:**
Корова = животное с минимум одним отелом

**Команда:** `NEWC`

**Дополнительные пункты для коров:**

| Пункт | Описание | Правила внесения |
|-------|----------|------------------|
| FDAT | Дата отела текущей лактации | Если в сухостое → последний отел. Если неизвестна → примерная |
| LACT | Номер лактации | Если неизвестен → примерный |
| HDAT | Дата охоты/последнего осеменения | Необязательно, если стельная. Пустым, если не было |
| LSIR | Бык последнего осеменения | <Enter> если не было. Пустым, если неизвестен. Необязательно для стельных |
| CDAT | Дата стельности | Вносится только для стельных. Часто совпадает с HDAT |
| SIRC | Бык плодотворного осеменения | Только для стельных. Если неизвестен → BULL |
| TBRD | Количество осеменений | Для всех осеменявшихся. Примерное если неизвестно. **Критично для стельных** - DHIA не примет без TBRD |
| DDAT | Дата сухостоя | Только для сухостойных. **НЕ ВНОСИТЬ** дату предыдущего сухостоя |
| PEN | Номер секции | Обязательно |
| RC | Репродуктивный код | По таблице кодов в приложении |
| STAT | Код статуса DHIA | По таблице статусов |
| CAR | Код CAR (DHIA) | По таблице. Обычно = 0 |
| PODAT | Дата проверки на стельность | Нужна для DHIA. Примерная если неизвестна. Пустым для яловых |

### Автоматические проверки программы

**При вводе CDAT (дата стельности):**
```
Сообщение: Дата стельности задана, Репродуктивный код должен быть изменен на 5
Установить RC=5 [*Y*/N]?
```

**При вводе DDAT (дата сухостоя):**
```
Сообщение: Задана дата сухостоя, Репродуктивный код должен быть изменен на 6
Установить RC=6 [*Y*/N]?
```

**При CDAT задана, SIRC=0:**
```
Сообщение: Дата стельности внесена, а бык плодотворного осеменения нет
Присвоить SIRC значение Bull [*Y*/N]?
```

**Автоматическая установка STAT:**
- Не сухостойная, LACT>1 → STAT=1
- Первая лактация → STAT=2
- Сухостойная → STAT=6

### Сообщения об ошибках ADD

**Валидация дат относительно BDAT:**
- Внимание! Дата отела раньше Даты рождения + 18 мес.
- Внимание! Дата охоты/осеменения раньше Даты рождения + 12 мес.
- Внимание! Дата стельности раньше Даты рождения + 12 мес.
- Внимание! Дата сухостоя раньше Даты рождения

**Валидация дат относительно FDAT:**
- Внимание! Дата охоты/осеменения раньше Даты отела
- Внимание! Дата стельности раньше Даты отела
- Внимание! Дата сухостоя раньше Даты отела

**Валидация последовательности событий:**
- Внимание! Дата сухостоя раньше Даты охоты/осеменения
- Внимание! Дата сухостоя раньше Даты стельности (CDAT)
- Внимание! Дата проверки на стельность (PODAT) раньше Даты стельности (CDAT)

**Валидация связанных пунктов:**
- Внимание! Бык плодотворного осеменения (SIRC) внесен. Необходимо внести Дату стельности (CDAT)
- Внимание! Дата стельности (CDAT) внесена. Необходимо внести дату проверки на стельность (PODAT)
- Внимание! Дата стельности (CDAT) задана. Количество осеменений (TBRD) не может быть 0
- Внимание! Бык последнего осеменения (LSIR) внесен. Количество осеменений (TBRD) не может быть 0

**Настройка списка пунктов:**
Можно изменить через меню "Опции" → "Аббревиатуры команд" → NEWC и NEWH

---

### Команда FILEIN - импорт файлов

**Назначение:**
Импорт данных из сторонних файлов (электронные таблицы, базы данных, информация о кормах и т.д.)

**Синтаксис:**
```
FILEIN <список_пунктов>
```

**Условия:**
- FOR: НЕ применимо
- BY: НЕ применимо

**Формат данных:**
Длина пунктов соответствует установкам программы (если не используются ключи P, S, C)

### Таблица ключей FILEIN

| Ключ | Описание |
|------|----------|
| A | Добавить корову в базу (по умолчанию, если файл пустой) |
| C | Файл CSV (разделенных запятыми значений) |
| H | Пропустить заголовок |
| I | Формат DII |
| J | Переводить числа в числовые значения (например, "42x" → "42") |
| L | Несколько строк на запись |
| N | Автоматически нумеровать коров при переносе в новую базу |
| O | Пропустить проверку на выбывших (записывать данные для выбывших коров) |
| P | Запрос расположения ячеек (номера столбцов) и их длины |
| Q | Режим без сообщений (по умолчанию, противоположно V) |
| R | Восстановить (запомнить) формат файла (сохраненный как FILEINxx.DEF) |
| S | Файл с разделением пробелами (не использовать расположение по умолчанию) |
| V | Режим отображения (показывает статус считывания), противоположно Q |
| Y | Импортировать даты в формате YYMMDD |
| Z | Оставить начальные нули в буквенно-числовых пунктах |

---

### Меню "Опции" - настройка базы данных

**Главное преимущество DairyComp:**
Возможность настройки под индивидуальные нужды фермы

**Важно:**
- Изменения применяются **только к текущей базе данных**
- Обязательно делать резервную копию перед изменениями
- "Несколько секунд сейчас избавят от часов досады позже"

**Отличие от меню "Установка":**
- "Опции" → настройки текущей базы
- "Установка" → оборудование и функции для всех баз

---

### Настройка пунктов (Опции → Пункты)

#### Очистить все пункты

**Использование:** Только в исключительных случаях
**Результат:** Удаляет все пункты после 89, остальные недоступны
**Активация:** Требуется ключ `\S` → `ALTER\S`
**Рекомендация:** Лучше не использовать

#### Добавить описание пункта

**Запрашиваемая информация:**
1. 5-значное название (уникальное)
2. Тип пункта (из списка)
3. Для рассчитываемых: два "оператора" (зависимости)
4. Описание пункта
5. Проверка и создание

**Навигация:**
- Пробел / стрелка вверх → список пунктов
- Выделить + Enter → выбор
- Набор текста → поиск в списке

**Важно:**
- Название должно быть уникальным
- Не превышать размеры столбца таблицы

#### Просмотреть/изменить пункт

**НИКОГДА не изменяйте пункты 1-89!**
- Используются программой для базовой информации (ID, даты отела и т.д.)
- Можно изменить только названия

**При изменении сохраненных пунктов (тип ≤33):**
Обнулить значения командой: `ENTER BDYWT=0 FOR ID>0`

**Процесс:**
1. Выбрать из списка (Enter или поиск)
2. Подтвердить изменение
3. Диалоговое окно (как при добавлении)
4. Сохранить → предложение изменить еще один

#### Показать/напечатать все пункты

**Вывод:**
Таблица с номерами, названиями, типами, операторами, описаниями

**Возможности:**
- Распечатать из обозревателя
- Сохранить в файл

**Рекомендация:**
Держать список под рукой для сверки/исправления ошибок

#### Показать описание типов

**Вывод:** Список типов пунктов и их применение
**Альтернатива:** Нажать `0` в поле типа пункта при создании/изменении

#### Переименовать пункт

**Возможности:**
- Изменить название и/или описание
- Переименовывать можно любые пункты (программа использует номера, не названия)

**Побочные эффекты:**
1. DairyComp предложит обновить аббревиатуры команд
2. Каждая команда с измененным пунктом выводится для редактирования
3. **НЕ МОЖЕТ** автоматически обновить:
   - Таблицу MONITOR
   - Карточки коровы
   - Таблицу отела

**При изменении номера пункта:**
Убедиться, что карточки, таблицы и аббревиатуры изменены соответствующим образом

#### Удалить пункт

**Результат:**
- Освобождает место в таблице пунктов
- Для сохраненных (тип ≤33): освобождает место в записях коровы

**Улучшение в новых версиях:**
Программа ищет первое подходящее место → до 20% дополнительного места в таблице

**Ограничение:**
Программа не позволит удалить пункты 1-89

#### Составить схему таблицы пунктов

**Назначение:**
- Для программистов и службы поддержки
- Устранение ошибок
- Манипуляции с таблицей

**Для пользователей:**
Просмотр заполненности таблицы пунктов

**При конфликте:**
Изменить или удалить один из проблемных пунктов (иначе внесение данных по одному затронет другой)

---

### Изменение команд (Опции → Команды)

#### Структура аббревиатуры команды

**Три части:**
1. **Аббревиатура** - например, "MYREPORT" или "BRED"
2. **Содержание** - полная команда, например "LIST ID RPRO PEN FOR LACT=1"
3. **Название** - выводится в отчетах вместо аббревиатуры (опционально)

**Ограничения:**
- До 255 аббревиатур
- Максимальная длина аббревиатуры: 7 символов
- Максимальная длина содержания: 63 символа
- До 50 названий

#### Опции меню

| Опция | Описание |
|-------|----------|
| Очистить все команды | Удалить все аббревиатуры (требует `ALTER\S`). Используется перед импортом |
| Добавить команду | Диалоговое окно для ввода аббревиатуры и содержания |
| Просмотреть/изменить команду | Выбор → редактирование аббревиатуры и содержания |
| Показать/напечатать все команды | Вывод всех аббревиатур с возможностью печати |
| Удалить команду | Выбор команды для удаления |
| Сохранить команды в файл | Экспорт в текстовый ASCII файл |
| Добавить команды из файла | Импорт из файла |

#### Работа с файлами команд

**Сохранить → редактирование → загрузка:**
1. "Сохранить" → создает текстовый ASCII файл
2. Редактирование в текстовом редакторе ("Блокнот")
3. Важно: команды и аббревиатуры начинаются в тех же столбцах
4. "Добавить" → загрузка обратно в программу

**При совпадении аббревиатур:**
Программа спросит, заменить или оставить

**Файл по умолчанию:**
- Имя: `COMMANDS.LST`
- Папка: папка программы

---

### Определение секций (Опции → Секции)

**Назначение:**
- Внести информацию о существующих секциях (пенах) на ферме
- Включая секцию сухостоя
- Определить секции с быком

**Диапазон:** Номер секции от 1 до 250

#### Секция с быком (BULLPEN)

**Важность:**
При переводе коровы в секцию с быком:
- Автоматически добавляется событие BULLPEN
- Отмечается предполагаемая дата осеменения
- Используется для отбора животных на ветеринарный осмотр

#### Опции меню секций

**1. Указать используемую секцию:**
- Ввод номера секции (1-250)
- Программа уточняет: секция с быком или нет
- При ENTER PEN для секции с быком → автоматическое событие BULLPEN

**2. Удалить секцию:**
Удаление из списка используемых

**3. Показать секции/секции с быком:**
Список всех существующих секций (печать/сохранение)

**Валидация:**
При внесении номера программа проверяет наличие в списке

---

### Определение параметров ветеринарных списков

**Таблица ветеринарных кодов (12 кодов):**

| VETC | YVET | Y/N | Value | Description |
|------|------|-----|-------|-------------|
| 1 | CHCK | Y | 0 | Запрос собственника на осмотр |
| 2 | FRSH | Y | 14 | Отел (__) дней/перепроверка |
| 3 | PREG | Y | 35 | (__) дней после осеменения проверить на стельность |
| 4 | REPG | N | 180 | (__) дней после осеменения (повторная проверка) |
| 5 | ODUE | Y | 300 | (__) дней стельности и не отелилась |
| 6 | ABT? | Y | 0 | Аборт??? |
| 7 | CYST | N | 10 | (__) дней между охотами—КИСТА??? |
| 8 | NOHT | N | 30 | (__) дней с последней охоты |
| 9 | NOHT | Y | 90 | (__) дней в доении и нет охоты |
| 10 | PROB | Y | 150 | (__) дней сервис-период—проблемное осеменение |
| 11 | XBRD | N | 3 | Осеменение более (_) раз |
| 12 | HFRS | N | 13 | (__) месяцев и нет охоты |

**Поля таблицы:**
- **VETC** - ветеринарный код (VC)
- **YVET** - причины добавления в список
- **Y/N** - активна функция или нет ("Y"=да, "N"=нет)
- **VALUE** - число дней до активации причины
- **DESCRIPTION** - краткое объяснение кода

#### Подробное описание кодов

**1. CHCK** - Запрос собственника
Животное добавлено в список по желанию владельца

**2. FRSH** - Проверка после отела
Значение 14 → животное с RC=Fresh добавляется на осмотр после 14 дней в доении

**3. PREG** - Проверка на стельность
Значение 35 → проверка через 35 дней после последнего осеменения (DSLH)

**4. REPG** - Повторная проверка на стельность
Используется на фермах с высоким уровнем абортов

**5. ODUE** - Задержка отела
Стельные более 300 дней → проверка (чтобы не "терять" коров в сухостое)

**6. ABT?** - Подозрение на аборт
Если стельную корову снова осеменяют → пометка для ветеринара (определить: стельная или аборт)

**7. CYST** - Подозрение на кисту
Повторное осеменение в течение 10 дней после предыдущего
**Исключение:** в течение 2 дней = та же охота (киста не подозревается)

**8. NOHT** - Пропущенные охоты (после осеменения)
Осемененные, не стельные, без повторного осеменения
Проверка через 35 дней → пропущено минимум 2 охоты

**9. NOHT** - Пропущенные охоты (в доении)
Слишком долго в доении без осеменения (обычно ~70 дней, в примере 90)

**10. PROB** - Проблемное осеменение
Сервис-период более 150 дней → регулярная проверка до наступления стельности

**11. XBRD** - Множественные осеменения
Более 3 осеменений до стельности

**12. HFRS** - Телки без охоты
Не осемененные телки возрастом XX месяцев
**Примечание:** Команда `HVLIST` для телок (FOR LACT=0), обычная `VLIST` для коров (FOR LACT>0)

**Пользовательские коды:**
11 кодов по умолчанию + 4 пользовательских (для добавления свяжитесь с поддержкой)

---

### Планировщик заданий (Опции → Задания)

**Команда:** `ALTER\6`

**Назначение:**
Автоматическое выполнение команд в определенную дату и время

**Типы заданий:**
- Однократные (дата + время)
- Периодические (интервал: часы/дни/месяцы)

**Основное применение:**
- Системы ежедневной регистрации надоев
- Автоматическая загрузка данных (ежедневно / после каждого доения)
- Ежедневные/еженедельные/ежемесячные/сезонные отчеты

#### Настройка задания

**Параметры:**
1. Дата и время выполнения
2. Интервал повторения (часы/дни/месяцы) - если периодическое
3. Команда (аббревиатура отчета, MSEND и т.д.)

**Выполнение:**
- DairyComp должна быть запущена в режиме ожидания
- Команда выполняется как из командной строки
- Время/дата заносятся в таблицу
- Для периодических → автоматическое планирование следующего выполнения

#### Требования

**1. Программа запущена:**
- Компьютер включен с активной программой
- Или включен до запланированного времени

**2. Точное время:**
Пуск → Настройки → Панель управления → Дата и время

**3. Для печати:**
- Включена возможность печати в настройках
- Принтер включен, есть бумага
- Можно добавить команды: `PON = SETUP\4E` (включить), `POF = SETUP\4D` (выключить)

#### Примеры использования

**1. Однократное задание:**
Ветеринарный список во вторник 7 декабря 2000г в 7:30
```
Дата: 12/7/00
Время: 730
Команда: VLIST!
```

**2. Периодическое (каждые 2 недели):**
Ветеринар каждые две недели
```
Интервал: 14 дней
```

**3. Несколько ежедневных отчетов:**
Создать аббревиатуру:
```
DAILY=HRDRPT!TODOLST!MILKSUM
```
Установить на завтра с интервалом 1 день

**4. Гибкие интервалы:**
- Еженедельно
- Ежемесячно
- Каждое 15 сентября
- Каждую весну/осень
- Каждое 31 декабря

**5. Автозагрузка данных о надоях:**
Доение: 00:00-6:30, 8:00-14:30, 16:00-22:30
```
Команда: MLOAD
Первое выполнение: 745 (7:45)
Интервал: 8 часов
```

**6. Запуск внешних программ:**
```
EXEC\Bxyz
```
Запустит командный файл `xyz.BAT`

**Примеры внешних программ:**
- Загрузка данных по надоям
- Связь с перерабатывающим заводом (суббота, параметры танка за неделю)
- Связь с BBS каждые полгода (информация о быках-производителях)

**7. Сложный пример с BAT-файлами:**

**a. Изменить запуск DairyComp:**
```batch
CD \DC
:RUNDC
START/W DCWIN C1*
if not exist DCEXIT.BAT go to done
CALL DCEXIT.BAT
DEL DCEXIT.BAT
GOTO: RUNDC
:DONE
```

**b. Создать файлы:**
```batch
# DCTEMP.BAT
CD\PROGRAM
PROGRAM
CD\DC

# RUN.BAT
COPY DCTEMP.BAT DCEXIT.BAT
```

**c. Планировщик:**
```
EXEC\BRUN!BYE
```
где `BYE = EXIT\I` (немедленный выход)

**Логика работы:**
1. Планировщик выполняет `EXEC\BRUN!BYE`
2. `RUN.BAT` копирует `DCTEMP.BAT` в `DCEXIT.BAT`
3. Программа закрывается без запроса (`EXIT\I`)
4. Выполняются программы из `DCEXIT.BAT`
5. DairyComp перезапускается
6. Продолжает работу с момента прерывания

**Важно:** Свяжитесь со службой поддержки перед использованием!

---

## Part 11: Страницы 101-110

### Опции - Протоколы (ALTER\7)

**Назначение:**
Структурный подход к лечению болезней и ведению записей

**Возможности:**
- До 31 протокола
- Быстрый выбор при вводе данных

#### Структура протокола

**Таблица протоколов:**

| ## | Protocol | Event | REMark | Prompt | Pen |
|----|----------|-------|--------|--------|-----|
| 1 | PENICILLIN 3DAY | MAST | PEN3X | TRUE | 4 |
| 2 | GENTOCIN | MAST | REDJUICE | FALSE | 4 |
| 3 | OXYTOCIN | MAST | REDJUICE | FALSE | 0 |
| 4 | CALDEX | MF | CALDEX | FALSE | 0 |
| 5 | FOOT TRIM | LAME | FOOTTRIM | TRUE | 0 |

**Поля:**
- **Protocol** - название (описательное, для ввода)
- **Event** - событие (заносится в карточку коровы)
- **REMark** - комментарий (по умолчанию)
- **Prompt** - запрос на изменение комментария (TRUE/FALSE)
- **Pen** - номер секции (0 = не переводить, >0 = автоперевод, обычно ветеринарная секция)

#### Ввод данных с протоколами

**Ключ \P в команде ENTER:**

```
ENTER EC\P EDAY PEN REM          # Все протоколы, сохраняет REM и PEN
ENTER EC=33\P EDAY PEN REM       # Только протоколы для события 33
ENTER EC=33\P EDAY PEN           # Не сохраняет REM
```

#### Дополнительные переменные

**4 дополнительных параметра для каждого протокола:**
- Срок выведения антибиотика из молока
- Срок выведения из мяса
- Число дней лечения
- Общая стоимость лечения

**Настройка:**
1. Создать соответствующие пункты в меню "Опции"
2. Запустить ALTER\7 для корректировки таблицы

**Список по умолчанию:**
Файл `PROTOCOL.LST` на веб-сайте

---

### Опции - Таблица быков

**Назначение:**
Хранение имен быков-производителей

**Возможности:**
- Валидация при вводе
- Более 2000 быков
- Автодобавление при первом вводе

#### Принцип работы

**При вводе имени быка:**
1. Проверка по списку
2. Если нет → запрос на корректность
3. При ответе "Y" → добавление в таблицу

**Важно:**
Связь с карточкой коровы через ссылку. Если бык удален → пустая строка в карточке. Если добавлен новый на то же место → его имя отобразится в карточке.

#### Опции меню

**Список быков:**
Просмотр всех быков в таблице

**Удалить быка из списка:**
- Запрос имени/номера
- Удаление из таблицы
- При ошибке: немедленно вернуться и ввести имя снова
- "Очистить" автоматически удаляет неиспользуемых

**Изменить имя быка:**
- Изменение NAAB или регистрационного номера
- Внимание: при совпадении с существующим → дублирование в списке/отчетах

**Очистить таблицу быков:**
- Убирает лишние нули в именах
- Удаляет дублирующиеся записи
- Удаляет неиспользуемых быков
- Рекомендуется периодически для крупных стад

---

### Опции - События

**Максимальное количество:** 64 события

#### Добавить событие

**Процесс:**
1. Список существующих событий
2. Название (до 7 символов)
3. Добавить в аббревиатуры команд? (Y/N)
4. Запрос даты события (EDAY)? (вкл/выкл)
5. Запрос комментария (REM)? (вкл/выкл)

#### Показать события

Детальный просмотр с возможностью печати/сохранения

#### Переименовать событие

**Доступно для:**
- Пользовательских событий
- Системных событий (только названия)

**Важно:**
- Название должно быть уникальным
- Не должно совпадать с названием пункта или аббревиатурой
- Пример: нельзя MOVE → PEN (так как PEN - пункт). Сначала переименовать пункт PEN (например, на LOT)
- Не забыть изменить аббревиатуру команды

#### Удалить событие

**Невозможно** удалить событие из таблицы - только переименовать

**Альтернатива:**
В команде EVENTS есть опции:
- Удалить событие из карточки коровы
- Привязать одно название к другому

---

### Опции - Карточки коров

#### Настройка страниц

**Возможности размещения пунктов:**
- Страница 1: до 16 пунктов
- Страницы 2, 3: до 64 пунктов каждая
- Страницы 4, 5, 6: до 8 пунктов каждая

**Версии:**
- **DOS**: Изменения через этот раздел меню
- **Windows**: Правый клик мыши на пункте в карточке

#### Формат контрольных доек

Изменить порядок столбцов на странице 4 (текущая лактация) или скрыть некоторые столбцы

#### Порядок страниц

Изменить последовательность страниц по усмотрению

#### График лактации

**Настройка:**
- Вручную задать параметры оси Y (надой)
- Для ферм с выросшей продуктивностью
- Клик на ось графика → выбор другого пункта контрольной дойки

---

### Опции - Информация о ферме

#### Изменить название фермы

- До 31 символа
- Отображается в отчетах
- Используется для различия баз (телки/коровы, разные модификации)

#### Изменить ID стада

- Для коммуникаций с DHI
- RECEIVE и другие модули открывают определенные файлы по умолчанию
- Параметры зависят от DHIA

#### Действия при запуске

**Автозагрузка команды:**
- Экран справки
- Список действий за предыдущий день
- Daily Milk: автоматическая архивация недельных надоев

**Отключение:**
Оставить пустое значение (Enter)

#### Логин/пароль

Для регионов с удаленным входом в систему DHIA

#### Формат даты

- **США**: MM/DD/YY
- **Другие страны**: DD/MM/YY
- **ВАЖНО**: НЕ изменяйте просто так - вызовет неразбериху
- Изменяется во всех разделах программы

#### Названия коровников

Использовать текстовые названия вместо номеров для упрощения ввода
Лучше для внешней документации (ветеринары/консультанты)

---

### Опции - Таблица отела

**Назначение:**
Автоматические изменения пунктов при событии FRESH (новая лактация)

**6 таблиц, определяющих изменения:**

#### 1. Пункты, значения которых обнулено

**Обнуляются:**
- Продуктивность
- Репродуктивная информация
- и т.д.

**Момент:**
После установки остальных пунктов по двум следующим таблицам

**НЕ обнуляются:**
- Рассчитываемые пункты
- Данные контрольных доек

**Обнуляются только:**
Сохраненные пункты, не применимые к новой лактации

#### 2. Перенос значений пунктов

**Принцип:**
Связь между пунктами для переноса текущей → "предыдущий"

**Пример:**
FDAT → PFDAT

**Правила:**
- Оба пункта должны быть одного типа
- Буквенно-числовые (тип 33): одинаковая длина

#### 3. Перенос значений в записи о теленке

**Особенности:**
- Типы пунктов должны совпадать
- Буквенно-числовые: одинаковая длина
- В один пункт теленка можно перенести несколько пунктов матери

**Пример множественного переноса:**
```
USDA --> DREG
REG --> DREG
```

**Порядок:**
1. USDA переносится в DREG
2. REG переносится в DREG (замещает USDA)
3. REG переносится только если ≠ 0

**Результат:**
- USDA → DREG для скрещенных
- REG → DREG для чистопородных

**Важен порядок в таблице!**
USDA→DREG должно быть перед REG→DREG

**Нулевые и пустые значения не переносятся**

**Пересадка эмбрионов:**
```
ID --> DID
ETDAM --> DID      # Замещает ID реципиента
USDA --> DREG
REG --> DREG
ETREG --> DREG     # Замещает информацию о реципиенте
```

#### 4. Пункты по запросу для коровы

Запрашиваются и сохраняются для отелившейся коровы:
- Показатель легкости отела
- Баллы физического состояния
- Номер секции отела

#### 5. Пункты по запросу для теленка

Запрашиваются для новорожденного теленка:
- Название коровника
- Дата вакцинации
- Номер бирки

#### 6. Пункты, вносимые вместе

Парные пункты, значения вносятся одновременно

**Пример:**
- NMAST (количество процедур лечения мастита) +
- LMAST (общее количество процедур лечения мастита)

---

### Опции - Телефон и модем

**Назначение:**
Настройка связи с DHI

**Требование:**
Модем, совместимый с Hayes

#### Windows версия

**Интерфейс:** Windows TAPI (стандартный)

**Настройки:**
- Скорость передачи данных
- COM-порты
- и т.д.

**Где настраивается:**
Панель управления → Модемы

**Программа не знает настроек оборудования**

**Опции ниже:**
Для совместимости с предыдущими версиями, больше не используются

#### Опции (для старых версий)

**Показать/напечатать настройки:**
Вывод текущих настроек

**Режим набора:**
- "T" - тональный
- "P" - дисковый/импульсный

**Телефонные номера:**
- Первого выбора: номер DHI центра + скорость + четность
- Второго выбора: альтернативный номер DRPC

**COM-порт:**
COM1, COM2, COM3, COM4

**Строка инициализации:**
Дополнительные коды для модема (выход на междугороднюю, "9" для внешней линии и т.д.)

**Проверить модем:**
Проверка работы + набора номера + входа в DRPC

---

### Опции - Таблицы техников и осеменения

**Назначение:**
Управление информацией по осеменению

**Две таблицы:**
1. Таблица техников
2. Таблица схем осеменения

#### Таблица техников

**Содержание:**
- Номера техников ИО (искусственное осеменение)
- Имена техников

**Использование:**
При вводе BRED → вывод таблицы → выбор номера

**Настройка:**
- Номера: 1-8
- Имя: до 15 символов

**Пример:**
```
1  John
2  Paul
3  George
4  Ringo
```

**Анализ:**
BREDSUM по кодам → эффективность осеменения по техникам (с именами)

#### Таблица схем осеменения

**Код:** Один символ (0-9 или A-Z)
**Описание:** До 15 символов

**Примеры:**
```
L  Стимуляция (Lutalyse)
S  Активная охота (Standing heat)
I  Повторное осеменение (Post breeding infusion)
T  Осеменение по графику (Timed Breeding)
```

**НЕ использовать:** P, O, E, C, R (используются для результатов осеменения)

**Использование:**
Если таблица создана → BRED запрашивает код → сохраняет → показывает в событии

**Дополнительная информация:**
- Активная охота
- Использование простагландина
- и т.д.
- Нужно для ветеринаров

---

### Опции - Пункты (подробное описание)

#### Три типа пунктов

**1. Факты:**
Задаются при начале записей, обычно не меняются (ID, BDAT)

**2. Определяемые пункты:**
Изменяются событиями, отражают текущее состояние (FDAT, TBRD)

**3. Рассчитываемые пункты:**
Значение определяется из других пунктов (DCC, CINT)

**Примеры:**
- DCC = TODAY - CDAT (изменяется каждый день)
- Отслеживание этих пунктов - основная задача программы

#### Файлы, записи и байты

**Файл:**
Организованная информация под именем, распознаваемым ОС
Примеры: COWFILE1.DAT, DC.EXE, DCMENU.DAT

**Запись:**
- COWFILE1.DAT состоит из пронумерованных записей
- Длина: 1024 байта (1Кб)
- Одна запись = информация по одному животному
- Пример: запись 147 = корова 37

**Таблица доступа:**
Компьютер создает для отслеживания записей (как содержание/указатель в книге)

**Распределение 1024 байт записи:**
- 256 байт для пунктов
- Остальное: события, контрольные дойки, завершенные лактации и т.д.

**Байт:**
- Один символ ИЛИ число до 255 (однобайтовое целое)
- "ABC" требует 3 байта
- Числа >255: два байта (максимум 32767 - двухбайтное число)

**Бит:**
- 8 бит = 1 байт
- Бит = 0 или 1 (двоичный код)
- 256 комбинаций 0 и 1 в 8 битах
  - 0 = "00000000"
  - 1 = "00000001"
  - 2 = "00000010"
  - 255 = "11111111"

#### Хранение данных

**256 байт для пунктов:**
Значения отдельных пунктов в соответствии с расположением в записи

**Примеры:**
- TBRD = 4 → число 4 в байте для TBRD
- USDA = "93VAH2345" → 9 байт

#### Таблица пунктов

**Содержание:**
- Расположение пункта в записи
- Тип пункта

**Для TBRD:**
- Расположение
- Тип: число

**Для USDA:**
- Расположение
- Тип: буквенно-числовые символы

#### Экономия места: таблица быков

**Проблема:**
Имя быка = 8 символов = 8 байт
6 мест для производителей = 48 байт

**Решение:**
- Таблица имен быков-производителей
- В записи коровы: двухбайтное число (ссылка на таблицу)
- Вместо 8 байт → 2 байта
- До 2000 имен в таблице

**Пользователь:**
- Вводит и видит имена быков
- В записи хранится только двухбайтная ссылка

#### Экономия места: даты

**Вместо символов:**
Не сохраняется "18/9/97" (несколько символов)

**Конвертация:**
Количество дней с 1 января 1961

**Хранение:**
Двухбайтное число

**Календарь программы:**
80 лет (< 32767 дней - максимум для 2 байт)

**Преимущества:**
- Экономия места
- Упрощение сложения/вычитания дат

#### Рассчитываемые пункты

**Назначение:**
- Экономия места
- Использование уже сохраненных пунктов
- Определение фактов (DCC, AGE)

**Пример:**
Интервал между отелами = дата последнего отела - дата предыдущего отела

**TODAY (сегодня):**
Идеально для расчетов с текущей датой
DCC = TODAY - CDAT
(Непрактично пересчитывать и сохранять каждый день)

**Другие методы:**
- Расчет из других пунктов
- Извлечение информации
- Пример: Тип 74 (счетчик событий) - обращается к разделу событий, считает количество (например, MAST)

#### Таблица пунктов - структура

**Вместимость:**
255 пунктов (сохраненных + рассчитываемых)

**НЕ путать:**
Таблица пунктов ≠ Индивидуальная запись коровы (256 байт для сохранения)

**Каждая запись в таблице:**
- 5-значное название пункта
- Тип данных
- **Для сохраненных:** расположение и длина
- **Для рассчитываемых:** метод вычисления + 2 операнда

**Примеры из меню "Опции":**

**Сохраненный пункт (#14):**
```
Name: FDAT
Data type: 18
Location: 42
Length: 2
```

**Рассчитываемый пункт (#45):**
```
Name: DIM
Op code: 49
Operand#1: DDAT
Operand#2: FDAT
```

---

## Part 12: Страницы 111-120

### Сохраненные пункты - типы данных

**Таблица типов данных:**

| Тип | Описание |
|-----|----------|
| 1 | Однобайтное число 0-255 |
| 7 | -127 - +127 |
| 8 | Число с десятичной частью 0.0-25.5 |
| 16 | -16000 - +16000 |
| 17 | Двухбайтное число 1-32000 |
| 18 | Двухбайтное число, даты |
| 19 | Двухбайтное число, быки (ссылка на таблицу) |
| 20 | Двухбайтное число, кратное 10: 0-300000 |
| 21 | -150000 - +150000 |
| 22 | -300.00 - +300.00 |
| 23 | Время суток (24ч формат) |
| 24 | ID, начинающийся с буквы |
| 33 | Буквенно-цифровой тип (максимум 9 знаков) |

**Рекомендации:**
- Тип 18: автоматический ввод/вывод дат
- Тип 19: ссылка на таблицу быков
- Тип 33: избегать если числа <32000 (экономия места, удобство в командах)

**При создании:**
Программа ищет место для нового пункта
Ошибка: "Пункт превышает доступное пространство памяти" → удалить неиспользуемые

**Обнуление после добавления:**
```
ENTER MYNUM=0 FOR ID>0
```
Очистка всех записей для нового пункта

---

### Рассчитываемые пункты - стандартные вычисления

#### Типовые подсчеты дат

| Мет.Выч. | Описание |
|----------|----------|
| 49 | Дата - дата |
| 50 | Дата + x |
| 51 | Дата + x + 256 |
| 60 | Дата - дата = ГГ.ММ (год-месяц) |
| 61 | Дата - x |

**Особенности:**
- Тип 49 с TODAY: ввести 0
- Если один из двух пунктов = 0 → автоподстановка текущей даты
- Тип 60: AGE 2-6 = 30 месяцев. В командах указывать месяцы: AGE>15 = возраст >1 года 3 мес.

#### Типы специальных операций

| Мет.выч. | Описание |
|----------|----------|
| 62 | Таблица вет. кодов на английском |
| 63 | Таблица репрод. кодов на английском |
| 64 | Справочная таблица |
| 65 | Таблица описаний |
| 66 | Таблица кодов событий на английском |
| 67 | Тип секции |

#### Типы пунктов событий

| Мет.Выч. | Описание |
|----------|----------|
| 70 | Дата события |
| 71 | DIM до события |
| 72 | Дни с момента события |
| 73 | Комментарий к событию |
| 74 | Счетчик событий |
| 75 | AGE при событии |
| 77 | Информация по теленку |
| 78 | Информация по осеменению |

**Использование:**
Извлечение информации по событию из записи коровы

**Пример: DIM на дату первого осеменения (FBDIM)**
```
Название: FBDIM
Тип: 71
Тип события: BRED (номер 5)
Номер события: 1
Описание: DIM на дату первого осеменения
```

**Номера событий:**
- Положительные: 1, 2, 3... (первое, второе, третье...)
- Отрицательные: -1, -2, -3... (последнее, предпоследнее...)

**Тип 74 (счетчик):**
- Номер события: 0 (считаются все события этого типа)
- Событие = 0 → подсчет всех событий в записи коровы

#### Типы пунктов контрольных доек

| Мет.выч. | Описание |
|----------|----------|
| 80 | DATA проверки |
| 81 | DIM на дату проверки |
| 82 | MILK в день проверки |
| 83 | %Fat/%SNF/%PTN в день проверки |
| 84 | Misc. в день проверки |
| 85 | FCM или ECM или MLM в день проверки |
| 86 | 305 Milk на день проверки |
| 87 | RELV на день проверки |
| 88 | SCC (необработанные или логарифм) в день проверки |
| 89 | Секция/ряд в день проверки |

**Указание дня проверки:**
- 1, 2, 3... - первый, второй, третий...
- -1, -2... - последний, предпоследний...
- 99 - пиковые значения
- 50 - средние значения

**Примеры:**

**MILK (надой в последнюю проверку):**
```
Тип: 82
День проверки: -1
Операнд 2: 0
```

**PKMLK (максимальный надой):**
```
Тип: 82
День проверки: 99
Операнд 2: 0
```

**AVSCC (среднее SCC):**
```
Тип: 88
День проверки: 50
Операнд 2: 0
```

**PCTP (процент белка в последний тест):**
```
Тип: 83
День проверки: -1
Операнд 2: 1
```
(Операнд 2 уточняет: 1 = процент белка)

#### Типы пунктов завершенной лактации

| Мет.выч. | Описание |
|----------|----------|
| 91 | LACT или RELV заверш. лактации |
| 92 | TOTF или TOTS заверш. лактации |
| 93 | TOTM или 305ME заверш. лактации |
| 94 | FDAT, CDAT или DDAT заверш. лактации |
| 95 | DIM, DOPN или DDRY заверш. лактации |

**Номер лактации:**
- 1, 2... - первая, вторая...
- -1 - последняя
- 50 - среднее значение
- 99 - общее (пожизненное)

**Пример: пожизненный TOTM (LTOTM)**
```
Тип: 93
Which col: TOTM
Номер лактации: 99
```

#### Дополнительные типы вычислений

| Мет.выч. | Описание | Мет.выч. | Описание |
|----------|----------|----------|----------|
| 98 | Мин (пункт1, пункт2) | 105 | пункт+x |
| 99 | Макс (пункт1, пункт2) | 106 | пункт-x |
| 100 | Месяц даты | 107 | пункт*x |
| 101 | пункт+пункт | 108 | пункт/x |
| 102 | пункт-пункт | 109 | Мин (пункт, x) |
| 103 | пункт*пункт | 110 | % пункт1 от пункт2 |
| 104 | пункт/пункт | | |

**"X" в типах 105-109:** любое число от 1 до 255

**Тип 98 и 99:**
Сравнительные вычисления (используются для даты выведения лекарств)

**Тип 100 - месяц даты:**
- Операнд 1: пункт даты
- Операнд 2: смещение от даты (опционально)
  - 0 → всегда месяц даты
  - 1-11 → смещение назад
  - 12 → месяц даты только для последних 12 месяцев

**Пример MOFSH (месяц отела):**
```
Тип: 100
Название пункта: FDAT
Операнд 2: 12
```

**Тип 109 - максимум для x:**

**Пример LGRP (лактационная группа):**
```
Тип: 109
Название пункта: LACT
Операнд 2: 3
```
(Совпадает с LACT до 3, для 3+ лактации = 3)

#### Логические типы пунктов

| Мет.выч. | Описание |
|----------|----------|
| 111 | пункт = x |
| 112 | пункт > x |
| 113 | пункт < x |
| 114 | пункт = пункт |
| 115 | пункт < пункт |
| 116 | пункт и пункт |
| 117 | пункт или пункт |
| 118 | округление (пункт,x) |

**Принцип:**
Задает вопрос, если ответ утвердительный → возвращает 1

**Пример LACT1 (животное первой лактации):**
```
Тип: 111 (пункт = x)
Название пункта: LACT
Операнд 2: 1
```
Результат: 1 для первотелок, 0 для остальных

**Использование:**
- Выбор всех первотелок
- Расчеты по ним
- Перевод в отдельную секцию

**Тип 118:**
Округление значений (например, DIM → недели в доении)

#### Типы пунктов для телят

**Два типа: 73 и 76**

**Тип 73 - результат по теленку (строка):**

**Буквенные обозначения:**
- M = бычок
- F = телочка
- K = сохранен (оставлен в стаде)
- S = продан
- A = живой
- D = мертвый

**Комбинации (op1=1, op2=...):**

| op2 | Описание | Пример |
|-----|----------|--------|
| 1 | Пол | F, M, MM, FF, FM, MF (двойни) |
| 2 | Сохранен/продан | K, S, две буквы для двойни |
| 3 | Пол + сохранен/продан | FK, MS, 4 буквы для двойни (FKMS) |
| 4 | Жив/мертв | A, D |
| 5 | Пол + жив/мертв | FD, MA |
| 6 | Жив/мертв + сохранен/продан | SD, KA |
| 7 | Все три результата | FKA, MSD |

**Тип 76 - результат по теленку (количество):**

**op1=0: количество новорожденных**
```
SHOW ... FOR ITEM>1  # Двойни
```

**op1=1: пол**
- op2=0: телочки
- op2=1: бычки

```
SHOW ... FOR ITEM>0  # Телочки
SHOW FOR ITEM>1      # Двойня бычков (op2=1)
```

**op1=2: сохранен/продан**
- op2=0: сохранен
- op2=2: продан

```
SHOW ... FOR ITEM>0  # Телята добавлены в профиль
```

#### Пункты соответствия

**Тип 64 - таблица соответствия:**
Возвращает индекс на основе значения другого пункта

**Тип 65 - таблица описаний:**
Словесное описание числового пункта

**Пример с DIM → DIMGP и STAGE:**

**DIMGP (группа по DIM):**
Таблица: значения DIM → номера групп

**STAGE (описание стадии):**
Словесные описания, связанные с номерами DIMGP

**Проверка:**
```
SHOW ID DIM STAGE
SHOW ID PEN DIM DIMGP
SUM BY DIMGP
SUM BY STAGE FOR LACT>0 DDAT=0
```

**Результат SUM BY STAGE:**
```
By STAGE  %COW #COW
Fresh      11   113
HiProd     22   226
Middle     26   271
Stripper   40   407
===================
Total     100  1017
```

#### Пункты типов групп

**Типы секций на крупных фермах:**
- Секция с быком (BULL)
- ИО (AI)
- Доение (MILK)
- Сухостой (DRY)
- Молодняк (CALF)
- Лечебная (HOSP)
- Пользовательские (USER)

**Изменение:** `ALTER\4`

**Создание пунктов:** `ALTER\2`, тип 67

**Значения типов секций:**
- 2: BULL
- 4: AI
- 8: MILK
- 16: DRY
- 32: HOSP
- 64: CALF
- 128: USER

**Пример настройки:**
```
PEN  BULL AI MILK DRY HOSP CALF USER
1              MILK
2         AI   MILK
3    BULL      MILK
4    BULL      MILK
5         AI   MILK
10                  DRY
11                       HOSP
20-24                         CALF
```

#### Пункты номера секции и кода выбытия (тип 89)

**Назначение:**
Отображение на странице 4 карточки коровы

**Примеры:**

| Название | Тип | Op1 | Op2 | Описание |
|----------|-----|-----|-----|----------|
| TPEN | 89 | -1 | 0 | Номер секции в день последнего теста |
| PTPEN | 89 | -2 | 0 | Номер секции в день предыдущего теста |
| TCAR | 89 | -1 | 1 | Код выбытия в день теста (1=CAR, 0=NoCAR) |

**Использование:**
```
SHOW ... FOR TPEN<>PEN          # НЕ в указанной секции
SHOW ... FOR TPEN<>PTPEN        # Переведенных после последнего теста
SHOW ... FOR TCAR>0             # С кодом выбытия в последний тест
```

#### Пункты возрастного коэффициента

**Два пункта прогноза:**
- **ME305**: внутренний расчет DairyComp
- **305ME**: внешний расчет (процессинговый центр DHI)

**Расчет немного отличается**
Рекомендуется выбрать один и отслеживать

**MEFAC (фактор возрастного коэффициента):**
- Хранится в пункте 55
- Старое название: PCAR
- Учитывается для первотелок и взрослых коров
- Пересчитывается при FRESH
- Для новых животных: загружается через LOAD
- Если MEFAC=0 → ME305 и RELV также = 0

**Расчет MEFAC:**
Необходимы BDAT и FDAT
Если ME отсутствует → проверить BDAT

**Команда CONVERT:**
Опция пересчета MEFAC для всего стада

**RECEIVE:**
Берет значения "305ME" от процессингового центра → сохраняет как пункт 305ME типа 86

**Различия в расчетах:**
- Daily Milk: внутренний ME305 точнее (не используются средненедельные)
- Корректировка по кодам выбытия: DairyComp не учитывает (неудобны, отличаются в разных центрах)

**RV и RELV (относительная ценность):**
- **RV**: использует ME305 (внутренний)
- **RELV**: использует 305ME (внешний)
- Среднее по стаду = 100
- RV>100: выше среднего ME
- RV<100: ниже среднего ME
- Рассчитывается ежемесячно в RECEIVE

#### Список типов пунктов для прогноза

**Последнее значение 305ME (от процессингового центра):**
```
ME305  120  0  0
```

**Внутренний расчет с ME:**
```
M305   127  0  0
```

**Внутренний расчет без ME:**
Добавить Op2 к типу 86

**С ME:**
```
305x   86  -1  1
```

**Без ME ("чистый" прогноз):**
```
305y   86  -1  2
```

**Предыдущие тесты (Op1):**
- Отрицательные: -1 (последний), -2 (предпоследний), -3...
- Положительные: 1 (первый), 2 (второй), 3 (третий)...

#### Пункты ежедневных надоев

| Мет.выч. | Описание |
|----------|----------|
| 119 | Отклонение от среднего надоя |
| 120 | Молоко на голову в конкр. день |
| 121 | Сред. недельн. надой на голову |
| 122 | Сред. нед. надой по DIM |
| 123 | Ср. нед. надой на опред. момент |
| 124 | Удой за лактацию |
| 125 | Удой за лактацию на дни пункта |
| 126 | Удой за лактацию на дни пункта |
| 127 | Прогноз надоя за 305 дней |
| 128 | Прогноз надоя за 305 дней с учетом ME |
| 129 | Отношение 305ME/Сред. надой на голову/год |
| 141 | Ожидаемый надой |
| 142 | Отклонение надоя |

---

## Part 13: Страницы 121-130

### Пункты ежедневных надоев - детали

**Источник данных:**
Страница 6 карточки коровы (ежедневные надои)

**Пример данных (стадо 2x доение):**
```
Дата:  1/9  1/10 1/11 1/12 1/13 1/14 1/15 Today Exp Dev Avg
Дойка1: 48   47   46   0    54   49   51   52   57  -4  42
Дойка2: 48   50   53   43   50   45   50   49   52  -3  48
Итого:  96   98   99  100  104   94  101  101  109  -8  91
```

**8 дней надоев в ряду**

#### Пункт M1 (надой первой дойки сегодня)

**Определение:**
```
Название: M1
Тип: 120 (Надой/гол/за дойку в день x)
День дойки: 8
Номер дойки: 1
```

**День дойки:** 1-8 (1 = 8 дней назад, 8 = сегодня)

**Номер дойки:**
- 1 = первая дойка
- 2 = вторая дойка
- 3 = третья дойка
- 4 = итого молока за день
- 5 = четвертая дойка (для 4x доения - необычная система для совместимости)

#### Особенности хранения

**Отсутствующий надой:**
Если надой за дойку отсутствует → итог = сумма известных + средний ожидаемый (Ожд) этого номера дойки

**Точность:**
Хранится до ближайшей половины единицы (0.5)
Пример: 47+50=98 (каждое содержит 0.5)

#### Средние значения (тип 121)

**Среднее за 7 дней (без последнего доения):**

| Имя | Тип | Op1 | Op2 | Описание |
|-----|-----|-----|-----|----------|
| AVG1 | 121 | 1 | 0 | Ср. надой 1-й дойки на этой неделе |
| AVG2 | 121 | 2 | 0 | Ср. надой 2-й дойки на этой неделе |
| AVG3 | 121 | 3 | 0 | Ср. надой 3-й дойки на этой неделе |
| MAVG | 121 | 4 | 0 | Ср. надой/гол/день на этой неделе |

**Op2 = 0:** обеспечивает 7-дневное усреднение

**Op2 = N:** количество дней для среднего

**Пример:**
```
3DAVG  121  4  3    # Ср. надой/гол/день за последние 3 дня
```

#### Ожидаемые надои (тип 121, Op2=99)

**Среднее арифметическое, изменяемое со временем:**

| Имя | Тип | Op1 | Op2 | Описание |
|-----|-----|-----|-----|----------|
| DMEXP | 121 | 4 | 99 | Ожидаемый надой/гол/день |
| EXPM1 | 121 | 1 | 99 | Ожидаемый надой/гол/1-я дойка |

#### Отклонение (тип 119)

**Разница между текущим надоем и средним за 7 дней:**

| Имя | Тип | Op1 | Op2 | Описание |
|-----|-----|-----|-----|----------|
| DEV1 | 119 | 1 | 0 | Откл-е надоя 1-й дойки от ср. этой недели |
| DEV2 | 119 | 2 | 0 | Откл-е надоя 2-й дойки от ср. этой недели |
| DEV3 | 119 | 3 | 0 | Откл-е надоя 3-й дойки от ср. этой недели |
| DEV | 119 | 4 | 0 | Откл-е от срд. надоя/гол/день этой недели |

#### Другие пункты ежедневных надоев

| Название | Тип | Op1 | Op2 | Описание |
|----------|-----|-----|-----|----------|
| M120 | 122 | 24 | - | Средненедельное на 120 дней доения (Op1=DIM/5) |
| M90 | 122 | 18 | - | Средненедельное на 90 дней доения (Op1=90/5=18) |
| MPEAK | 122 | 999 | - | Максимальный дневной надой |
| PKDIM | 81 | 99 | - | Дни в доении на день максимального надоя |

---

### Команда SETUP - настройка программы

**Назначение:**
Настройка параметров работы программы, видео и принтера

**Отличие от ALTER (Опции):**
- **SETUP**: параметры программы, видео, принтер (не связано с базой данных)
- **ALTER**: пункты, команды, параметры базы данных

**Хранение настроек:**
Файл DCSETUP.TXT или DCSETUP.DAT (не в базе данных)
Изменения отражаются во всех базах данных

#### Синтаксис SETUP

```
SETUP
```

**Условия:**
- Список пунктов: НЕТ
- FOR: НЕТ
- BY: НЕТ

**Ключи SETUP:**

| Ключ | Описание |
|------|----------|
| 4 | Переключает статус принтера |
| 4E | Включает возможность печати |
| 4D | Выключает возможность печати |
| 5P | Выключает перенаправленную печать |
| 5R | Включает перенаправленную печать |
| \5Rимяфайла | Включает печать в файл «имяфайла» |

**Пример использования в командах:**
```
PON = SETUP\4E
POFF = SETUP\4D

PON!MYREPORT!POFF
```

#### SETUP - Принтер

**Print Enabled:**
- Включено → автоматическая печать LIST и пакетных команд
- Выключено → вывод в обозреватель (печать из обозревателя по желанию)

**Printer Setup:**
Стандартное диалоговое окно Windows для настройки принтера

**Шрифты:**
- **Шрифт обычной печати** - отчеты без ключа \C
- **Шрифт сжатой печати** - отчеты с ключом \C
- Только шрифты постоянной ширины

**Матричные принтеры:**
Использовать "родные" шрифты (иконка принтера) - печать намного быстрее

**Тест принтера:**
Печать тестовой страницы с обычным и сжатым шрифтом

#### SETUP - Меню

**Настройка элементов выпадающих меню:**

**Изменение элемента (двойной клик):**
- 15-значное описание (отображается в меню)
- 7-значная команда (выполняется при выборе)
- 3 строки дополнительного описания (при выделении пункта)

**Вступление в силу:**
Сразу после выхода из меню "Установка"

#### SETUP - Дополнительно

**Дата запуска:**
- По запросу
- Системная дата
- Дата последнего запуска

**База данных при запуске:**
- Запрашивать
- Автоматически последнюю открытую

**Рекомендации:**
- Фермы: последняя база + автоматическая системная дата
- Консультанты: дата последнего запуска

**Картинка при запуске:**
Загрузка файла BMP для главной страницы (экспериментальная опция)

**Вид отчета по умолчанию:**
- **Таблица** (рекомендуется): сортировка, изменение пунктов, выбор кликом
- **Отчет**: вид, напоминающий версию DOS (для консерваторов)

**Дополнительные опции:**
- Основная база данных (для пользователей с несколькими стадами)
- Порода по умолчанию (добавляется вместо "." для быков/осеменений)
- Расположение окон
- Цвет и шрифт списков выбора

---

### Veterinary - Ветеринарные процедуры

**Назначение:**
Сбор информации для проведения ветеринарных осмотров

**Модули:**
- **VETLIST (VLIST)**: формирование ветеринарного списка
- **VETENTER (VENTER)**: внесение результатов осмотра

**Причины осмотра:**
- Проверка на стельность
- Осмотр после отела
- Заболевания

#### Работа с ветеринарным списком

**Процесс (3 шага):**

**1. Задать критерии отбора (однократно):**
Настройка в программе, изменение в любой момент

**2. Сформировать отчет (VLIST):**
- Устанавливает "вет коды" для выбранных коров
- Коды сохраняются в пункт VETC
- Используются командой VENTER

**3. Внести результаты (VENTER):**
Прямо из отчета с автоматическим выбором животных

#### Ветеринарные коды (VETC)

**Принцип работы:**
VLIST - особая форма команды LIST (не отчет LIST)

**Алгоритм:**
1. Просмотр информации по каждому животному
2. Проверка репродуктивного кода (RC) и длительности
3. Определение необходимости осмотра
4. Составление списка с вет кодами (причинами)

**Таблица вет кодов:**
Описывает коды в соответствии с длительностью RC

**Примеры присвоения:**
- RC=2 (FRESH) + DIM>25 → VC=FRSH
- RC=4 (BRED) + DSLH>40 → VC=PREG

#### Важные особенности VLIST

**1. VLIST только задает вет коды, не сбрасывает**
Сброс при вводе событий или пунктов

**2. Порядок поиска:**
- Сначала ищет существующие вет коды
- Если нет → проверяет условия таблицы вет кодов
- Или аббревиатуры команд (PEN=2-4)

**3. События, присваивающие вет код автоматически:**
- **CHECK** → VC=1 (CHCK)
- **HEAT** у стельной → VC=6 (ABT?)
- **BRED** у стельной → VC=6 (ABT?)

**4. Приоритет:**
Вет код по первому соответствию в таблице

**Пример конфликта:**
Корова осеменена 43 дня назад + интервал между охотами 8 дней
→ VC=3 (PREG), т.к. PREG выше в таблице, чем CYST

**Удаление ненужных кодов:**
```
VC=0
```

**Один вет код на животное:**
Либо событием, либо по первому совпадению критериев

#### Формат VETLIST

**Команда:** VETLIST
**Аббревиатура:** VLIST (чаще используется)

**Структура VLIST:**
- Включает аббревиатуру VITEMS (список пунктов для отчета)
- Условия FOR для уточнения отбора
- Ключи: \2 (двойные интервалы), \U (место для примечаний)

**Сжатый вид:**
Большинство предпочитают для включения больше информации (PEN, продуктивность и т.д.)

**Настройка:**
- **Опции | Команды**: VLIST (условия, сортировка, ключи) и VITEMS (перечень пунктов)
- **Опции | Ветеринария**: таблица вет кодов

#### Сортировка вет списка

**Стандартная сортировка:**
По ID (BY добавлять не нужно)

**Альтернативы:**
- По номеру секции (PEN)
- Вторичная сортировка: только если первый пункт - однобайтный (тип 1)
- "BY BNAME PEN" - некорректно

**Важно:**
Порядок в VENTER должен совпадать с порядком в VLIST

#### Разные вет списки

**Множественные списки:**
Разные группы животных для разных визитов ветеринара

**Пример 1 (по секциям):**
```
VLIST1: FOR PEN=1-5
VLIST2: FOR PEN=6-8
```

**Пример 2 (по вет кодам):**
```
# Недавно отелившиеся + вне охоты
FOR VC=1-8 VC=5-3     # 5-3 = исключая коды 3-5

# Проверка на стельность
FOR VC=3-4
```

**Требование:**
Условия VETLIST и VENTER должны совпадать или не противоречить

#### Ключи VLIST

**Стандартные (как LIST/SHOW):**
Обычно: \2C (сжатый вид + двойные интервалы)
Небольшие стада: \V (добавление событий)

**Ключ \N (отличается от LIST):**

**В LIST:** нумерация строк отчета
**В VLIST:** управление флажками вет кодов

**Флажки вет кодов:**
- VLIST помечает флажками всех животных с вет кодом
- Предыдущие пометки стираются
- VENTER ищет эти флажки для быстрого открытия записей

**Проблема:**
При двух одновременных списках → флажки первого удаляются

**Решение:**
- Добавить \N к команде второго списка
- Или добавить \N к VENTER (программа не ищет флажки, но медленнее)

#### Пример ветеринарного списка

```
Command: VLIST
Expanded: VETLIST ID DIM TBRD DSLBR RELV RPRO VETC EVT EDAY REM ID\2CU FOR LACT<0

ID   DIM  TBRD DSLH RELV RPRO     VETC EVT   EDAY    REM        ID
1    295  1    214  98   PREG     REPG FOOT  8/20/88 LFOOT      1________
3    109  5    2    101  BRED     XBRD BRED  9/7/88  RFOOT      3________
8    125  1    44   90   BRED     PREG BRED  7/26/88            8________
10   212  2    63   110  PREG     CHCK CHECK 7/7/88  TEATINJ    10________
26   188  5    6    100  BRED     PROB BRED  9/2/88  RCYST      26________
61   26   0    0    88   FRESH    FRSH FRESH 8/13/88 TWINS      61________
```

**Расшифровка:**
- Корова 8: PREG (проверка на стельность), DSLH=44
- Корова 26: PROB (проблемное осеменение), DIM=188, не стельная
- Корова 61: FRSH (осмотр после отела), DIM=26

#### Часто возникающие проблемы

**1. Слишком длинный список:**
Сузить критерии (например, PROB: 100→150 дней)

**2. Изменить список пунктов:**
Опции → изменить VITEMS

**3. Изменить критерии отбора:**
- Стандартные процедуры (дни после осеменения, дни без охоты): ALTER\5
- Условия (лактация, секция, HOLDATE): изменить FOR в VLIST

**4. Слишком много животных:**
Причины:
- Некорректные критерии (ALTER\5)
- Неактуальные репродуктивные коды
- Проблемы с VC
- Некорректное FOR в VLIST

Просмотреть животных по одному для определения причины

**5. Порядок не совпадает с VENTER:**
Решения:
- Проверить совпадение FOR и BY в VENTER и VLIST
- Убедиться, что нет задержки между VLIST и VENTER
- Перезапустить VLIST перед внесением

**6. Отложить осмотр:**
См. раздел "Использование дат блокировки"

**7. Отказ от осмотров после отела:**
Три шага:
1. ALTER\5, выбор 2 → N (Нет)
2. Опции → в конце FRESH добавить RC=3
3. Командная строка: `RC=3 for RC=2` (изменить всех FRESH на OK\OPEN)

**8. Отдельный список для нетелей:**

**Создать три команды:**
```
HVITEMS = RPRO DIM TBRD DSLH AGE EDAY EVT REM VETC
HVLIST = VETLIST ID VITEMS ID FOR VC>0 LACT=0 BY PEN\2CUE
HVENTER = VENTER FOR VC>0 LACT=0 BY PEN
```

---

## Часть 14 (страницы 131-140)

### Настройка функциональных клавиш в VETENT

**Назначение:**
Автоматический ввод дополнительных событий (до 3 событий с комментариями)

**Процедура настройки:**
1. В VETENT выбрать опцию `D`
2. Выбрать клавишу (например, F7)
3. Ввести последовательность нажатий

**Пример:**
```
Последовательность: 4!8=25LUT
```
- `4` = ввести результат "яловая"
- `!` = разделитель
- `8` = открыть "Другие события"
- `=25` = выбрать событие 25 (PROST)
- `LUT` = добавить комментарий

**Применение:**
При проверке на стельность, если корова яловая, автоматически добавляется событие PROST (простагландин)

---

### Установка и использование сроков блокировки (Hold Dates)

**Назначение:**
Временно исключить животное из ветеринарных списков на заданный период

#### Способ 1: Через причины для осмотра (VETC)

**Создание пунктов:**
```
Название: HLDAT
Тип: 18
Описание: hold date
```

**Создание команды HOLDM:**
```
Аббревиатура: HOLDM
Содержание: HLDAT=TODAY+___ FOR PVET=?? VDAT=TODAY
```
- `___` = число дней блокировки
- `??` = вет код из последнего списка

**Изменение VLIST:**
```
VLIST ID VITEMS ID FOR VC>0 HLDAT<TODAY\PUE
```
Добавляет животных, у которых срок блокировки истек (сегодня или ранее)

**Изменение VENTER:**
```
VETENT FOR VC>0 BY PEN!HOLDM
```
Автоматически проставляет срок блокировки после осмотра

#### Способ 2: Через комментарии (REM)

**Важно:**
- DairyComp 305 выявляет шаблон в комментариях
- Необходимо вводить комментарии единообразно
- Пометка должна быть первой в поле комментария

**Пример использования:**
Комментарий: `H2________` (2 недели блокировки для коров в секции с быком)

**Создание команд HLD1/HLD2/HLD3:**
```
Аббревиатура: HLD1
Содержание: HLDAT=TODAY+7 FOR REM>H1 VDAT=TODAY

Аббревиатура: HLD2
Содержание: HLDAT=TODAY+14 FOR REM>H2 VDAT=TODAY

Аббревиатура: HLD3
Содержание: HLDAT=TODAY+21 FOR REM>H3 VDAT=TODAY
```

**Изменение VENTER:**
```
VETENT FOR VC>0 BY PEN!HLD1!HLD2!HLD3
```

**ВАЖНО:**
- Создавать только один пункт HLDAT
- Можно использовать оба способа одновременно

---

### Команда VENTER - ввод результатов осмотра

#### Описание VENTER

**Назначение:**
Быстрое и простое внесение результатов ветеринарного осмотра

**Процесс:**
1. После VLIST и проведения осмотра набрать `VENTER`
2. Программа выводит животных по одному
3. Результаты вносятся в виде односимвольных значений (1-9)
4. Можно добавить комментарий или использовать функциональные клавиши

**Сортировка в VENTER:**
- Возможна сортировка не только по ID и PEN
- Условия BY в VLIST и VENTER должны совпадать

**VENTER для животного не из списка:**
```
VENTER \K
```
Программа запросит ID животного для внесения данных

---

#### Варианты результатов осмотра

**Таблица результатов:**

| Код | Результат | Описание | Изменения |
|-----|-----------|----------|-----------|
| 1 | Пропущена | Животное не осмотрено | RC и VC не меняются, флажок остается |
| 2 | Перепроверить | Нужен повторный осмотр | RC и VC не меняются, добавляется RECK |
| 3 | OK | Животное в норме | VC=0, RC зависит от статуса |
| 4 | Яловая | Стельность не выявлена | RC: BRED→OK/OPEN, VC=0 |
| 5 | Стельность (посл. осем.) | Стельность от последнего осеменения | RC: BRED→PREG, VC=0 |
| 6 | Стельность (пред. осем.) | Стельность от предыдущего осеменения | RC: BRED→PREG, запрос даты, VC=0 |
| 7 | Аборт | Стельность прервалась | RC: PREG→BRED/OK/OPEN, VC=0 |
| 8 | Другое | Внесение других событий | Вручную задать параметры |
| 9 | Exam/карточка | Открыть карточку коровы | Для уточнения информации |
| R | Просмотр записей | Список внесенных результатов | F3 для просмотра |

#### Детальные описания результатов

**[1] Пропущена:**
- Использование: животное не было осмотрено (сбежало, забыли привести)
- Программа оставляет флажок → животное добавится в следующий список
- RC и VC не изменяются

**[2] Перепроверить (RECK):**
- Использование: осмотрели, но статус неясен или есть проблема
- Примеры: инфекция после отела, стельность не определена на 100%
- Добавляется событие RECK
- RC и VC не изменяются → животное в следующем списке

**[3] OK:**
Действия зависят от RC:
- **RC=FRESH** → RC меняется на OK/OPEN, VC=0
- **RC=OK/OPEN** → RC не меняется, VC=0
- **RC=BRED** → RC остается BRED, VC=0
- **RC=PREG + VC=REPG** → RC остается PREG, VC=0 (подтверждение стельности)

**[4] Яловая (OPEN):**
- При проверке стельность не выявлена
- RC: BRED → OK/OPEN
- VC=0

**[5] Стельность, последнее осеменение (PREG):**
- Стельность от последнего зарегистрированного осеменения
- RC: BRED → PREG
- VC=0

**[6] Стельность, предыдущее осеменение (PREV):**
- Стельность от более раннего осеменения
- Программа запрашивает:
  - Выбор из списка предыдущих осеменений
  - Ввод даты осеменения
  - Ввод дней стельности
- Используется когда ветеринар определяет дни стельности (например, на фермах с ЕО)
- RC: BRED → PREG
- VC=0

**[7] Аборт (ABORT):**
- Подтверждение прерывания стельности
- RC зависит от повторного осеменения:
  - Если было повторное осеменение: PREG → BRED
  - Если не было: PREG → OK/OPEN
  - Возможно вручную изменить на FRESH
- VC=0

**[8] Другое:**
- Внесение событий, отличных от стандартных (1-7)
- Обычно: болезни репродуктивной системы, лечебные процедуры
- Программа выводит список событий
- **НЕ использовать для основных событий** (FRESH, BRED, DRY)

**ВАЖНО:**
При внесении через VENTER вносится только событие, но **НЕ запускается аббревиатура**. Например, если команда PREG переводит в секцию 5, при вводе через VENTER секция НЕ изменится.

**[9] Exam или карточка коровы:**
- Открывает карточку коровы
- Позволяет уточнить информацию
- Можно вносить пункты или события непосредственно в карточку

**[R] Просмотреть последние записи:**
- Выводит список животных, результатов и комментариев за текущий сеанс VENTER
- Также запускается клавишей F3
- Можно выбрать предыдущее животное стрелками и [Enter]

---

### Сброс вет кодов

**Стандартное поведение:**
- VLIST задает вет коды + флажки
- VENTER обнуляет вет коды + удаляет флажки
- При создании нового списка предыдущие флажки удаляются

**Проблема:**
Нужно составить второй вет список до внесения результатов первого

**Решение - ключ \N:**
```
VENTER \N FOR [условие для группировки коров из первого списка]
```
Удаляет флажки указанной группы без внесения результатов

**Удаление вет кодов вручную:**
```
VC=0 FOR [условия]
```
Удаляет ненужные вет коды одного или нескольких животных

---

### Комментарии к осмотру (REM)

**Пункт REM:**
- Отображается на странице 1 карточки коровы рядом с названием события
- При каждом событии можно добавить комментарий

**Сохранение предыдущего комментария - ключ \R:**

**Проблема:**
Нужно сохранить важный комментарий при добавлении нового события

**Пример:**
- Корова имеет событие FOOT с комментарием LFOOT
- При проверке на стельность добавлен комментарий TWINS?
- Нужно добавить событие FOOT, но сохранить REM=TWINS?

**Решение:**
```
FOOT\R
```
или изменить команду:
```
ENTER EC=xx \R
```

- Комментарий LFOOT отображается рядом с FOOT на странице 1
- В пункте REM остается TWINS? для отображения в списке

**Примечание:**
- Событие BRED не принимает комментарии (место занято ID быка, схемой, техником)
- Можно изменить REM вручную: `ENTER REM`

**ВАЖНО:**
Комментарий ≠ событие. Если при осмотре FRSH добавлен комментарий CYST:
- Результат: 2, комментарий: CYST (краткая пометка)
- Нужно отдельно внести событие CYST
- Программа не распознает комментарий как событие
- Не будет отображаться на странице 1, не учитывается в EVENTS/MONITOR

---

### Прочие события в VENTER

**4 метода внесения дополнительных событий:**

#### Метод 1: Через меню событий

**Процедура:**
1. Результат: `8`
2. Добавить комментарий (опционально)
3. Программа выводит список событий
4. Выбрать нужное → [Enter]
5. Ввести комментарий → [Enter]

**Особенность:**
- Записывается только код события
- Команда НЕ запускается
- EDAY = текущая системная дата
- Пункты можно добавить позже в карточке

#### Метод 2: Прямой ввод события через комментарий

**Синтаксис:**
```
=##myrem
```
- `##` = номер события
- `myrem` = комментарий

**Пример:**
```
=25LUT
```
- Событие 25 (PROST)
- Комментарий: LUT

**Процедура:**
1. Результат: `8`
2. Комментарий: `=25LUT`
3. Появляется окно комментария с LUT
4. Можно изменить → [Enter]

**Особенность:**
- Только код события, команда НЕ выполняется
- Если результат не 8, запись `=25LUT` = просто комментарий

#### Метод 3: Функциональная клавиша для одного события

**Настройка:**
```
8=25LUT
```

**Процедура:**
1. Выбрать поле результата
2. Нажать функциональную клавишу
3. Можно изменить/дополнить комментарий

#### Метод 4: Функциональная клавиша для результата + события

**Синтаксис с разделителем "!":**
```
3CL!8=25LUT
```
- `3` = результат OK
- `CL` = комментарий к результату
- `!` = разделитель
- `8=25` = событие PROST
- `LUT` = комментарий к событию

**Пример множественных событий (до 3):**
```
2PUS!8=38CL!8=25LT!
```
- Результат: 2 (Перепроверка), комментарий: PUS
- Событие EC=38 (гнойный эндометрит), комментарий: CL
- Событие EC=25 (простагландин), комментарий: LT
- Завершающий `!` = переход к следующему животному без [Enter]

**Ограничение:** 19 символов на описание функциональной клавиши

**Использование "!" из поля комментария:**
- Добавить `!` в конце первого комментария
- Появится второе поле результата + комментария
- Добавить `!` в конце второго → третье поле
- Добавить `!` в конце третьего → переход к следующему животному

---

### Функциональные клавиши VENTER (F1-F12)

**Назначение:**
Автоматизация ввода комментариев, результатов и событий

**Возможности:**
- Автоматический ввод комментариев
- Ввод результатов с/без комментария
- Ввод до трех событий с комментариями или без
- Текущие настройки отображены справа на экране

**Примеры настройки функциональных клавиш:**

| Код | Описание |
|-----|----------|
| `=25LUT` | Добавить EC=25 (PROST) с комментарием LUT (ввести 8, затем F-клавишу в поле комментария) |
| `3!8=25LUT` | Результат OK, добавить EC=25 (PROST) с комментарием LUT |
| `4CL!8=25LUT` | Результат Open + комментарий CL, добавить EC=25 (PROST) + комментарий LUT |
| `2CYST!8=31GNRH` | Результат Recheck + комментарий CYST, добавить EC=31 (CYST) + комментарий GNRH |
| `5RH` | Стельность, комментарий RH (правый рог) |
| `3CL!8!8!` | Результат OK + комментарий CL, дважды запросить событие с комментарием |

**Примеры комментариев (REM):**

| Код | Значение |
|-----|----------|
| `CL` | Желтое тело (Corpus Luteum) |
| `RH` | Стельность, правый рог (Right Horn) |
| `F` | Фолликул |
| `LH` | Стельность, левый рог (Left Horn) |
| `TWINS` | Стельность двойней |
| `ROCYST` | Киста правого яичника |

---

### Поддержка базы данных - команда CHKFILE

**Назначение:**
"Набор инструментов" для Dairy Comp с различными модулями обслуживания

**ПРЕДУПРЕЖДЕНИЕ:**
При небрежном использовании может причинить значительный ущерб

**Обычное использование:**
Запуск только по запросу службы поддержки при диагностировании проблем

#### Синтаксис CHKFILE

| Параметр | Значение |
|----------|----------|
| Команда | CHKFILE |
| Список пунктов | Нет |
| Условие FOR | Допустимо в некоторых опциях |
| Условие BY | Допустимо в некоторых опциях |
| Ключи | `\n` = выбрать пункт меню "n" |

**Запуск без ключей:**
```
CHKFILE
```
Выводит список опций

#### Опции CHKFILE

**1. Показать свободные ID**

**Назначение:**
Найти неиспользуемые ID номера

**Процесс:**
1. Программа запрашивает интервал номеров
2. Выводит список свободных ID в диапазоне

**Применение:**
Для пользователей, использующих бирки повторно

**2. Отметить выбывших животных**

**Назначение:**
Отметить животных как выбывших для последующей очистки через CLEANUP

**Применение:**
Обычно не используется (достаточно команд SOLD, DIED, SEND, DELETE)

**3. Проверить таблицу доступа**

**Проблема:**
Номер секции в "таблице доступа" (внутренняя справочная таблица) не совпадает с записями животного

**Процесс:**
1. Такие животные отмечаются флажком
2. Можно задать верный номер секции
3. Опция "Исправить таблицу доступа" устраняет проблемы во всей базе

**4. Очистить даты тестов / лактации / недельные показатели**

**Назначение:**
Удаление данных:
- **Даты тестов** → очистить страницу 4
- **Лактации** → очистить страницу 5
- **Недельные показатели** → очистить страницу 6

**Процесс:**
1. Если нет условия FOR → программа запросит ID коров
2. С условием FOR → очистит всех животных, соответствующих критериям

**ВНИМАНИЕ:**
Будьте осторожны при использовании

**Применение:**
Обычно при проблемах с загрузкой данных через DHI LOAD

**5. Управление флажками (метками)**

**Назначение:**
Настройка или очистка поисковой таблицы флажков для:
- Удаления информации о животных
- Отправки данных в DHI
- Других операций

**ВАЖНО:**
Не использовать, если не понимаете, что такое поисковая таблица

**6. Найти дублирующиеся пункты**

**Назначение:**
Проверка базы данных на наличие дублирующихся пунктов

**Пример использования:**
```
CHKFILE RESP FOR FDAT>0 DDAT=0
```
Отчет по коровам в доении, у которых повторяется или отсутствует номер передатчика (для Daily Milk)

**Применение:**
Поиск ошибок при использовании Daily Milk (один номер передатчика разным животным)

**7. Удалить дату теста**

**Назначение:**
Удаление неверной даты контрольной дойки, присвоенной при загрузке через DHI RECEIVE

**Процесс:**
1. Программа запрашивает дату для удаления
2. Удаляет эту дату из всех карточек коров

**Преимущество:**
Намного легче, чем редактировать карточки по одной

**8. Показать таблицу доступа**

**Назначение:**
Проверка таблицы доступа на ошибки и повреждения

**Применение:**
В основном для программистов и службы поддержки

**9. Восстановить таблицу доступа**

**Назначение:**
Попытка восстановления поврежденной таблицы доступа

**Результат:**
- Не всегда срабатывает
- Обычно устраняет самые типичные проблемы
- Если не помогает → обратиться в поддержку

---

### Ежедневное резервное копирование

**Настоятельная рекомендация:**
ОБЯЗАТЕЛЬНО использовать резервное копирование!

#### Способы создания резервной копии

**Команды:**
- `SAVE` - запуск резервного копирования
- `EXIT` - с запросом резервного копирования
- `EXIT\B` - без запроса

**Механизм:**
При выборе "Резервная копия" в EXIT выполняется команда "Сжатое резервное копирование DOS" из меню SETUP

#### Настройка резервного копирования

**Рекомендуемая настройка в SETUP:**
```
C:\COMMAND.COM /C DB.BAT
```

**Предполагается:**
1. COMMAND.COM расположена в корне диска C:
2. Файл DB.BAT находится в той же папке, что и Dairy Comp

#### Файл DB.BAT

**Параметры, передаваемые Dairy Comp:**
1. Имя базы данных
2. Имя сжатого файла

**Примеры вызова:**
```
DB C:COWFILE1.DAT 35123456
DB D:\SMITH\COWFILE1.DAT SMITH
```
- Параметр 1: имя базы данных
- Параметр 2: имя папки или DHI ID стада

#### Режим Multiherd и DB.BAT

**Проблема:**
- Файлы баз данных хранятся в именных папках (например, D:\JONES)
- При запуске через автоменю Dairy Comp видит только D:COWFILE1.DAT
- Полное имя: D:\JONES\COWFILE1.DAT
- Для архива используется ID стада

**Решение:**
1. Запускать программу только командой `DC`
2. Прописать "Стартовый каталог Multiherd" в меню SETUP
3. Программа будет видеть полный путь к файлу
4. Для архива будет использовано правильное имя

**Пример:**
- Стартовый каталог: D:\
- База данных: D:\JONES\COWFILE1.DAT
- Файл архива: A:JONES.ZIP

#### Настройка командного файла DB.BAT

**Возможные изменения:**
- Заменить диск A: на диск D: или ZIP
- Добавить дополнительные файлы в архив:
  - SEMFILE1.DAT (учет генетического материала)
  - DCWIN.INI
  - DCMENU.DAT (ниспадающее меню)

**Метод:**
Добавить названия файлов в команду PKZIP

#### Восстановление из резервной копии

**Процедура:**
1. Изменить папку для сохранения распакованного файла
2. Запустить команду:
```
PKUNZIP A:12345678
```
где "12345678" = имя архивного файла

#### PKWARE

**Важно:**
- PKZIP и PKUNZIP - зарегистрированные товарные знаки PKWare, Inc, Milwaukee, WI
- При использовании условно-бесплатного ПО необходимо зарегистрировать

---

## Часть 15 (страницы 141-150)

### Команда CLONE

**Назначение:**
Копирование части одной базы данных в другую

**Применение:**
Для пользователей с несколькими базами данных:
- Внести изменения в одну базу
- Быстро скопировать их в остальные базы

**ВАЖНО:**
Команда ABSORB заменяет большинство функций CLONE. Рекомендуется:
1. CREATE пустых баз на основе продуманной базы
2. ABSORB для переноса данных

#### Синтаксис CLONE

| Параметр | Значение |
|----------|----------|
| Команда | CLONE |
| Список пунктов | Нет |
| Условие FOR | Нет |
| Условие BY | Нет |
| Ключи | `\nd{fileext}d{menuchoice}` |

**Ключи:**
- `n` = номер конечной базы данных
- `d` = имя диска конечной базы
- `{fileext}` = тип: DAT, ARC, или BAK
- вторая `d` = имя диска исходной базы
- `{menuchoice}` = пункт меню CLONE

**Пример:**
```
CLONE \1DBAK
```
Скопирует в D:COWFILE1.BAK

**ПРЕДУПРЕЖДЕНИЕ:**
- При неосторожном использовании ОЧЕНЬ ОПАСНА
- Необходимо хорошо понимать формат базы данных
- В некоторых случаях создавать FILEOUT для конечной базы (информация может стать недоступной)

**Применение для одной базы:**
Восстановление поврежденных заголовков копированием из другой базы

#### Опции CLONE

**1. Таблица пунктов**

Копировать всю таблицу пунктов

**ВАЖНО:**
- Если пункты находятся в разных местах → станут недоступны
- Предварительно использовать FILEOUT для сохранения информации

**2. Аббревиатуры команд**

Копировать весь список аббревиатур команд

**Примечание:**
Есть более предпочтительный способ:
- Сохранение определений в файл на диске
- Загрузка из файла
- См. раздел "Копирование аббревиатур команд"

**3. Настройки карточки коровы**

Копировать расположение пунктов в карточке коровы

**ВАЖНО:**
- В заголовочном файле сохраняются НОМЕРА пунктов, не названия
- Убедитесь, что таблицы пунктов совпадают

**4. Названия событий**

Копировать номера и названия событий

**ВНИМАНИЕ:**
У животных в конечной базе могут быть другие номера событий

**5. Ветеринарные условия и напоминания**

Копировать условия отбора на ветеринарный осмотр и напоминания

**6. Таблица отела**

Копировать список пунктов для обработки при событии FRESH:
- Удаляемые пункты
- Сохраняемые пункты
- Копируемые теленку

**ВАЖНО:**
Убедитесь, что таблицы пунктов совпадают, или скопируйте таблицу пунктов вместе с таблицей отела

**7. Таблица секций**

Копировать описание секций

**ВНИМАНИЕ:**
Будьте осторожны, если одна или более секций определены как секция с быком

**8. Настройки DAILY MILK**

Копирует:
- "Число доений" (Times Milked)
- Анализ ошибок daily milk
- Даты последних доений

**Применение:**
Только если используете daily milk. Убедитесь, что даты на странице 6 совпадают

**9. Данные контрольных доек**

Копирует:
- Источник DHI
- Информацию через RECEIVE
- Формат страницы 4 карточки коровы

**Применение:**
Редко используется (немногие используют несколько интерфейсов DHI)
Обычно используется команда CONVERT

**10. Фактор ME**

Редко используемая опция

**Альтернатива:**
- Команда CONVERT может считывать факторы возрастного коэффициента
- Факторы автоматически добавляются в каждую созданную базу

**11. Таблица MONITOR**

Копирует всю таблицу MONITOR (столбцы и строки)

**ВАЖНО:**
Убедитесь в идентичности таблиц пунктов

**12. Таблица осеменений**

Включает:
- Имена и номера техников
- Коды схем осеменения

**Примечание:**
Можно задать номера техников заново после клонирования (через CHKFILE)

#### Основные принципы CLONE

**Главное:**
Использовать осторожно!

**Чаще всего копируют:**
- Таблица пунктов
- Аббревиатуры команд
- Настройки карточки коровы
- Иногда: изменения в таблице событий

**Рекомендация для нескольких баз:**
1. Выбрать одну базу как "основную"
2. Вносить все изменения пунктов и команд в ней
3. После проверки переносить в остальные базы

**Текущее применение:**
- Функционал выполняется командой ABSORB
- CLONE используется в основном для восстановления поврежденных заголовочных файлов
- Метод: копирование данных из файла резервной копии

---

### Команда CONVERT

**Две функции:**
1. Автоматическое преобразование базы данных
2. Обработка данных для интерфейсов DHI

**Применение:**
Возможно, никогда не придется использовать (большинство функций выполняются автоматически)

**ПРЕДУПРЕЖДЕНИЕ:**
При неосторожном использовании может принести много проблем

#### Синтаксис CONVERT

| Параметр | Значение |
|----------|----------|
| Команда | CONVERT |
| Список пунктов | Нет |
| Условие FOR | Нет |
| Условие BY | Нет |
| Ключи | Нет |

#### Опции CONVERT

**Функции при начале работы со стадами:**
- Установить прогнозируемый надой
- Пересчитать лактационные кривые
- Создать лактации на основе TOTM
- Определение возрастных коэффициентов

**Настройка таблицы RECEIVE:**

**Назначение:**
- Изменять структуру страницы 4 карточки коровы
- Добавлять пункты прогнозов надоя при RECEIVE

**Работает:**
- В стадах DHIA
- В пользовательских стадах

**Пример:**
Некоторые центры DRPC предоставляют данные MLM (management level milk) при каждом тесте
→ Можно добавить пункт для хранения этой информации

**Выбор DHI:**

Опция "Выбрать DHI" для выбора центра DRPC

**Пункт 1:** "Пользовательский"

**Средние показатели стада:**

**Возможность:**
Задавать разные средние показатели для разных пород

**Пример:**
Средние показатели Голштинской породы отдельно от породы Джерси

**Результат:**
Более точные значения RELV в стадах с животными разных пород

**Настройка пунктов SEND:**

**Назначение:**
Отправка дополнительной информации в центр DRPC

**Процесс:**
- Пункты не стандартные (не распознаются автоматически)
- Нужно создать и определить в этом разделе

**Пункты на экране настройки:**
1. Информация о телятах (только телки или + комментарии к FRESH)
2-4. Информация о новых телятах (3 пункта)
5-8. Данные о легкости отела (4 пункта)

**Зависимость:**
От требований центра DRPC

**Фактор ME:**

**Назначение:**
Загрузить данные возрастного эквивалента для региона

**Применение:**
- Обычно при установке программы
- Не требует изменений
- Необходим файл DR.0ME

---

### Команда DIR

**Функция:**
Аналогична команде VIEW

**Действие:**
Выводит стандартное окно поиска файлов
→ Можно выбрать текстовый файл
→ Открыть в обозревателе

---

### Команда DROPDOS

**Назначение:**
Открыть новое диалоговое окно MS-DOS в папке Dairy Comp

**Возможности:**
- Выполнять операции DOS
- Копировать файлы
- И т.д.

**ПРЕДУПРЕЖДЕНИЕ:**
Не переместить/удалить саму базу данных случайно!

**Поведение:**
Dairy Comp сворачивается пока открыто окно DOS

**Возврат в Dairy Comp:**
```
EXIT
```

---

### Команда EXEC

**Назначение:**
Запуск внешних командных файлов

**Синтаксис:**
```
EXEC\BXYZ
```
Запустит файл XYZ.BAT

**Поведение:**
Dairy Comp сворачивается пока открыто окно командного файла

**Применение:**
- Работа с доильными программами
- Другие интерфейсы внешних программ

---

### Команда STATUS

**Назначение:**
Вывод информации о параметрах базы данных

**Отображаемая информация:**
- Имя базы данных
- ID стада
- Размер файла
- Дата последней очистки CLEANUP
- Информация о принтере
- Информация о мониторе
- Информация CONFIG.SYS
- Данные DHI

**Применение:**
Полезна при диагностике некоторых проблем

#### Синтаксис STATUS

| Параметр | Значение |
|----------|----------|
| Команда | STATUS |
| Список пунктов | Нет |
| Условие FOR | Нет |
| Условие BY | Нет |
| Ключи | Нет |

---

### Команда UPGRADE

**Назначение:**
Преобразование базы данных и установка обновлений до новой версии

**Функции:**
- Проверяет файл описания пунктов (DESCRIP.TXT)
- Обеспечивает доступность описаний пунктов при обновлении

**Подтверждение:**

**Назначение:**
- Продление срока использования программы
- Актуализация информации о лицензии
- Ввод серийного номера

**Преобразование меню в текст:**

**Возможности:**
1. Сохранить ниспадающее меню в текстовый файл
2. Импортировать текстовый файл с данными меню

**ПРЕДУПРЕЖДЕНИЕ:**
Будьте предельно внимательны!

**Применение:**
- Специалисты поддержки
- Опытные пользователи, понимающие формат текстовых файлов меню

---

### Команда VIEW

**Функция:**
Аналогична команде DIR

**Действие:**
Выводит стандартное окно поиска файлов
→ Можно выбрать текстовый файл
→ Открыть в обозревателе

---

### Команда ABSORB

**Назначение:**
Импорт информации о животных из "сторонних" баз данных

**"Сторонние" базы данных:**
Базы с отличными таблицами пунктов, событий и т.д.

**Краткое описание:**
"Интеллектуальный пакетный вариант GETCOW"

**Процесс:**
При перемещении животных ABSORB переносит их события и пункты (насколько возможно)

**Результат:**
Данные доступны для отчетов, графиков и таблицы MONITOR

#### Важные моменты

**1. Замещение животных:**

При использовании ABSORB замещаются ВСЕ животные в текущей базе данных:
- Все коровы из исходной базы
- Все занесенные в архив
- Процесс начинается с сжатого файла резервной копии
- Если содержит архив (cowfile1.arc) → в текущей базе будет архив за последний год

**ВАЖНО:**
- Убедитесь, что конечная база данных пуста
- Или содержит информацию, которую можно удалить
- Данные записываются поверх существующих
- Данные MONITOR НЕ переносятся

**2. Заголовочные файлы:**

В конечной базе данных НЕ изменяются:
- Таблица пунктов
- Таблица событий
- MONITOR
- И т.д.

**Предполагается:**
Таблицы пунктов и событий заданы верно

**Процесс:**
ABSORB переносит записи коров + конвертирует некоторые пункты и события на основании карты размещения

#### Методы команды ABSORB

**Метод 1: Простое перемещение**

**Применение:**
Наиболее часто используемый способ

**Когда использовать:**
- Конечная база данных пуста
- Или не содержит пользовательских данных

**Примеры использования:**
- Перенос из "тестовой" базы → преобразование в версию Scout
- Пробное копирование в ветеринарную систему
- **Важно:** Импорт базы данных в программы консультантов

**Действия:**
- Импорт базы данных
- Преобразование событий и пунктов при необходимости

**Метод 2: Перемещение с сохранением ветеринарной информации**

**Главная задача:**
Сохранение данных, адаптированных к базе ветеринара

**Что переносится автоматически:**
- Последние события: FRESH, DRY, BRED и т.д.

**Что сохраняется:**
- "Ветеринарные" события и комментарии: "PREG 2CLU", OK, MAST
- События, связанные с метаболизмом

**ВАЖНО:**
Использовать ТОЛЬКО когда ветеринарные данные вводит только ветеринар

**Примечание:**
Это не долгосрочное решение. Для импорта из Scout лучше использовать простое перемещение

**Возможность:**
Сохранить определенный набор пунктов, заданный ветеринаром (например, баллы упитанности)

**Указание пунктов:**
Можно указать, какие пункты сохранить при импорте

**Предупреждение:**
Пункты из исходной базы, которых нет в конечной, будут потеряны

**Рекомендация:**
Копирование из ветеринарной базы - не лучший вариант. События нужно вносить в пользовательскую базу данных, не в файл ветеринара

#### Использование ABSORB

**Источник импорта:**
Почти всегда - сжатый файл резервной копии

**Требования:**
- Файл PKUNZIP.EXE должен быть в папке программы
- Если нет: создать строку "PKUN" с указанием пути (например, "PKUN C:\BIN\")

**Рекомендация:**
Распаковывать файлы в C:\TEMP

**Процесс:**
1. Программа запрашивает расположение сжатого файла (обычно A:)
2. Предлагает базу на выбор
3. Исходная база распаковывается во временную папку
4. Переносится в базу данных ветеринара

**Преимущества ABSORB:**
- Достаточно легкий импорт баз данных
- Ветеринар может использовать собственный набор команд и меню
- Ветеринар может добавлять, изменять, переименовывать пункты
- Ветеринар может формировать MONITOR с нужными настройками
- Не будет проблем, если ветеринар что-то пропустит
- Легко обрабатывать данные таблицы отела и данные по телятам

**Результат:**
- Полная уверенность в точности баз данных
- Минимизирован ввод данных

**Ветеринарная информация:**

**Главная цель:**
Исключить или минимизировать ввод данных вручную

**Рекомендация:**
Все манипуляции производить в базе данных владельца фермы

**Предупреждение:**

Значения сохраненных пунктов в конечной базе данных, которых нет в импортируемой базе, будут обнулены

**Решение:**
Попробовать запустить с ключом `\O` - программа покажет список пунктов, которые будут потеряны

#### Файл определений ABSORB

**Файл:** ABSORB.DEF

**При запуске ABSORB:**
- Сравнивает события в импортируемой и конечной базах
- При обнаружении нового события → запрашивает привязку

**Возможности настройки:**
- Импорт только первого события
- Импорт событий после определенной даты
- Определение минимального промежутка времени между событиями

**Формат карты привязки событий:**
```
E old_event_name new_event_name
```

**Пример:**
```
E MLKFVR MF
```
Преобразует исходное событие "MLKFVR" в "MF"

**ВАЖНО:**
События в конечной базе данных должны быть заданы ДО запуска ABSORB

**Примечание:**
В процессе импорта создать новое событие невозможно

**Если нужно новое событие:**
1. Отменить импорт
2. Откорректировать файл DEF (изменить DELETE на новое название)
3. Добавить новое событие в конечную базу (меню «Опции»)
4. Перезапустить ABSORB

**Редактирование файла DEF:**

Строки начинаются с определенной буквы:

| Код | Функция |
|-----|---------|
| `I INAME` | Сохранить, затем вернуть пункт "IName" |
| `F INAME` | Сохранить, затем вернуть пункт "IName", но ТОЛЬКО если корова не телилась |
| `T OINAME NINAME` | Сохранить входящий пункт "OINAME" как "NINAME" |

**Пример преобразования пункта:**
```
T BSCOR BDYSC
```
Пункт "BSCOR" из импортируемой базы → "BDYSC" в новой базе

**ВАЖНО:**
Буква "E", "I", или "T" ДОЛЖНА быть первой в строке

**Применение файла DEF:**
После создания используется при следующем запуске ABSORB

**Вопросы:**
Возникнут только если новые события были добавлены в базу с момента последнего импорта

#### Ключи ABSORB

**Замены в меню:**

| Ключ | Описание |
|------|----------|
| `\V` | Сохранить и восстановить события и пункты |
| `\I` | Инициализировать стадо; сконвертировать в версию scout |
| `\O` | Сравнить пункты. Подразумевает \I |

**Импорт архивных файлов:**

| Ключ | Описание |
|------|----------|
| `\A` | Импортировать данные из архивных файлов (по умолчанию, если создан ftechx.def) |
| `\X` | НЕ импортировать архивные файлы, переписать FTECHX.DEF |

**Прочее:**

| Ключ | Описание |
|------|----------|
| `\Sn` | Выбрать базу данных "n" для импорта. Без "n" → запрос номера базы |
| `\F` | CAFtech; игнорировать несовпадающие события > 18 |
| `\M` | Импортировать MONITOR |
| `\E` | Взять информацию по техникам и надой "как есть", игнорируя daily milk |
| `\Nnd` | Не распаковывать, использовать базу "n" на диске "d" (для пакетного импорта) |
| `\N0*` | Взять файл cowfile0.dat из папки базы данных |

**Примечание:**
Другие ключи добавляются к \N, например, для пакетного импорта `\N1AI`

**Строки в SETUP:**

| Строка | Описание |
|--------|----------|
| `PKUN d:\dir` | Расположение файла pkunzip |
| `ABSD d:\dir` | Переопределяет использование c:\temp (возможно, для ramdrive) |
| `ADYS n` | Импортировать архив за "n" дней (по умолчанию 365) |

---

## Часть 16 (страницы 151-160)

### Команда CLEANUP

**Назначение:**
Периодические организационные манипуляции с данными в базе

**Четыре основные функции:**
1. Архивировать неактуальную информацию по предыдущим лактациям или выбывшим животным
2. Создать копию базы данных
3. Пересортировать животных для более быстрого формирования отчетов
4. Адаптировать размер базы данных при изменении количества животных

#### Создаваемые файлы

**Два файла при CLEANUP:**

**1. Архивный файл (COWFILE#.ARC):**
- Информация о выбывших из стада животных
- Записи о предыдущих лактациях недавно отелившихся коров
- Впоследствии добавляется архивная информация

**2. Резервная копия (COWFILE#.BAK):**
- Вся база данных в том виде, как была непосредственно перед CLEANUP
- Информация каждый раз перезаписывается

**Значимость архивных файлов:**
- Основа аналитики DC305
- Можно просмотреть предыдущие лактации (F3 в карточке коровы)
- Команды берут информацию из архивов:
  - BREDSUM (всегда)
  - EVENTS (всегда)
  - ECON (всегда)
  - SUM и PCT (ключ \A включает архивные данные)

#### CLEANUP и ежедневные резервные копии

**ВАЖНО понимать различие:**

**Ежедневное резервное копирование:**
- ПЕРВОСТЕПЕННОЕ значение
- Сохраняет все данные на стороннем носителе каждый день
- См. разделы "Ежедневное резервное копирование" и "Команда SAVE"

**CLEANUP:**
- Периодическая организация данных
- Создание архива и резервной копии

#### Когда запускать CLEANUP

**Рекомендация:**
По меньшей мере раз в месяц

**Причины:**
- Можно восстановить данные животного месячной давности
- Освобождение места при добавлении новых животных (через NEWC или телят)
- Освобождение ID выбывших животных для повторного использования

**Предупреждения программы:**
При добавлении новых животных, если недостаточно места

#### Обычная процедура CLEANUP

Запускает CLEANUP с текущими настройками

**Если архивный файл отсутствует:**
Программа предложит:
- Создать файл ARC
- Пропустить создание
- Отменить процедуру CLEANUP

**Примечание Multi-Herd:**
При использовании Multi-Herd имена дисков в настройках указывать как `*`
→ Все файлы сохраняются в той же папке, где COWFILE1.DAT

#### Синтаксис CLEANUP

**Ключи:**
Функции зависят от расположения в строке

**Позиции:**
- Первая буква: имя диска для файла архива
- Вторая буква: имя диска для резервной копии
- Число после ключей: желаемый размер базы данных

**Пример:**
```
CLEANUP\AC
```
- Файл COWFILE1.ARC на диске A:
- Файл COWFILE1.BAK на диске C:

**Размер базы данных:**
- По умолчанию: увеличение на 20% от текущего размера (не считая архивы)
- Можно указать больше при массовом добавлении через PUTCOW или ADD

**Отмена создания архива:**
Добавить "X" вместо имени диска для архива

**Ключ `\2`:**
```
CLEANUP\2
```
Запуск без запросов (можно задать планировщику)

**Таблица ключей CLEANUP:**

| Ключ | Описание |
|------|----------|
| `\ab` | "a" = диск для ARC, "b" = диск для BAK |
| `\abNNNN` | То же + установить размер базы данных "nnnn" |
| `2` | Вариант 2 - Cleanup без запросов. Можно установить планировщику |
| `4` | Проверить логичность даты по алгоритмам DHIA |
| `A` | Проверяет файлы архивов и удаляет дублирующиеся записи |
| `R` | Переименовать файлы ARC (1→2, 2→3, и т.д., удалить 9) |

**Примечание:**
- Имя диска "X" для архива или резервной копии отменит создание этих файлов
- Ключи в команде имеют приоритет над установками меню
- Рекомендация: прописать предпочтения в настройках вместо использования ключей

#### Настройки CLEANUP

**Изменить настройки CLEANUP:**
Задать настройки процедуры CLEANUP

**Сбросить все настройки:**
- Установит все значения как "неопределено"
- Программа будет запрашивать имена дисков и размер базы в процессе CLEANUP

**Диск для резервной копии по умолчанию:**

**Назначение:**
Установить определенный диск для сохранения Cowfile#.BAK

**Обычно:**
Тот же диск, что и база данных

**НЕ рекомендуется дискета:**
- Не хватит места для BAK и ARC файлов
- Проще использовать SAVE для сжатия и записи на дискету

**Режим multiherd:**
Указать имя диска как `*` → сохранение в той же директории, где база данных

**Размер файла архива:**

**Возможность:**
Сохранять на дискету

**Рекомендация:**
Даже при сохранении на жесткий диск ограничить размер размером дискеты
→ Можно в любой момент скопировать на дискету без распаковки

**Варианты:**
1. Неопределен (по запросу)
2. 250 коров (диск 5.25" LoDens)
3. 1000 коров (диск 5.25" HiDens)
4. 600 коров (диск 3.5" LoDens)
5. 1300 коров (диск 3.5" HiDens)
6. Установить вручную

**Удаление записей выбывших коров:**

**Отличие от завершенных лактаций:**
Завершенные лактации архивируются и удаляются автоматически

**Подменю удаления выбывших животных:**
1. Без изменений
2. НЕ удалять выбывших коров
4. Указать число дней - контроль периода хранения

**Варианты:**
- Никогда не удалять
- Удалять при каждом CLEANUP
- Удалять через определенное время

**Влияние избыточного количества записей:**
- Размер базы данных увеличивается
- База работает медленнее
- Отчеты формируются дольше

**Рекомендации:**

Если информация нужна:
- Установить определенный период сохранения (например, 365 дней)

Если информация требуется редко:
- Выбрать удаление сразу
- При необходимости использовать GETCOW для извлечения из архива

Если отправляете данные в DRPC:
- Сохранять данные выбывших по меньшей мере один тестовый интервал (45 или 60 дней)

Если часто используете ID заново:
- Удалять записи выбывших сразу

**ВАЖНО:**
Записи удаляются из базы только после копирования в файл архива

**Удаление записей выбывших первотелок:**

**Назначение:**
Контролировать выбывших первотелок отдельно от взрослых коров

**Пример применения:**
- Удалять взрослых коров сразу (для повторного использования ID)
- Записи первотелок оставлять для статистики по падежу телят

#### Проблемы в CLEANUP

**1. Заполненный файл архива:**

Наиболее распространенная проблема

**Проверить:**
На какой диск записывается файл архива (дискета A:/B: или жесткий диск C:)

**Если на дискету:**
1. Остановить CLEANUP
2. Найти и вставить чистую дискету
3. Перезапустить CLEANUP
→ Программа создаст новый файл архива

**Если на жесткий диск:**
- Переименовать архивные файлы
- Создать новый файл COWFILE1.ARC

**Рекомендация:**
Все архивные файлы должны быть доступны для аналитических команд

**2. Недостаточно места для резервной копии:**

Dairy Comp остановит выполнение CLEANUP

**Решение:**
Удалить некоторые файлы на жестком диске для освобождения места

#### Опасности CLEANUP

**Опасный момент:**
Время между созданием файла резервной копии и переформированием файла DAT

**Проблема:**
- COWFILE1.DAT нестабилен
- В случае повреждения диска или сбоя электропитания может быть потерян

**Решение при потере файла DAT:**
1. Использовать файл резервной копии в качестве файла DAT
2. Нет потери информации (копия создана до начала переорганизации)
3. Программа определит проблему при запуске
4. В DOS скопировать файл:
```
COPY COWFILE1.BAK COWFILE1.DAT
```
5. Перезапустить CLEANUP

**Результат:**
Данные не будут потеряны

#### Логика файла архива

**Команды с обработкой архивных записей:**

| Команда | Использование архива |
|---------|---------------------|
| BREDSUM | Всегда |
| EVENTS | Всегда |
| PLOT\R и PLOT\L | `\L` означает брать информацию из архивных файлов |
| SUM\L | С ключом \L |
| FILEIO\L | С ключом \L |
| EXAM\L | С ключом \L |

**Записи в архиве - три типа:**
1. Записи выбывших животных (добавляются событиями SOLD и DIED) в базе данных
2. Данные предыдущих лактаций (добавляются событием FRESH) в базе данных
3. Прочие записи в архиве

**Для корректной работы с архивами:**
- В настройках CLEANUP установить период сохранения записей: 365 дней
- Все файлы архива расположены на диске C в папке Dairy Comp

#### Логика файла архива - приоритет

**Приоритет 1: Строка "ARCP"**

Если создана строка "ARCP", определяющая путь к файлам архива:
- Программа использует эту строку
- Все файлы .ARC по этому пути будут доступны

**Примеры:**
```
ARCP C
```
Берет файлы C:COWFILE1.ARC, C:COWFILE2.ARC, и т.д.

```
ARCP C:\ARCHIVES
```
Берет файлы C:\ARCHIVES\COWFILE1.ARC, C:\ARCHIVES\COWFILE2.ARC, и т.д.

```
ARCP X
```
Отключает поиск файлов архива

**Результат:**
При использовании ARCP программа берет для аналитики все файлы архива, независимо от номера базы данных и номера файла архива

**Приоритет 2: Если строка ARCP не прописана**

**a) Режим Multiherd активирован:**
(Указан «Стартовый каталог Multiherd» в меню «Настройки»)

- Программа берет файлы архива в той же папке, где файл базы данных
- НЕ учитывается имя диска для файла архива из настроек CLEANUP
- Необходимо указывать как `*` (создавать в папках баз данных) или `X` (не создавать)
- Не указывайте другие имена дисков при работе в multiherd:
  1. В файлах архива будут данные разных баз
  2. Аналитические команды все равно будут искать файлы архива в папках с базами данных

**b) Режим multiherd НЕ включен:**

- Программа берет только файл d:COWFILEn.ARC
  - `n` = номер базы данных
  - `d:` = имя диска из настроек CLEANUP

**Пример:**
Работа в базе d:COWFILE3.DAT → программа возьмет файл d:COWFILE3.ARC

**Результат:**
Программа читает только файл архива, соответствующий текущей базе данных

**Для анализа данных из других архивов:**
Использовать управляющую строку ARCP (если multiherd не включен)

**Если путь к архиву указан как "X":**
- Файлы архива НЕ используются для анализа
- Аналитические процедуры берут данные выбывших животных из базы данных

**Если файл архива указан, но не найден:**
Программа работает так же, как если бы папка архива была указана как «Х»

**ВАЖНО:**
При отсутствии файлов архива меняется выбор информации для аналитики

**Примечание:**
- Программа не берет файлы архива с дискет
- Для использования старых архивов: скопировать файлы в соответствующие папки и переименовать в COWFILE2.ARC, COWFILE3.ARC и т.д.
- Если multiherd не активирован: для включения файлов архива другой базы данных использовать строку ARCP

#### Завершенные лактации

**Настройки CLEANUP:**
Позволяют сохранять данные завершенных лактаций в течение определенного времени

**Применение:**
Для пользователей, не сохраняющих файлы архива (специалисты DHI, консультанты)

**Обычный период сохранения:**
365 дней

#### Данные для анализа

**Если поиск в архивных файлах разрешен и найден хотя бы один файл архива:**

Программа возьмет:
- ВСЕ записи из архива
- Все данные живых коров в базе данных
- Все записи, помеченные на архивацию (недавно выбывшие животные и недавние завершенные лактации)

**НЕ будут учтены:**
Данные выбывших коров в базе данных (предполагается, что они должны быть в архиве)

**Если поиск в архивных файлах отключен (`X`) или файлы не найдены:**

Аналитические команды берут:
- Данные всех живых и павших коров в базе данных
- Данные всех прошедших лактаций в базе данных
- НЕ анализируют архивные данные

**Рекомендации при использовании файлов архива:**

1. Добавить строку `ARCP C:` для доступности всех файлов архива
2. Настроить CLEANUP на сохранение записей выбывших животных и завершенных лактаций: 365 дней
3. Если несколько баз данных → перевести программу в режим multiherd

**Результат:**
Программа сама контролирует записи в архиве и в базе данных

#### Проверка логики данных

**Команда:** `CLEANUP\4`

**Назначение:**
Проверка целостности данных

**Выявляет:**
- Животные с неуказанной датой рождения или отела
- Правильность репродуктивных кодов

**Процесс:**
1. Программа запрашивает номера ошибок
2. Присваивает номера животным при выявлении несоответствий
3. В дальнейшем можно найти этих животных по коду ошибки

**Список наиболее распространенных ошибок:**

| Код | Ошибка |
|-----|--------|
| 1 | LACT=0 FDAT>0 |
| 2 | LACT>0 FDAT=0 |
| 3 | RPRO=5 CDAT=0 |
| 4 | RPRO=6 CDAT=0 |
| 5 | RPRO<5 CDAT>0 |
| 6 | RPRO=4 HDAT=0 |
| 7 | RPRO=1 CDAT>0 |

**Напоминание - репродуктивные коды:**
1. Не осеменять
2. Отел
3. Яловая
4. Осеменение
5. Стельность
6. Сухостой

---

### Быки и реестр генетического материала

**Инструменты:**
- **Команда SIRES** - просмотр информации по быкам
- **Процедура BullsEye** - выбор наиболее выгодного варианта
- **Модуль SEMINV** (Semen Inventory) - поддержка файла реестра семени

**Файл DCSIRES.DAT:**
Регулярно создается и рассылается с актуальными свидетельствами

---

### Команда SIRES

**Назначение:**
Просмотр данных отдельных быков

**Обновление:**
Файл информации по быкам обновляется дважды в год (январь и июль) USDA и ассоциацией породы

**BULLSEYE:**
Опция команды SIRES для выбора среди доступных быков быка с наименьшей стоимостью семени

#### Файл Sire

**Файл:** DCSIRES.DAT

**Составляется из данных:**
- USDA
- NAAB
- Ассоциации пород

**Содержание:**
Около 800 быков различных пород и от разных поставщиков

**Распространение:**
- Рассылается зарегистрированным пользователям дважды в год
- Можно скачать на сайте

#### Показать быка

**Функция:**
Просмотр данных конкретного быка

**Процесс:**
1. Программа выводит список
2. Выбор быка стрелками «вверх»-«вниз» или набрав первые буквы имени
3. Можно отсортировать список:
   - По кодам NAAB
   - По имени
   - По регистрационным номерам
   - С помощью функциональных клавиш

#### Опции команды SIRES

**Составить список быков:**

**Функция:**
Формирование списка быков, соответствующих определенным критериям

**Процесс:**
1. Программа выводит форму
2. Ввести минимальные значения (для «Цена семени» и «SCC» вводятся МАКСИМАЛЬНЫЕ значения)
3. Использовать функциональные клавиши:
   - F3: выбрать определенных поставщиков
   - F4: обнулить значения всех ячеек
   - F5: изменить стандартную сортировку списка
4. F10: завершить ввод значений
5. Программа выводит список пунктов для быков
6. Добавить или удалить пункты из отчета (набрав номер)
7. 0: сформировать отчет
8. Отчет выводится в обозреватель (просмотр и печать)
9. F2: просмотреть данные первого в списке быка
10. Клик мыши: выбрать быка

**Изменить данные быка:**

Выбрать быка и изменить его данные

**Обычное использование:**
Внесение актуальной цены семени

**Анализ - Производители:**

**Функция:**
- Просматривает пункт SID у коров в базе данных
- Определяет средние показатели быков на основе информации в списке быков
- Подсчитывает количество быков в базе данных, по которым есть информация в файле

**Анализ – Быки осеменения:**

**Функция:**
- Просматривает быков осеменения (по событиям BRED) в базе данных
- Определяет средние показатели быков на основе информации в списке быков
- Подсчитывает количество быков в базе данных, по которым есть информация в файле

**Настройки SIRES:**

Импортирование файлов с ценами семени и другие данные

**Чаще всего:**
Обновление файла быков

---

### BullsEye

**Цель:**
Выбрать наиболее выгодных быков и снизить общие затраты на приобретение семени

#### Три стадии работы

**Стадия 1: Минимальные критерии отбора**

**Пользователь задает:**
- Определенные породы и поставщики
- F3: выделить (или снять выделение) нужного поставщика
- Параметры производительности или минимальные баллы упитанности

**Рекомендация:**
Задавать минимально возможные значения

**Ограничение:**
BullsEye может анализировать только 250 быков одновременно

**Процесс:**
1. Ввести все критерии
2. F10: завершить
3. Программа просматривает актуальные свидетельства
4. Отбирает быков, соответствующих заданным параметрам
5. Если найдено более 250 → увеличить значения критериев отбора

**Стадия 2: Целевые показатели**

**Пользователь вносит:**
Целевые показатели (числа должны быть более точными)

**Обычно:**
- Желаемый надой или другие показатели производительности
- Несколько характеристик породы

**Рекомендация:**
Для начала задайте приемлемые цели в не более чем 10 категориях

**Возможность:**
В дальнейшем можно изменить параметры

**При нескольких поставщиках:**
Можно указать предполагаемые скидки

**В конце:**
Указать максимальный процент использования для быка

**Обычно:**
Уровень между 10 и 20% (чтобы выбрать от 5 до 10 быков)

**Стадия 3: Результат**

**Программа отбирает:**
Быков, которые дадут в среднем нужные показатели (из числа быков, соответствующих первоначальным параметрам)

**Обычно:**
От 5 до 15 быков

**Для каждого быка:**

Соответствующего изначальным критериям:
- Процент от общего объема покупки/использования
- Для быков со слишком дорогим семенем: 0

Для неподходящих быков:
- Расчетная стоимость (максимальная цена, при которой этот бык будет выбран для покупки)

**Выбранные быки:**
Соответствуют или превышают указанные целевые показатели

**Просмотр информации:**
- Клик мыши: детальная информация по каждому быку
- F2: для первого быка в списке

#### Комментарии

**Экспериментальная работа:**
Выбор быков методом анализа файла DCSIRES.DAT

**Рекомендация:**
1. Указать минимальные условия и несколько целевых показателей
2. Получить вариант решения
3. Несколько раз перезапускать команду, изменяя условия

**Сохранение критериев:**
Последние указанные критерии сохраняются в памяти программы до выхода из модуля SIRES

**Цена семени:**
Если цена быка не указана → программа считает как $9.99 (чтобы добавить в выборку)
Можно изменить точную цену в разделе «Редактировать» (Edit)

**Если решение не найдено:**
- Слишком мало быков соответствуют критериям
- Выбранные быки не удовлетворяют целевым показателям
→ Изменить параметры и перезапустить команду

#### Заключение

**Ранее:**
- Пользователь задавал минимальные критерии отбора
- Вручную выбирал быков из соответствующих минимумам

**Теперь:**
Аналитические возможности SIRES позволяют оценить средние показатели каждого быка
→ Выбор проще и удобнее

**Зависимость стоимости от целевых показателей:**
При более высоких целевых показателях → стоимость семени выше

**Индивидуальность:**
Целевые показатели отличаются у каждого хозяйства

**Поиск оптимального решения:**
Экспериментальным путем для своей фермы

**Примеры цен:**
- $8.39 за PTAMilk = 2500 (приемлемая)
- $9.10 за PTAMilk = 2600 (высокая)

**Влияние на решение:**
- Процент плодотворного осеменения у быка
- Текущие показатели в стаде

#### Пример использования

**Минимальные критерии:**
1. Запустить BULLSEYE
2. Выбрать Breed as H
3. Выбрать одного поставщика (F3)
4. Нажать 7
5. "Назад" для завершения выбора поставщика
6. Esc для заполнения минимальных критериев
→ Программа отберет от 50 до 100 быков

**Целевой показатель:**
1. Стрелками выбрать PTAMilk
2. Ввести 2500
3. Enter
4. F10 для завершения
5. Enter для принятия скидок по умолчанию
6. Enter для принятия процента 17% по умолчанию

**Результат:**
BULLSEYE просчитывает варианты до набора с наименьшей стоимостью

**Анализ:**
- Средняя цена выбранных и не выбранных быков
- F2: просмотр данных быка вверху списка

**Эксперименты:**

Перезапустить BULLSEYE:
- Оставить минимальные критерии (Esc)
- Установить целевое значение 2600
- Продолжить как выше

**Результат:**
- Другая выборка быков с более высокой ценой
- Разница в цене = маржинальная стоимость повышения показателя PTAMilk
- Затраты указываются под каждым условием

**Дополнительные эксперименты:**

1. Добавить еще одного поставщика (не меняя целевые показатели)
   → Выбор других быков с более низкой ценой
   → Снижение общей стоимости

2. Ограничить процент использования каждого быка до 15%
   → Будет выбрано больше быков
   → Стоимость увеличится

3. Добавить целевые параметры (не меняя минимальные критерии)
   → Выбор быков изменится
   → Стоимость, скорее всего, увеличится

---

### Реестр семени (SEMINV)

**Назначение:**
Ведение файла реестра семени

**Возможности:**
- Добавлять или удалять пайеты
- Удалять быков из списка
- Обновлять информацию
- Составлять и распечатывать отчет по реестру семени

**Последние обновления:**
Расширенные возможности ведения реестра:
- Дополнительные пользовательские пункты (номер контейнера, цена)
- Возможность записывать коды скрещивания (AAA and DMS mating codes)

#### Файл реестра семени

**Файл:** SEMFILE1.DAT

**Процесс:**
При запуске SEMINV программа ищет файл d:SEMFILEn.DAT:
- `d:` = имя диска / папки
- `n` = номер текущей базы данных

**Если файл не существует:**
Программа создаст его

**Ограничение:**
В настоящее время не предусмотрен обмен данными файла реестра семени между базами данных

**Хранение данных:**

**В базе данных:**
- Поля «Бык» (Bull)
- Поля «Пайеты» (Straws)

**Контроль:**
Списание доз контролируется событием BRED автоматически

**Резервное копирование:**
В случае повреждения или потери внешнего файла реестра учет быков и спермодоз сохранится

**Настройка:**
Настроить ежедневное резервное копирование для сохранения файла SEMFILE1.DAT

#### Команда BRED и реестр семени

**При использовании семени:**
Из реестра списывается одна спермодоза

**При повторном осеменении в течение 2 дней:**
- TBRD не увеличивается
- Использованная доза списывается из реестра
→ Сохраняется верный учет расхода

**При разделении пайет:**

**Ключ `\S`:**
```
BRED\S
```

**Процесс:**
1. Программа спросит, списать ли эту пайету из реестра
2. Если доза разделена → при следующем осеменении вводить `BRED\S`

**ВНИМАНИЕ:**
Изменения в реестр вносятся только при добавлении осеменений в базе данных, содержащей информацию реестра
→ Записи осеменений в базе данных по молодняку НЕ влияют на реестр «взрослой» базы данных и наоборот

#### Опции команды SEMINV

**Добавить и удалить спермодозы:**

**Добавление:**
1. Программа запрашивает имя быка и число пайет семени
2. Если быка нет в списке → программа уточнит, правильно ли введено имя

**Удаление:**
Удалить потерянные, поврежденные или проданные пайеты

**Процесс:**
Программа уточнит, сохранить ли имя быка в списке, если число пайет станет равно 0

**Ограничение:**
До 250 имен быков в реестре

**Рекомендация:**
Периодически удалять неиспользуемых быков для точности и актуальности реестра

**Ввод при добавлении/удалении:**
- Ввести ID быка
- ИЛИ F2 для выбора быка из списка, сохраненного в реестре
- Поиск в списке: клавиши «вверх-вниз» или первые символы имени быка

**Печать реестра семени:**

При выборе этой опции:
1. Программа составит актуальный перечень спермодоз
2. Общее число быков в реестре
3. Откроет в обозревателе как отчет

**Ключ для автоматической печати:**
```
SEMINV\I
```

**Другие ключи SEMINV для печати:**

| Ключ | Описание |
|------|----------|
| `\E` | Разделять группы по страницам |
| `\2` | Двойные пробелы |

**Пункты семени:**

**Отличие от других команд:**
SEMINV не предполагает гибких настроек отчета

**Возможности:**
- Определять порядок сортировки
- Перечень пунктов, выводимых в отчет
- Настройки определяются таблицей, а не командой

**Изначально в таблице:**
Около 20 пунктов

**Можно добавить:**
Около 10 дополнительных пунктов

**Ограничение отчета:**
16 пунктов

**ВАЖНО - НЕ изменяйте первые 9 пунктов (до «Цена» (Cost) включительно):**
- При обновлении программы важно, чтобы эти пункты находились на своих местах
- Используются при подсчетах суммарных показателей
- Используются для пунктов, связанных с быками

**Типы пунктов:**
В целом совпадают с типами пунктов DC + несколько новых для племенных свидетельств

**Пункты, привязанные к файлу быков (Sire File linked items):**

**Определение:**
Некоторые пункты можно «привязать» к внешнему файлу с информацией по быкам-производителям

**Опция:**
«Обновить ссылки файла быков» ("Update sire file links")

**Процесс:**
Программа обращается к файлу DCSIRES.DAT и переносит значения пунктов в файл реестра семени

**Файл DCSIRES.DAT содержит:**
- Идентификационные данные USDA
- Племенные свидетельства для всех быков в списке

**Для правильной работы ссылок:**
В реестре семени должны быть внесены:
- Коды NAAB
- Регистрационные номера быков

**НЕ использовать:**
Имена быков (например, BLACKSTAR) - не уникальны, к ним привязывать пункты нельзя

**Получение нового файла:**
Можно скачать на сайте

**При первом запуске SEMINV:**
Создает отчет реестра «по умолчанию»

**Рекомендация:**
Сразу настроить отчет для отображения нужных пунктов

**Ввод пунктов семени:**

**Пример:**
Чтобы внести номер контейнера:
1. Выбрать «Добавить информацию по быку»
2. Выбрать нужные пункты
3. Esc

**Вручную задать значения связанных пунктов:**
Можно, если нужно внести данные быка, которого нет в файле

**ВНИМАНИЕ:**
При выборе опции «Обновить ссылки» эти данные будут перезаписаны

**Важно:**
Значения связанных пунктов добавляются автоматически ТОЛЬКО при запуске опции «Обновить ссылки»

---

## Часть 17 (страницы 161-169)

### Работа с несколькими базами данных

**Назначение режима Multiherd:**
Для ветеринаров, консультантов и выездных сотрудников DHI, хранящих на своих компьютерах данные разных ферм

**Все пользователи в некотором смысле работают в этом режиме:**
- Файл резервной копии (COWFILE1.BAK)
- Файл архива (COWFILE1.ARC)
→ Возможность переносить данные животных для исправления ошибок
→ Восстановление полностью базы данных из резервной копии

**Некоторые пользователи:**
Отдельная база данных (cowfile2.dat) по молодняку

**Команды для всех пользователей:**
- LOGON
- GETCOW
- PUTCOW

**При одновременной работе с несколькими базами в режиме multiherd:**
- CREATE
- CLONE

**В данном руководстве "multiherd":**
Относится к ветеринарам и специалистам DHI, хранящим разные базы данных в разных папках

---

### Команда LOGON

**Назначение:**
«Переключение» на другую базу данных

**Ключи:**
Те же, что при запуске программы из командной строки DOS:
- Указать дату
- Номер базы данных
- Диск, на котором она расположена

**Если одно стадо:**
Программа запрашивает:
1. Имя диска и номер базы данных
2. Текущую дату

**В режиме multiherd:**
- Программа выводит список доступных баз данных
- Ключи дат (`*`, `#`) неактивны
- Можно пропустить список (Escape) и ввести номер и расположение базы данных по запросу

#### Таблица ключей LOGON

| Ключ | Описание |
|------|----------|
| `*` | Не запрашивать текущую дату, использовать системную |
| `#` | Не запрашивать текущую дату, использовать указанную для предыдущей базы |
| `&` | Загрузить файл архива (LOGON\1C& откроет C:COWFILE1.ARC) |
| `^` | Загрузить резервную копию (LOGON\1C^ откроет C:COWFILE1.BAK) |

**Запуск файлов архива и резервных копий:**
- Ключ `\&` → открыть файл архива (.ARC)
- Ключ `\^` → открыть файл резервной копии (.BAK)

#### Примеры LOGON

| Команда | Описание |
|---------|----------|
| `LOGON` | Запросить номер базы данных, имя диска, папку, дату |
| `LOGON \2C` | Загрузить COWFILE2.DAT на диске C |
| `LOGON \2C*` | Загрузить COWFILE2.DAT на диске C, установить системную дату компьютера |
| `LOGON \1C&` | Загрузить файл архива C:COWFILE1.ARC |

**Создание аббревиатур для упрощения:**

**Примеры:**
- `CALF` = `LOGON \2C*` (загрузка базы по молодняку)
- `COW` = `LOGON\1C*` (загрузка основной базы данных)
- `ARCHIVE` = `LOGON\1C&` (быстрый переход к файлу архива)

---

### Команда GETCOW

**Назначение:**
Перенос информации о животном из одной базы данных в другую

**Чаще всего:**
Возврат данных из файла архива или резервной копии в текущую базу данных

**Противоположная команда:**
PUTCOW - переносит информацию ИЗ текущей базы данных в другую базу

**Источники переноса:**
- Файл базы данных (.DAT)
- Файл резервной копии (.BAK)
- Файл архива Dairy Comp (.ARC)

**При переносе из базы данных:**
Программа предложит удалить данные из базы-источника

**Ограничение:**
GETCOW переносит животных по одному

**Для группы животных:**
Предпочтительнее использовать PUTCOW из базы-источника
→ Можно добавлять условие (например, `PUTCOW FOR LACT=0`)

#### Ключи GETCOW

**Использование ключей:**
Ускоряет процесс перемещения данных

**Примеры создания аббревиатур:**

**Восстановление из резервной копии:**
```
FIXCOW = GETCOW \1CBAK
```
Для восстановления данных по корове из резервной копии COWFILE1.BAK на диске C:

**Перенос из базы молодняка:**
```
GETHEIF = GETCOW\2CDAT
```
Перенос животного из COWFILE2.DAT в текущую базу

**Таблица ключей GETCOW:**

| Ключ | Описание |
|------|----------|
| `Z` | Позволяет перенести выбывшую корову |
| `NdXXX` | Автоматический выбор базы данных «n» на диске «d», где ХХХ = DAT, BAK или ARC. Ключи вводить все вместе, например "\2CDAT" |

---

### Команда PUTCOW

**Назначение:**
Перенос данных о животном из текущей базы данных в стороннюю

**Отличие от GETCOW:**
GETCOW переносит данные из сторонней базы в текущую

**Только для файлов DAT:**
НЕ работает с файлами архивов и резервных копий

**Опция автоматического удаления:**
После переноса в базе-источнике

**При выборе «N»:**
Опция удаления животных по одному в процессе переноса

**Если животное существует в конечной базе:**
Программа выведет уведомление и предложит перезаписать данные

**Групповое перемещение:**
```
PUTCOW FOR LACT=0
```
Перенесет весь молодняк

#### Ключи PUTCOW

**Пример создания аббревиатуры:**

**Перенос телят в базу молодняка:**
```
PUTHEIF = PUTCOW FOR LACT=0 \2CD
```
Перенесет всех телят из основной базы в базу молодняка COWFILE2.DAT на диске C:

**Таблица ключей PUTCOW:**

| Ключ | Описание |
|------|----------|
| `Nd` | Выбрать базу данных N на диске d |
| `D` | Удалять животных из текущей базы без запроса |
| `Z` | Перемещать выбывших животных |

---

### Настройки Multiherd

**Стандартный вариант:**
- Большинство пользователей: одна база COWFILE1.DAT
- Некоторые добавляют вторую: COWFILE2.DAT
- Можно загрузить базу данных под номером от 1 до 9

**Проблема для некоторых пользователей:**
- Ветеринары или консультанты работают с более чем 9 базами
- Даже если меньше 9 → отслеживать какая база под каким номером неудобно

**Решение - режим Multiherd:**
- Базы данных хранятся в отдельных папках
- Названия папок совпадают с названиями ферм
- Каждая база данных называется COWFILE1.DAT

**Файлы ежедневных резервных копий:**
Названия совпадают с названиями ферм (например, SMITH.ZIP)

#### Структура каталогов Multiherd

**Рекомендация:**
Создать основную папку C:\HERDS, в которой создать папки для баз данных

**Структура для обычных пользователей:**
```
C:\WP-------|
C:\SPREDSHT-|
C:\DC305----|
C:\HERDS----|
            |-- C:\HERDS\BASIS
            |-- C:\HERDS\SMITH
            |-- C:\HERDS\JONES
            |-- C:\HERDS\BROWN
```

**Структура для специалистов DHI:**
Используют DHI код стада в качестве имен папок:
```
C:\WP-------|
C:\SPREDSHT-|
C:\DC305----|
C:\HERDS----|
            |-- C:\HERDS\41225514
            |-- C:\HERDS\41228012
            |-- C:\HERDS\41228812
            |-- C:\HERDS\41421112
```

#### Переход в режим Multiherd

**Процедура:**
1. Выбрать корневую (стартовую) папку для хранения папок с базами данных
2. Создать папки для каждой базы данных
3. Переместить файлы баз данных в соответствующие папки
4. Переименовать файлы после перемещения → каждая база данных называется COWFILE1.DAT

**Стартовый каталог Multiherd:**

**Можно использовать любую папку**

**НАСТОЯТЕЛЬНО рекомендуется:**
Папка C:\HERDS для удобства работы с внешними программными файлами и базами данных

**Выбор стартовой папки:**
В опциях меню «Настройки»

**Дополнительная папка:**
Создать папку BASIS с «шаблонной» базой данных

**Для базы-шаблона:**
Создать папку \HERDS\BASIS

**При определенном стартовом каталоге:**
При запуске программы появится список папок из C:\HERDS
→ Можно выбрать базу для загрузки

#### Запуск в режиме Multiherd

**Процедура:**
1. Запустить программу с любой базой данных
2. В меню «Настройки» выбрать «Стартовый каталог Multiherd»
3. Указать нужную папку (например, "C:\DC305" или "C:\HERDS")

**«Шаблонная» база данных:**

**Если система еще не настроена:**
Сначала выбрать шаблонную базу данных

**Варианты:**
- Демоверсия базы данных (если присылали)
- «Любимая» база данных, в которой добавляли команды

**Преимущества базы-шаблона:**
- Значительно облегчает работу
- При добавлении новых пунктов или отчетов → автоматически переносятся в новые создаваемые базы
- Пополняя базу-шаблон актуальными данными, отчетами и пунктами → новые базы на ее основе будут содержать эти пункты

**Копирование:**
Можно скопировать набор команд или таблицу пунктов (осторожно!) из базы-шаблона в другую базу с помощью команды CLONE

#### Запуск в режиме Multiherd в DOS

**Если стартовая папка C:\HERDS:**

1. Закройте все программы и меню C: prompt

2. Изменить папку Dairy Comp:
```
CD \HERDS
```

3. Создать новую папку BASIS:
```
MD BASIS
```
или
```
MD C:\HERDS\BASIS
```
НЕ "MD \BASIS"!

4. Скопировать текущую базу данных в папку basis:
```
COPY COWFILE1.DAT \HERDS\BASIS
```

5. Запустить Dairy Comp и открыть меню «Настройки»
   Выбрать «Стартовый каталог Multiherd» и задать C:\HERDS

6. Закрыть Dairy Comp

7. Запустить Dairy Comp снова командой:
```
DC
```
(не добавлять "1C" или другие параметры для multiherd)

**На экране:**
Список папок (в данном случае только BASIS)
→ Выбрать нужную папку стрелками вверх-вниз или набрать первые буквы названия
→ Выбрать COWFILE1.DAT
→ Загрузится база-шаблон

#### Удаление базы данных

**Процедура в DOS (НЕ из Dairy Comp):**

**Пример:**
Удалить базу данных и папку JONES. Стартовый каталог C:\HERDS

```
CD C:\HERDS           (изменить папку)
DEL JONES             (удалить все файлы в папке JONES)
RD JONES              (удалить папку)
```

**Альтернатива:**
Найти и удалить папку с помощью Проводника Windows

#### Общие и индивидуальные настройки

**В системе multiherd:**
- Некоторые настройки одинаковы во всех базах данных
- Есть индивидуальные параметры

**Меню «Опции» (команды, пункты, события):**
Задаются ТОЛЬКО для текущей базы данных

**Меню «Настройки» (принтеры, цвета и т.д.):**
Действует для ВСЕХ баз данных

**Ниспадающие меню:**
Хранятся в файле в программной папке
→ Одинаковы для всех баз данных

#### CLEANUP и MultiHerd

**В параметрах команды CLEANUP:**
Можно указать только одну букву (например, "C") в имени диска для файлов архива и резервной копии

**Это означает:**
- Файлы архива будут общими для всех баз данных
- Файл резервной копии будет содержать базу данных, которую вы создали после последнего запуска CLEANUP

**Для отдельного хранения файлов архивов и резервных копий:**
Указывать `*` вместо имени диска для файлов архива и резервной копии
→ Файлы сохранятся в соответствующих папках каждой базы данных

---

### Команда CREATE

**Назначение:**
Создание новых баз данных

**Процедура:**
1. Создать новую папку (из DOS, не из Dairy Comp)
2. В этой папке создать пустую базу данных
3. Запустить новую пустую базу данных
4. Загрузить данные DHI командой LOAD ИЛИ добавить животных вручную командой NEWC

#### Создание базы данных (без multiherd)

**Если одна база данных:**
Необходимо указать:
- Номер
- Расположение
- Размер новой базы данных

**ВАЖНО:**
Указывать НЕ существующую базу данных

**При запуске CREATE из командной строки программа запрашивает:**

1. **Номер создаваемой базы данных**
   Например, "1", "2", "3" и т.д.

2. **Имя диска и папки**
   Где разместить создаваемую базу данных
   Обычно: одна буква "C" или "D"
   Можно указать путь: "C:\HERDFILS"

3. **Номер «базы-шаблона»**
   "Шаблон" – база, в которой есть:
   - Таблица пунктов
   - Аббревиатуры команд
   - Настройки карточки коровы
   - Таблица Monitor
   - События
   - Все то, что вы хотите видеть в новой базе
   Обычно: текущая база данных

4. **Имя диска и папки базы-шаблона**
   Также указывается расположение текущей базы данных

5. **Желаемый размер новой базы данных**
   Количество коров
   Рекомендация: несколько больше размера текущей базы данных (коровы плюс нетели)

#### Создание базы данных в режиме Multiherd

**Рекомендация:**
Одинаковые имена файлов баз данных - COWFILE1.DAT
→ Располагаются в разных папках стартового каталога

**Для добавления новой базы данных:**
1. Создать пустую базу данных в новой папке (которую создаст Dairy Comp)
2. Запустить пустую базу данных
3. Загрузить в нее данные DHI командой LOAD

**Пример:**
Стартовая папка C:\HERDS
→ Папки баз данных создаются внутри C:\HERDS
Создадим базу JOHNSON

**Процедура:**

1. Запустить Dairy Comp
2. Загрузить шаблонную базу данных BASIS
3. Запустить команду `CREATE`

**Программа выдаст запросы:**

**Какую базу данных создать?**
→ Всегда указывайте базу данных "1"

**В какой папке создать базу данных?**
→ Введите имя новой папки: `JOHNSON`

Если такая папка (C:\HERDS\JOHNSON) не существует:
→ Dairy Comp предложит создать ее

**Какую базу использовать в качестве шаблона?**
→ Выберите базу 1 в папке C:\BASIS

**Желаемый размер базы данных:**
→ Указывайте размер с запасом

**Пример расчета:**
- 100 коров в доении
- Удвоить: 200
- Увеличить еще: 400

**Результат:**
Новая база данных будет создана: C:\HERDS\JOHNSON\COWFILE1.DAT

**Программа предложит:**
Запустить эту базу данных для загрузки в нее необходимых данных DHI

**После внесения всей информации:**
Новая база данных готова
→ Dairy Comp уведомит вас об успешном выполнении задачи

---

**АНАЛИЗ ЗАВЕРШЕН!**

**Всего проанализировано:** 169 страниц (17 частей)

**Итоговый файл:** `/Users/valeryparfenov/Projects/Personal/herd_app/analysis_notes.md`

**Содержание документации:**
- Полное описание всех команд DairyComp 305
- Система событий и репродуктивных кодов
- Пункты (stored и calculated items)
- Ветеринарные процедуры (VLIST, VENTER)
- Аналитические команды (BREDSUM, EVENTS, MONITOR, ECON)
- Команды отчетности (LIST, SHOW, SUM, PCT, GRAPH)
- Управление базой данных (CLEANUP, CLONE, CONVERT, ABSORB)
- Работа с быками и реестром семени (SIRES, BullsEye, SEMINV)
- Резервное копирование и архивация
- Режим Multiherd для работы с несколькими базами данных

