# HerdMaster Pro - User Stories

## Роли пользователей

| Роль | Описание | Основные задачи |
|------|----------|-----------------|
| **Зоотехник** | Специалист по воспроизводству | Осеменение, контроль стельности, управление группами |
| **Ветврач** | Ветеринарный специалист | Осмотры, лечение, профилактика |
| **Владелец/Управляющий** | Руководитель фермы | KPI, отчёты, экономика |
| **Кормач** | Специалист по кормлению | Рационы, группы кормления |
| **Оператор доения** | Работник молочного блока | Ежедневные надои, выявление проблем |
| **Бухгалтер** | Финансовый учёт | Затраты, выручка, себестоимость |

---

## 1. ЗООТЕХНИК (Reproduction Manager)

### 1.1 Ежедневная работа

#### US-Z01: Просмотр списка на осеменение
> **Как** зоотехник
> **Я хочу** видеть список коров в охоте сегодня
> **Чтобы** не пропустить оптимальное время осеменения

**Критерии приёмки:**
- Список коров с RC=3 (OK/OPEN) и признаками охоты
- Сортировка по секции для удобного обхода
- Показать: ID, кличка, секция, лактация, DIM, кол-во предыдущих осеменений
- Push-уведомление на телефон при детекции охоты датчиками

**DairyComp эквивалент:** `LIST FOR RC=3 DIM>60 BY PEN`

---

#### US-Z02: Регистрация осеменения
> **Как** зоотехник
> **Я хочу** быстро зарегистрировать осеменение со смартфона
> **Чтобы** данные сразу попали в систему без бумажек

**Критерии приёмки:**
- Сканирование бирки (QR/RFID) → открытие карточки
- Выбор быка из списка (с рекомендацией AI)
- Указание техника и схемы (1L, 2L, etc.)
- Автоматическое изменение RC: OK/OPEN → BRED
- Работа в оффлайн-режиме с синхронизацией

**DairyComp эквивалент:** `BRED` (ручной ввод команды)

**Улучшение HerdMaster:**
- Мобильное приложение вместо ПК
- AI-рекомендация быка (BullsEye)
- Оффлайн режим

---

#### US-Z03: Список на проверку стельности
> **Как** зоотехник
> **Я хочу** видеть список коров для проверки на стельность
> **Чтобы** вовремя выявить яловых и повторно осеменить

**Критерии приёмки:**
- Коровы с RC=4 (BRED), DSLH > 35 дней
- Группировка по секциям
- Показать: дату последнего осеменения, быка, кол-во осеменений
- Возможность отметить результат: стельна / ялова / перепроверить

**DairyComp эквивалент:** `VLIST FOR VC=3`

---

#### US-Z04: Регистрация результата проверки
> **Как** зоотехник
> **Я хочу** отметить результат УЗИ-диагностики прямо в коровнике
> **Чтобы** не переносить данные с бумаги

**Критерии приёмки:**
- Быстрый ввод: Стельна / Ялова / Перепроверить / Аборт
- При "Стельна" — указать срок или выбрать дату осеменения
- При "Ялова" — автоматически RC: BRED → OK/OPEN
- Возможность прикрепить скриншот УЗИ

**DairyComp эквивалент:** `VENTER` с кодами 4-7

**Улучшение HerdMaster:**
- Сохранение изображений УЗИ
- ML-прогноз стельности до осмотра

---

#### US-Z05: Список на запуск (сухостой)
> **Как** зоотехник
> **Я хочу** видеть коров, которых пора запускать
> **Чтобы** подготовить их к отёлу вовремя

**Критерии приёмки:**
- Коровы с RC=5 (PREG), DCC > 220 дней
- Показать: ожидаемую дату отёла, текущий надой, SCC
- Рекомендация по дате запуска (за 60 дней до отёла)
- Возможность зарегистрировать запуск и перевод в секцию сухостоя

**DairyComp эквивалент:** `LIST FOR RC=5 DCC>220`

---

### 1.2 Аналитика воспроизводства

#### US-Z06: Дашборд воспроизводства
> **Как** зоотехник
> **Я хочу** видеть ключевые показатели воспроизводства на одном экране
> **Чтобы** быстро оценить ситуацию в стаде

**Критерии приёмки:**
- Распределение по RC (диаграмма)
- Средний сервис-период
- Индекс осеменения (TBRD для стельных)
- % стельности от 1-го осеменения
- Выявляемость охоты (% от ожидаемых)
- Тренды по месяцам

**DairyComp эквивалент:** `BREDSUM`, `SUM BY RC`, `PCT BY RC`

**Улучшение HerdMaster:**
- Интерактивный дашборд вместо текстовых отчётов
- Drill-down в детали
- Бенчмаркинг с другими фермами

---

#### US-Z07: Подбор быка (BullsEye)
> **Как** зоотехник
> **Я хочу** получить рекомендацию по выбору быка для конкретной коровы
> **Чтобы** улучшить генетику стада

**Критерии приёмки:**
- Учёт родословной (избежание инбридинга)
- Учёт слабых сторон коровы (экстерьер, здоровье)
- Учёт целей фермы (молоко vs мясо, лёгкость отёлов)
- Ранжирование быков с объяснением

**DairyComp эквивалент:** Нет (требует внешних программ)

**Улучшение HerdMaster:**
- Встроенный AI-подбор

---

## 2. ВЕТВРАЧ (Veterinarian)

### 2.1 Ежедневная работа

#### US-V01: Список на ветеринарный осмотр
> **Как** ветврач
> **Я хочу** видеть список животных, требующих осмотра сегодня
> **Чтобы** планировать обход

**Критерии приёмки:**
- Категории: послеродовые (FRSH), проверка стельности (PREG), проблемные (PROB)
- Приоритизация по срочности
- История предыдущих осмотров и лечений
- Печать списка или просмотр на планшете

**DairyComp эквивалент:** `VLIST`

---

#### US-V02: Регистрация лечения
> **Как** ветврач
> **Я хочу** записать проведённое лечение
> **Чтобы** отслеживать историю и контролировать сроки ожидания

**Критерии приёмки:**
- Выбор диагноза из справочника (мастит, эндометрит, хромота...)
- Выбор препарата (сканирование штрих-кода)
- Автоматический расчёт срока ожидания (withdrawal)
- Алерт при попытке сдать молоко до окончания срока
- Электронная подпись ветврача

**DairyComp эквивалент:** `MAST`, `LAME`, `METR` + REM

**Улучшение HerdMaster:**
- Справочник препаратов с withdrawal
- Автоматический контроль сроков
- Интеграция с аптечкой (учёт остатков)

---

#### US-V03: Протокол лечения
> **Как** ветврач
> **Я хочу** применить стандартный протокол лечения
> **Чтобы** не вводить каждый препарат отдельно

**Критерии приёмки:**
- Библиотека протоколов (мастит клинический, мастит субклинический...)
- Автозаполнение всех препаратов и доз
- Возможность корректировки под конкретный случай
- Генерация напоминаний о повторных обработках

**DairyComp эквивалент:** Нет

**Улучшение HerdMaster:**
- Готовые протоколы
- Автонапоминания

---

#### US-V04: Мониторинг здоровья стада
> **Как** ветврач
> **Я хочу** видеть статистику заболеваемости
> **Чтобы** выявлять проблемы на ранней стадии

**Критерии приёмки:**
- Частота заболеваний по типам (мастит, хромота, метрит)
- Тренды по месяцам
- Связь с другими факторами (секция, лактация, сезон)
- Алерты при превышении порогов

**DairyComp эквивалент:** `SUM BY VETC`, `EVENTS`, `MONITOR`

**Улучшение HerdMaster:**
- Предиктивная аналитика (ML)
- Автоматические алерты

---

### 2.2 Профилактика

#### US-V05: Календарь вакцинаций
> **Как** ветврач
> **Я хочу** видеть план вакцинаций на неделю/месяц
> **Чтобы** не пропустить сроки

**Критерии приёмки:**
- Список животных для каждой вакцинации
- Учёт возраста и стадии (стельность, лактация)
- Автоматический расчёт по дате рождения/отёла
- История выполненных вакцинаций

**DairyComp эквивалент:** `LIST FOR условие` (ручной расчёт)

**Улучшение HerdMaster:**
- Автоматический календарь
- Push-напоминания

---

#### US-V06: Обработка копыт
> **Как** ветврач
> **Я хочу** вести учёт обработки копыт
> **Чтобы** планировать профилактику хромоты

**Критерии приёмки:**
- Регистрация обработки с указанием ног и проблем
- Планирование повторных обработок
- Статистика по частоте проблем
- Связь с продуктивностью (падение надоя при хромоте)

**DairyComp эквивалент:** `FOOT` + REM

**Улучшение HerdMaster:**
- Детальный учёт по ногам
- Фото-фиксация
- Аналитика хромоты

---

## 3. ВЛАДЕЛЕЦ / УПРАВЛЯЮЩИЙ (Owner/Manager)

### 3.1 Обзор фермы

#### US-O01: Главный дашборд
> **Как** владелец
> **Я хочу** видеть ключевые показатели фермы на одном экране
> **Чтобы** быстро понимать ситуацию

**Критерии приёмки:**
- Поголовье по категориям (дойные, сухостойные, нетели)
- Надой за сегодня/вчера/неделю/месяц
- Валовой надой vs план
- Качество молока (жир, белок, SCC)
- Ключевые алерты (проблемы требующие внимания)

**DairyComp эквивалент:** Нет единого экрана

**Улучшение HerdMaster:**
- Визуальный дашборд
- Real-time данные с доильного оборудования

---

#### US-O02: Экономические показатели
> **Как** владелец
> **Я хочу** видеть себестоимость молока и рентабельность
> **Чтобы** принимать управленческие решения

**Критерии приёмки:**
- Себестоимость литра молока
- Структура затрат (корма, ветпрепараты, осеменение)
- IOFC (Income Over Feed Cost)
- Прогноз выручки на месяц
- Сравнение с прошлым периодом

**DairyComp эквивалент:** `ECON` (базовый)

**Улучшение HerdMaster:**
- Полноценный управленческий учёт
- Интеграция с 1C

---

#### US-O03: Отчёт для банка/инвестора
> **Как** владелец
> **Я хочу** сформировать отчёт о состоянии стада
> **Чтобы** предоставить в банк для кредита

**Критерии приёмки:**
- Структура стада по возрасту и продуктивности
- Средняя продуктивность за 305 дней
- Генетическая ценность стада
- Динамика показателей за 3 года
- Экспорт в PDF с печатью

**DairyComp эквивалент:** Ручная компиляция отчётов

**Улучшение HerdMaster:**
- Готовые шаблоны отчётов
- Автоматическая генерация

---

### 3.2 Выбраковка

#### US-O04: Рекомендации по выбраковке
> **Как** владелец
> **Я хочу** видеть список коров-кандидатов на выбраковку
> **Чтобы** оптимизировать состав стада

**Критерии приёмки:**
- Ранжирование по экономической ценности (LTV)
- Учёт: продуктивность, здоровье, воспроизводство, возраст
- Причина рекомендации (низкий надой, хроническая хромота...)
- Расчёт экономии/потерь при выбраковке

**DairyComp эквивалент:** `LIST BY RELV` + ручной анализ

**Улучшение HerdMaster:**
- AI-рекомендации
- Экономическое обоснование

---

## 4. ОПЕРАТОР ДОЕНИЯ (Milking Operator)

#### US-M01: Просмотр надоев за смену
> **Как** оператор доения
> **Я хочу** видеть надои по каждой корове за смену
> **Чтобы** выявить проблемы

**Критерии приёмки:**
- Список коров с надоем за текущую дойку
- Сравнение с предыдущей дойкой и средним
- Подсветка отклонений (резкое падение > 15%)
- Быстрая регистрация проблемы (мастит, отказ от еды)

**DairyComp эквивалент:** Ручной ввод через `MILK` или импорт

**Улучшение HerdMaster:**
- Автоматический импорт с доильного оборудования
- Алерты в реальном времени

---

#### US-M02: Список коров на "отстой"
> **Как** оператор доения
> **Я хочу** знать, чьё молоко нельзя сдавать в танк
> **Чтобы** не испортить партию

**Критерии приёмки:**
- Коровы с активным сроком ожидания (withdrawal)
- Коровы с высоким SCC (карантин)
- Дата окончания ограничения
- Причина ограничения

**DairyComp эквивалент:** `LIST FOR WDAYS>0`

**Улучшение HerdMaster:**
- Автоматический контроль на доильной установке
- Интеграция с сортировочными воротами

---

## 5. КОРМАЧ (Feeding Manager)

#### US-F01: Состав групп кормления
> **Как** кормач
> **Я хочу** видеть актуальный состав групп кормления
> **Чтобы** рассчитать рацион

**Критерии приёмки:**
- Количество голов в каждой группе
- Средний надой и стадия лактации группы
- Изменения за последние дни (переводы)
- Экспорт для кормосмесителя

**DairyComp эквивалент:** `SUM BY PEN`

**Улучшение HerdMaster:**
- Интеграция с кормосмесителем
- Автоматический пересчёт рациона

---

#### US-F02: Контроль выдачи корма
> **Как** кормач
> **Я хочу** контролировать факт vs план выдачи корма
> **Чтобы** избежать перекорма/недокорма

**Критерии приёмки:**
- План выдачи по группам
- Фактическая выдача (с кормосмесителя)
- Отклонение факт/план
- Алерт при отклонении > 5%

**DairyComp эквивалент:** Нет

**Улучшение HerdMaster:**
- Интеграция с миксером
- Контроль в реальном времени

---

## 6. ОБЩИЕ ФУНКЦИИ (All Users)

#### US-G01: Поиск животного
> **Как** любой пользователь
> **Я хочу** быстро найти корову по номеру или кличке
> **Чтобы** открыть её карточку

**Критерии приёмки:**
- Поиск по: ушной бирке, RFID, кличке, рег. номеру
- Сканирование QR/штрих-кода
- Автодополнение при вводе
- История последних просмотренных

**DairyComp эквивалент:** Ввод номера в командную строку

---

#### US-G02: Карточка животного
> **Как** любой пользователь
> **Я хочу** видеть полную информацию о корове
> **Чтобы** принимать решения

**Критерии приёмки:**
- Вкладки: Обзор, Воспроизводство, Продуктивность, Здоровье, История
- Фото животного
- Ключевые метрики на первом экране
- Лактационная кривая (график)
- Родословная (до 3 поколений)

**DairyComp эквивалент:** 6 страниц карточки (текстовые)

**Улучшение HerdMaster:**
- Визуальное представление
- Фото
- Интерактивные графики

---

#### US-G03: Мобильный доступ
> **Как** любой пользователь
> **Я хочу** работать с системой со смартфона
> **Чтобы** не быть привязанным к офису

**Критерии приёмки:**
- Все основные функции в мобильном приложении
- Работа без интернета (оффлайн)
- Синхронизация при появлении связи
- Push-уведомления о важных событиях

**DairyComp эквивалент:** Только десктоп

---

#### US-G04: Уведомления и алерты
> **Как** любой пользователь
> **Я хочу** получать уведомления о важных событиях
> **Чтобы** не пропустить критичные ситуации

**Критерии приёмки:**
- Типы: ожидаемый отёл, срок проверки стельности, окончание withdrawal
- Каналы: push в приложении, Telegram, email
- Настройка по ролям (что кому приходит)
- Эскалация (если не отреагировали)

**DairyComp эквивалент:** Нет

---

## Приоритизация для MVP

### Must Have (MVP)
- US-Z01: Список на осеменение
- US-Z02: Регистрация осеменения
- US-Z03: Список на проверку стельности
- US-V01: Список на ветеринарный осмотр
- US-G01: Поиск животного
- US-G02: Карточка животного

### Should Have (v1.0)
- US-Z04: Регистрация результата проверки
- US-Z05: Список на запуск
- US-Z06: Дашборд воспроизводства
- US-V02: Регистрация лечения
- US-O01: Главный дашборд
- US-G03: Мобильный доступ

### Could Have (v1.1+)
- US-Z07: Подбор быка (BullsEye)
- US-V03: Протокол лечения
- US-V04: Мониторинг здоровья стада
- US-O02: Экономические показатели
- US-M01: Просмотр надоев за смену

### Won't Have (Later)
- US-V05: Календарь вакцинаций
- US-O03: Отчёт для банка
- US-O04: Рекомендации по выбраковке
- US-F01, US-F02: Кормление (отдельный модуль)
